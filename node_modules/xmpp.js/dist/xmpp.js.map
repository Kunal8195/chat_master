{
  "version": 3,
  "sources": [
    "../../node_modules/browser-pack/_prelude.js",
    "../../node_modules/browser-resolve/empty.js",
    "../../node_modules/events/events.js",
    "../../node_modules/inherits/inherits_browser.js",
    "../../node_modules/ltx/lib/Element.js",
    "../../node_modules/ltx/lib/clone.js",
    "../../node_modules/ltx/lib/equal.js",
    "../../node_modules/ltx/lib/escape.js",
    "../../node_modules/ltx/lib/parsers/ltx.js",
    "../../node_modules/sasl-anonymous/lib/mechanism.js",
    "../../node_modules/sasl-anonymous/main.js",
    "../../node_modules/sasl-plain/lib/mechanism.js",
    "../../node_modules/saslmechanisms/lib/factory.js",
    "../../node_modules/saslmechanisms/main.js",
    "../client-core/index.js",
    "../client-core/lib/Client.js",
    "../connection/index.js",
    "../events/index.js",
    "../events/lib/EventEmitter.js",
    "../events/lib/TimeoutError.js",
    "../events/lib/delay.js",
    "../events/lib/promise.js",
    "../events/lib/timeout.js",
    "../jid/index.js",
    "../jid/lib/JID.js",
    "../jid/lib/escaping.js",
    "../jid/lib/parse.js",
    "../plugin/index.js",
    "../plugin/lib/Plugin.js",
    "../plugins/bind/index.js",
    "../plugins/iq-caller/index.js",
    "../plugins/reconnect/index.js",
    "../plugins/sasl-anonymous/index.js",
    "../plugins/sasl-plain/index.js",
    "../plugins/sasl/index.js",
    "../plugins/sasl/lib/b64.js",
    "../plugins/session-establishment/index.js",
    "../plugins/stream-features/index.js",
    "../plugins/websocket/index.js",
    "../plugins/websocket/lib/Connection.js",
    "../plugins/websocket/lib/FramedParser.js",
    "../plugins/websocket/lib/Socket.js",
    "../xml/index.js",
    "../xml/lib/Element.js",
    "../xml/lib/Parser.js",
    "../xml/lib/x.js",
    "index.js",
    "lib/Client.js",
    "lib/plugins.js"
  ],
  "names": [],
  "mappings": "AAAA;ACAA;AACA;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS,YAAT,GAAwB;AACtB,OAAK,OAAL,GAAe,KAAK,OAAL,IAAgB,EAA/B;AACA,OAAK,aAAL,GAAqB,KAAK,aAAL,IAAsB,SAA3C;AACD;AACD,OAAO,OAAP,GAAiB,YAAjB;;AAEA;AACA,aAAa,YAAb,GAA4B,YAA5B;;AAEA,aAAa,SAAb,CAAuB,OAAvB,GAAiC,SAAjC;AACA,aAAa,SAAb,CAAuB,aAAvB,GAAuC,SAAvC;;AAEA;AACA;AACA,aAAa,mBAAb,GAAmC,EAAnC;;AAEA;AACA;AACA,aAAa,SAAb,CAAuB,eAAvB,GAAyC,UAAS,CAAT,EAAY;AACnD,MAAI,CAAC,SAAS,CAAT,CAAD,IAAgB,IAAI,CAApB,IAAyB,MAAM,CAAN,CAA7B,EACE,MAAM,UAAU,6BAAV,CAAN;AACF,OAAK,aAAL,GAAqB,CAArB;AACA,SAAO,IAAP;AACD,CALD;;AAOA,aAAa,SAAb,CAAuB,IAAvB,GAA8B,UAAS,IAAT,EAAe;AAC3C,MAAI,EAAJ,EAAQ,OAAR,EAAiB,GAAjB,EAAsB,IAAtB,EAA4B,CAA5B,EAA+B,SAA/B;;AAEA,MAAI,CAAC,KAAK,OAAV,EACE,KAAK,OAAL,GAAe,EAAf;;AAEF;AACA,MAAI,SAAS,OAAb,EAAsB;AACpB,QAAI,CAAC,KAAK,OAAL,CAAa,KAAd,IACC,SAAS,KAAK,OAAL,CAAa,KAAtB,KAAgC,CAAC,KAAK,OAAL,CAAa,KAAb,CAAmB,MADzD,EACkE;AAChE,WAAK,UAAU,CAAV,CAAL;AACA,UAAI,cAAc,KAAlB,EAAyB;AACvB,cAAM,EAAN,CADuB,CACb;AACX,OAFD,MAEO;AACL;AACA,YAAI,MAAM,IAAI,KAAJ,CAAU,2CAA2C,EAA3C,GAAgD,GAA1D,CAAV;AACA,YAAI,OAAJ,GAAc,EAAd;AACA,cAAM,GAAN;AACD;AACF;AACF;;AAED,YAAU,KAAK,OAAL,CAAa,IAAb,CAAV;;AAEA,MAAI,YAAY,OAAZ,CAAJ,EACE,OAAO,KAAP;;AAEF,MAAI,WAAW,OAAX,CAAJ,EAAyB;AACvB,YAAQ,UAAU,MAAlB;AACE;AACA,WAAK,CAAL;AACE,gBAAQ,IAAR,CAAa,IAAb;AACA;AACF,WAAK,CAAL;AACE,gBAAQ,IAAR,CAAa,IAAb,EAAmB,UAAU,CAAV,CAAnB;AACA;AACF,WAAK,CAAL;AACE,gBAAQ,IAAR,CAAa,IAAb,EAAmB,UAAU,CAAV,CAAnB,EAAiC,UAAU,CAAV,CAAjC;AACA;AACF;AACA;AACE,eAAO,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,SAA3B,EAAsC,CAAtC,CAAP;AACA,gBAAQ,KAAR,CAAc,IAAd,EAAoB,IAApB;AAdJ;AAgBD,GAjBD,MAiBO,IAAI,SAAS,OAAT,CAAJ,EAAuB;AAC5B,WAAO,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,SAA3B,EAAsC,CAAtC,CAAP;AACA,gBAAY,QAAQ,KAAR,EAAZ;AACA,UAAM,UAAU,MAAhB;AACA,SAAK,IAAI,CAAT,EAAY,IAAI,GAAhB,EAAqB,GAArB;AACE,gBAAU,CAAV,EAAa,KAAb,CAAmB,IAAnB,EAAyB,IAAzB;AADF;AAED;;AAED,SAAO,IAAP;AACD,CArDD;;AAuDA,aAAa,SAAb,CAAuB,WAAvB,GAAqC,UAAS,IAAT,EAAe,QAAf,EAAyB;AAC5D,MAAI,CAAJ;;AAEA,MAAI,CAAC,WAAW,QAAX,CAAL,EACE,MAAM,UAAU,6BAAV,CAAN;;AAEF,MAAI,CAAC,KAAK,OAAV,EACE,KAAK,OAAL,GAAe,EAAf;;AAEF;AACA;AACA,MAAI,KAAK,OAAL,CAAa,WAAjB,EACE,KAAK,IAAL,CAAU,aAAV,EAAyB,IAAzB,EACU,WAAW,SAAS,QAApB,IACA,SAAS,QADT,GACoB,QAF9B;;AAIF,MAAI,CAAC,KAAK,OAAL,CAAa,IAAb,CAAL;AACE;AACA,SAAK,OAAL,CAAa,IAAb,IAAqB,QAArB,CAFF,KAGK,IAAI,SAAS,KAAK,OAAL,CAAa,IAAb,CAAT,CAAJ;AACH;AACA,SAAK,OAAL,CAAa,IAAb,EAAmB,IAAnB,CAAwB,QAAxB,EAFG;AAIH;AACA,SAAK,OAAL,CAAa,IAAb,IAAqB,CAAC,KAAK,OAAL,CAAa,IAAb,CAAD,EAAqB,QAArB,CAArB;;AAEF;AACA,MAAI,SAAS,KAAK,OAAL,CAAa,IAAb,CAAT,KAAgC,CAAC,KAAK,OAAL,CAAa,IAAb,EAAmB,MAAxD,EAAgE;AAC9D,QAAI,CAAC,YAAY,KAAK,aAAjB,CAAL,EAAsC;AACpC,UAAI,KAAK,aAAT;AACD,KAFD,MAEO;AACL,UAAI,aAAa,mBAAjB;AACD;;AAED,QAAI,KAAK,IAAI,CAAT,IAAc,KAAK,OAAL,CAAa,IAAb,EAAmB,MAAnB,GAA4B,CAA9C,EAAiD;AAC/C,WAAK,OAAL,CAAa,IAAb,EAAmB,MAAnB,GAA4B,IAA5B;AACA,cAAQ,KAAR,CAAc,kDACA,qCADA,GAEA,kDAFd,EAGc,KAAK,OAAL,CAAa,IAAb,EAAmB,MAHjC;AAIA,UAAI,OAAO,QAAQ,KAAf,KAAyB,UAA7B,EAAyC;AACvC;AACA,gBAAQ,KAAR;AACD;AACF;AACF;;AAED,SAAO,IAAP;AACD,CAhDD;;AAkDA,aAAa,SAAb,CAAuB,EAAvB,GAA4B,aAAa,SAAb,CAAuB,WAAnD;;AAEA,aAAa,SAAb,CAAuB,IAAvB,GAA8B,UAAS,IAAT,EAAe,QAAf,EAAyB;AACrD,MAAI,CAAC,WAAW,QAAX,CAAL,EACE,MAAM,UAAU,6BAAV,CAAN;;AAEF,MAAI,QAAQ,KAAZ;;AAEA,WAAS,CAAT,GAAa;AACX,SAAK,cAAL,CAAoB,IAApB,EAA0B,CAA1B;;AAEA,QAAI,CAAC,KAAL,EAAY;AACV,cAAQ,IAAR;AACA,eAAS,KAAT,CAAe,IAAf,EAAqB,SAArB;AACD;AACF;;AAED,IAAE,QAAF,GAAa,QAAb;AACA,OAAK,EAAL,CAAQ,IAAR,EAAc,CAAd;;AAEA,SAAO,IAAP;AACD,CAnBD;;AAqBA;AACA,aAAa,SAAb,CAAuB,cAAvB,GAAwC,UAAS,IAAT,EAAe,QAAf,EAAyB;AAC/D,MAAI,IAAJ,EAAU,QAAV,EAAoB,MAApB,EAA4B,CAA5B;;AAEA,MAAI,CAAC,WAAW,QAAX,CAAL,EACE,MAAM,UAAU,6BAAV,CAAN;;AAEF,MAAI,CAAC,KAAK,OAAN,IAAiB,CAAC,KAAK,OAAL,CAAa,IAAb,CAAtB,EACE,OAAO,IAAP;;AAEF,SAAO,KAAK,OAAL,CAAa,IAAb,CAAP;AACA,WAAS,KAAK,MAAd;AACA,aAAW,CAAC,CAAZ;;AAEA,MAAI,SAAS,QAAT,IACC,WAAW,KAAK,QAAhB,KAA6B,KAAK,QAAL,KAAkB,QADpD,EAC+D;AAC7D,WAAO,KAAK,OAAL,CAAa,IAAb,CAAP;AACA,QAAI,KAAK,OAAL,CAAa,cAAjB,EACE,KAAK,IAAL,CAAU,gBAAV,EAA4B,IAA5B,EAAkC,QAAlC;AAEH,GAND,MAMO,IAAI,SAAS,IAAT,CAAJ,EAAoB;AACzB,SAAK,IAAI,MAAT,EAAiB,MAAM,CAAvB,GAA2B;AACzB,UAAI,KAAK,CAAL,MAAY,QAAZ,IACC,KAAK,CAAL,EAAQ,QAAR,IAAoB,KAAK,CAAL,EAAQ,QAAR,KAAqB,QAD9C,EACyD;AACvD,mBAAW,CAAX;AACA;AACD;AACF;;AAED,QAAI,WAAW,CAAf,EACE,OAAO,IAAP;;AAEF,QAAI,KAAK,MAAL,KAAgB,CAApB,EAAuB;AACrB,WAAK,MAAL,GAAc,CAAd;AACA,aAAO,KAAK,OAAL,CAAa,IAAb,CAAP;AACD,KAHD,MAGO;AACL,WAAK,MAAL,CAAY,QAAZ,EAAsB,CAAtB;AACD;;AAED,QAAI,KAAK,OAAL,CAAa,cAAjB,EACE,KAAK,IAAL,CAAU,gBAAV,EAA4B,IAA5B,EAAkC,QAAlC;AACH;;AAED,SAAO,IAAP;AACD,CA3CD;;AA6CA,aAAa,SAAb,CAAuB,kBAAvB,GAA4C,UAAS,IAAT,EAAe;AACzD,MAAI,GAAJ,EAAS,SAAT;;AAEA,MAAI,CAAC,KAAK,OAAV,EACE,OAAO,IAAP;;AAEF;AACA,MAAI,CAAC,KAAK,OAAL,CAAa,cAAlB,EAAkC;AAChC,QAAI,UAAU,MAAV,KAAqB,CAAzB,EACE,KAAK,OAAL,GAAe,EAAf,CADF,KAEK,IAAI,KAAK,OAAL,CAAa,IAAb,CAAJ,EACH,OAAO,KAAK,OAAL,CAAa,IAAb,CAAP;AACF,WAAO,IAAP;AACD;;AAED;AACA,MAAI,UAAU,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,SAAK,GAAL,IAAY,KAAK,OAAjB,EAA0B;AACxB,UAAI,QAAQ,gBAAZ,EAA8B;AAC9B,WAAK,kBAAL,CAAwB,GAAxB;AACD;AACD,SAAK,kBAAL,CAAwB,gBAAxB;AACA,SAAK,OAAL,GAAe,EAAf;AACA,WAAO,IAAP;AACD;;AAED,cAAY,KAAK,OAAL,CAAa,IAAb,CAAZ;;AAEA,MAAI,WAAW,SAAX,CAAJ,EAA2B;AACzB,SAAK,cAAL,CAAoB,IAApB,EAA0B,SAA1B;AACD,GAFD,MAEO,IAAI,SAAJ,EAAe;AACpB;AACA,WAAO,UAAU,MAAjB;AACE,WAAK,cAAL,CAAoB,IAApB,EAA0B,UAAU,UAAU,MAAV,GAAmB,CAA7B,CAA1B;AADF;AAED;AACD,SAAO,KAAK,OAAL,CAAa,IAAb,CAAP;;AAEA,SAAO,IAAP;AACD,CAtCD;;AAwCA,aAAa,SAAb,CAAuB,SAAvB,GAAmC,UAAS,IAAT,EAAe;AAChD,MAAI,GAAJ;AACA,MAAI,CAAC,KAAK,OAAN,IAAiB,CAAC,KAAK,OAAL,CAAa,IAAb,CAAtB,EACE,MAAM,EAAN,CADF,KAEK,IAAI,WAAW,KAAK,OAAL,CAAa,IAAb,CAAX,CAAJ,EACH,MAAM,CAAC,KAAK,OAAL,CAAa,IAAb,CAAD,CAAN,CADG,KAGH,MAAM,KAAK,OAAL,CAAa,IAAb,EAAmB,KAAnB,EAAN;AACF,SAAO,GAAP;AACD,CATD;;AAWA,aAAa,SAAb,CAAuB,aAAvB,GAAuC,UAAS,IAAT,EAAe;AACpD,MAAI,KAAK,OAAT,EAAkB;AAChB,QAAI,aAAa,KAAK,OAAL,CAAa,IAAb,CAAjB;;AAEA,QAAI,WAAW,UAAX,CAAJ,EACE,OAAO,CAAP,CADF,KAEK,IAAI,UAAJ,EACH,OAAO,WAAW,MAAlB;AACH;AACD,SAAO,CAAP;AACD,CAVD;;AAYA,aAAa,aAAb,GAA6B,UAAS,OAAT,EAAkB,IAAlB,EAAwB;AACnD,SAAO,QAAQ,aAAR,CAAsB,IAAtB,CAAP;AACD,CAFD;;AAIA,SAAS,UAAT,CAAoB,GAApB,EAAyB;AACvB,SAAO,OAAO,GAAP,KAAe,UAAtB;AACD;;AAED,SAAS,QAAT,CAAkB,GAAlB,EAAuB;AACrB,SAAO,OAAO,GAAP,KAAe,QAAtB;AACD;;AAED,SAAS,QAAT,CAAkB,GAAlB,EAAuB;AACrB,SAAO,QAAO,GAAP,yCAAO,GAAP,OAAe,QAAf,IAA2B,QAAQ,IAA1C;AACD;;AAED,SAAS,WAAT,CAAqB,GAArB,EAA0B;AACxB,SAAO,QAAQ,KAAK,CAApB;AACD;;;;;AC7SD,IAAI,OAAO,OAAO,MAAd,KAAyB,UAA7B,EAAyC;AACvC;AACA,SAAO,OAAP,GAAiB,SAAS,QAAT,CAAkB,IAAlB,EAAwB,SAAxB,EAAmC;AAClD,SAAK,MAAL,GAAc,SAAd;AACA,SAAK,SAAL,GAAiB,OAAO,MAAP,CAAc,UAAU,SAAxB,EAAmC;AAClD,mBAAa;AACX,eAAO,IADI;AAEX,oBAAY,KAFD;AAGX,kBAAU,IAHC;AAIX,sBAAc;AAJH;AADqC,KAAnC,CAAjB;AAQD,GAVD;AAWD,CAbD,MAaO;AACL;AACA,SAAO,OAAP,GAAiB,SAAS,QAAT,CAAkB,IAAlB,EAAwB,SAAxB,EAAmC;AAClD,SAAK,MAAL,GAAc,SAAd;AACA,QAAI,WAAW,SAAX,QAAW,GAAY,CAAE,CAA7B;AACA,aAAS,SAAT,GAAqB,UAAU,SAA/B;AACA,SAAK,SAAL,GAAiB,IAAI,QAAJ,EAAjB;AACA,SAAK,SAAL,CAAe,WAAf,GAA6B,IAA7B;AACD,GAND;AAOD;;;ACtBD;;;;AAEA,IAAI,SAAS,QAAQ,UAAR,CAAb;AACA,IAAI,YAAY,OAAO,SAAvB;AACA,IAAI,gBAAgB,OAAO,aAA3B;;AAEA,IAAI,WAAW,QAAQ,SAAR,CAAf;AACA,IAAI,QAAQ,SAAS,KAArB;AACA,IAAI,YAAY,SAAS,IAAzB;AACA,IAAI,aAAa,SAAS,KAA1B;AACA,IAAI,gBAAgB,SAAS,QAA7B;;AAEA,IAAI,QAAQ,QAAQ,SAAR,CAAZ;;AAEA;;;;;;AAMA,SAAS,OAAT,CAAkB,IAAlB,EAAwB,KAAxB,EAA+B;AAC7B,OAAK,IAAL,GAAY,IAAZ;AACA,OAAK,MAAL,GAAc,IAAd;AACA,OAAK,QAAL,GAAgB,EAAhB;AACA,OAAK,KAAL,GAAa,EAAb;AACA,OAAK,QAAL,CAAc,KAAd;AACD;;AAED;;AAEA;;;AAGA,QAAQ,SAAR,CAAkB,EAAlB,GAAuB,UAAU,IAAV,EAAgB,KAAhB,EAAuB;AAC5C,SAAQ,KAAK,OAAL,OAAmB,IAApB,KACN,CAAC,KAAD,IAAW,KAAK,KAAL,OAAiB,KADtB,CAAP;AAED,CAHD;;AAKA;AACA,QAAQ,SAAR,CAAkB,OAAlB,GAA4B,YAAY;AACtC,MAAI,KAAK,IAAL,CAAU,OAAV,CAAkB,GAAlB,KAA0B,CAA9B,EAAiC;AAC/B,WAAO,KAAK,IAAL,CAAU,MAAV,CAAiB,KAAK,IAAL,CAAU,OAAV,CAAkB,GAAlB,IAAyB,CAA1C,CAAP;AACD,GAFD,MAEO;AACL,WAAO,KAAK,IAAZ;AACD;AACF,CAND;;AAQA;;;AAGA,QAAQ,SAAR,CAAkB,KAAlB,GAA0B,YAAY;AACpC,MAAI,KAAK,IAAL,CAAU,OAAV,CAAkB,GAAlB,KAA0B,CAA9B,EAAiC;AAC/B,QAAI,SAAS,KAAK,IAAL,CAAU,MAAV,CAAiB,CAAjB,EAAoB,KAAK,IAAL,CAAU,OAAV,CAAkB,GAAlB,CAApB,CAAb;AACA,WAAO,KAAK,MAAL,CAAY,MAAZ,CAAP;AACD;AACD,SAAO,KAAK,MAAL,EAAP;AACD,CAND;;AAQA;;;AAGA,QAAQ,SAAR,CAAkB,MAAlB,GAA2B,UAAU,MAAV,EAAkB;AAC3C,MAAI,CAAC,MAAL,EAAa;AACX;AACA,QAAI,KAAK,KAAL,CAAW,KAAf,EAAsB;AACpB,aAAO,KAAK,KAAL,CAAW,KAAlB;AACD,KAFD,MAEO,IAAI,KAAK,MAAT,EAAiB;AACtB,aAAO,KAAK,MAAL,CAAY,MAAZ,EAAP;AACD;AACF,GAPD,MAOO;AACL;AACA,QAAI,OAAO,WAAW,MAAtB;AACA,QAAI,KAAK,KAAL,CAAW,IAAX,CAAJ,EAAsB;AACpB,aAAO,KAAK,KAAL,CAAW,IAAX,CAAP;AACD,KAFD,MAEO,IAAI,KAAK,MAAT,EAAiB;AACtB,aAAO,KAAK,MAAL,CAAY,MAAZ,CAAmB,MAAnB,CAAP;AACD;AACF;AACF,CAjBD;;AAmBA;;;AAGA,QAAQ,SAAR,CAAkB,QAAlB,GAA6B,YAAY;AACvC,MAAI,aAAa,EAAjB;;AAEA,MAAI,KAAK,MAAT,EAAiB;AACf,iBAAa,KAAK,MAAL,CAAY,QAAZ,EAAb;AACD;;AAED,OAAK,IAAI,IAAT,IAAiB,KAAK,KAAtB,EAA6B;AAC3B,QAAI,IAAI,KAAK,KAAL,CAAW,aAAX,CAAR;AACA,QAAI,KAAK,KAAL,CAAW,cAAX,CAA0B,IAA1B,KAAmC,CAAvC,EAA0C;AACxC,iBAAW,KAAK,KAAL,CAAW,IAAX,CAAX,IAA+B,EAAE,CAAF,CAA/B;AACD;AACF;AACD,SAAO,UAAP;AACD,CAdD;;AAgBA,QAAQ,SAAR,CAAkB,QAAlB,GAA6B,UAAU,KAAV,EAAiB;AAC5C,MAAI,OAAO,KAAP,KAAiB,QAArB,EAA+B;AAC7B,SAAK,KAAL,CAAW,KAAX,GAAmB,KAAnB;AACD,GAFD,MAEO,IAAI,KAAJ,EAAW;AAChB,WAAO,IAAP,CAAY,KAAZ,EAAmB,OAAnB,CAA2B,UAAU,GAAV,EAAe;AACxC,WAAK,KAAL,CAAW,GAAX,IAAkB,MAAM,GAAN,CAAlB;AACD,KAFD,EAEG,IAFH;AAGD;AACF,CARD;;AAUA;;;AAGA,QAAQ,SAAR,CAAkB,OAAlB,GAA4B,UAAU,IAAV,EAAgB,KAAhB,EAAuB;AACjD,MAAI,CAAC,KAAL,EAAY;AACV,WAAO,KAAK,KAAL,CAAW,IAAX,CAAP;AACD;;AAED,MAAI,aAAa,KAAK,QAAL,EAAjB;;AAEA,MAAI,CAAC,WAAW,KAAX,CAAL,EAAwB;AACtB,WAAO,IAAP;AACD;;AAED,SAAO,KAAK,KAAL,CAAW,CAAC,WAAW,KAAX,CAAD,EAAoB,IAApB,EAA0B,IAA1B,CAA+B,GAA/B,CAAX,CAAP;AACD,CAZD;;AAcA;;;AAGA,QAAQ,SAAR,CAAkB,QAAlB,GAA6B,UAAU,IAAV,EAAgB,KAAhB,EAAuB;AAClD,SAAO,KAAK,WAAL,CAAiB,IAAjB,EAAuB,KAAvB,EAA8B,CAA9B,CAAP;AACD,CAFD;;AAIA;;;AAGA,QAAQ,SAAR,CAAkB,WAAlB,GAAgC,UAAU,IAAV,EAAgB,KAAhB,EAAuB;AACrD,MAAI,SAAS,EAAb;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,QAAL,CAAc,MAAlC,EAA0C,GAA1C,EAA+C;AAC7C,QAAI,QAAQ,KAAK,QAAL,CAAc,CAAd,CAAZ;AACA,QAAI,MAAM,OAAN,IACD,MAAM,OAAN,OAAoB,IADnB,KAED,CAAC,KAAD,IAAW,MAAM,KAAN,OAAkB,KAF5B,CAAJ,EAEyC;AACvC,aAAO,IAAP,CAAY,KAAZ;AACD;AACF;AACD,SAAO,MAAP;AACD,CAXD;;AAaA;;;AAGA,QAAQ,SAAR,CAAkB,cAAlB,GAAmC,UAAU,IAAV,EAAgB,GAAhB,EAAqB,KAArB,EAA4B,SAA5B,EAAuC;AACxE,SAAO,KAAK,iBAAL,CAAuB,IAAvB,EAA6B,GAA7B,EAAkC,KAAlC,EAAyC,SAAzC,EAAoD,CAApD,CAAP;AACD,CAFD;;AAIA;;;AAGA,QAAQ,SAAR,CAAkB,iBAAlB,GAAsC,UAAU,IAAV,EAAgB,GAAhB,EAAqB,KAArB,EAA4B,SAA5B,EAAuC;AAC3E,MAAI,SAAS,EAAb;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,QAAL,CAAc,MAAlC,EAA0C,GAA1C,EAA+C;AAC7C,QAAI,QAAQ,KAAK,QAAL,CAAc,CAAd,CAAZ;AACA,QAAI,MAAM,KAAN,IACD,MAAM,KAAN,CAAY,IAAZ,MAAsB,GADrB,KAED,CAAC,KAAD,IAAW,MAAM,KAAN,OAAkB,KAF5B,CAAJ,EAEyC;AACvC,aAAO,IAAP,CAAY,KAAZ;AACD;AACD,QAAI,aAAa,MAAM,iBAAvB,EAA0C;AACxC,aAAO,IAAP,CAAY,MAAM,iBAAN,CAAwB,IAAxB,EAA8B,GAA9B,EAAmC,KAAnC,EAA0C,IAA1C,CAAZ;AACD;AACF;AACD,MAAI,SAAJ,EAAe;AACb,aAAS,GAAG,MAAH,CAAU,KAAV,CAAgB,EAAhB,EAAoB,MAApB,CAAT;AACD;AACD,SAAO,MAAP;AACD,CAjBD;;AAmBA,QAAQ,SAAR,CAAkB,mBAAlB,GAAwC,UAAU,MAAV,EAAkB,SAAlB,EAA6B;AACnE,MAAI,SAAS,EAAb;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,QAAL,CAAc,MAAlC,EAA0C,GAA1C,EAA+C;AAC7C,QAAI,QAAQ,KAAK,QAAL,CAAc,CAAd,CAAZ;AACA,QAAI,OAAO,KAAP,CAAJ,EAAmB;AACjB,aAAO,IAAP,CAAY,KAAZ;AACD;AACD,QAAI,aAAa,MAAM,mBAAvB,EAA4C;AAC1C,aAAO,IAAP,CAAY,MAAM,mBAAN,CAA0B,MAA1B,EAAkC,IAAlC,CAAZ;AACD;AACF;AACD,MAAI,SAAJ,EAAe;AACb,aAAS,GAAG,MAAH,CAAU,KAAV,CAAgB,EAAhB,EAAoB,MAApB,CAAT;AACD;AACD,SAAO,MAAP;AACD,CAfD;;AAiBA,QAAQ,SAAR,CAAkB,OAAlB,GAA4B,YAAY;AACtC,MAAI,OAAO,EAAX;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,QAAL,CAAc,MAAlC,EAA0C,GAA1C,EAA+C;AAC7C,QAAI,QAAQ,KAAK,QAAL,CAAc,CAAd,CAAZ;AACA,QAAK,OAAO,KAAP,KAAiB,QAAlB,IAAgC,OAAO,KAAP,KAAiB,QAArD,EAAgE;AAC9D,cAAQ,KAAR;AACD;AACF;AACD,SAAO,IAAP;AACD,CATD;;AAWA,QAAQ,SAAR,CAAkB,YAAlB,GAAiC,UAAU,IAAV,EAAgB,KAAhB,EAAuB;AACtD,MAAI,QAAQ,KAAK,QAAL,CAAc,IAAd,EAAoB,KAApB,CAAZ;AACA,SAAO,QAAQ,MAAM,OAAN,EAAR,GAA0B,IAAjC;AACD,CAHD;;AAKA;;;;;AAKA,QAAQ,SAAR,CAAkB,gBAAlB,GAAqC,YAAY;AAC/C,SAAO,KAAK,mBAAL,CAAyB,UAAU,KAAV,EAAiB;AAC/C,WAAO,iBAAiB,OAAxB;AACD,GAFM,CAAP;AAGD,CAJD;;AAMA;;AAEA;AACA,QAAQ,SAAR,CAAkB,IAAlB,GAAyB,YAAY;AACnC,MAAI,KAAK,MAAT,EAAiB;AACf,WAAO,KAAK,MAAL,CAAY,IAAZ,EAAP;AACD;AACD,SAAO,IAAP;AACD,CALD;AAMA,QAAQ,SAAR,CAAkB,IAAlB,GAAyB,QAAQ,SAAR,CAAkB,IAA3C;;AAEA;AACA,QAAQ,SAAR,CAAkB,EAAlB,GAAuB,YAAY;AACjC,MAAI,KAAK,MAAT,EAAiB;AACf,WAAO,KAAK,MAAZ;AACD;AACD,SAAO,IAAP;AACD,CALD;;AAOA;AACA,QAAQ,SAAR,CAAkB,CAAlB,GAAsB,UAAU,IAAV,EAAgB,KAAhB,EAAuB;AAC3C,SAAO,KAAK,KAAL,CAAW,IAAI,OAAJ,CAAY,IAAZ,EAAkB,KAAlB,CAAX,CAAP;AACD,CAFD;;AAIA,QAAQ,SAAR,CAAkB,KAAlB,GAA0B,UAAU,KAAV,EAAiB;AACzC,OAAK,QAAL,CAAc,IAAd,CAAmB,KAAnB;AACA,MAAI,QAAO,KAAP,yCAAO,KAAP,OAAiB,QAArB,EAA+B;AAC7B,UAAM,MAAN,GAAe,IAAf;AACD;AACD,SAAO,KAAP;AACD,CAND;;AAQA;AACA,QAAQ,SAAR,CAAkB,CAAlB,GAAsB,UAAU,IAAV,EAAgB;AACpC,OAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB;AACA,SAAO,IAAP;AACD,CAHD;;AAKA;;AAEA;;;;;AAKA,QAAQ,SAAR,CAAkB,MAAlB,GAA2B,UAAU,EAAV,EAAc,KAAd,EAAqB;AAC9C,MAAI,MAAJ;AACA,MAAI,OAAO,EAAP,KAAc,QAAlB,EAA4B;AAC1B;AACA,aAAS,gBAAU,KAAV,EAAiB;AACxB,aAAO,EAAE,MAAM,EAAN,IACT,MAAM,EAAN,CAAS,EAAT,EAAa,KAAb,CADO,CAAP;AAED,KAHD;AAID,GAND,MAMO;AACL;AACA,aAAS,gBAAU,KAAV,EAAiB;AACxB,aAAO,UAAU,EAAjB;AACD,KAFD;AAGD;;AAED,OAAK,QAAL,GAAgB,KAAK,QAAL,CAAc,MAAd,CAAqB,MAArB,CAAhB;;AAEA,SAAO,IAAP;AACD,CAlBD;;AAoBA,QAAQ,SAAR,CAAkB,KAAlB,GAA0B,YAAY;AACpC,SAAO,MAAM,IAAN,CAAP;AACD,CAFD;;AAIA,QAAQ,SAAR,CAAkB,IAAlB,GAAyB,UAAU,GAAV,EAAe;AACtC,MAAI,OAAO,KAAK,QAAL,CAAc,MAAd,KAAyB,CAApC,EAAuC;AACrC,SAAK,QAAL,CAAc,CAAd,IAAmB,GAAnB;AACA,WAAO,IAAP;AACD;AACD,SAAO,KAAK,OAAL,EAAP;AACD,CAND;;AAQA,QAAQ,SAAR,CAAkB,IAAlB,GAAyB,UAAU,IAAV,EAAgB,GAAhB,EAAqB;AAC5C,MAAI,OAAO,GAAP,KAAe,WAAf,IAA8B,QAAQ,IAA1C,EAAgD;AAC9C,QAAI,CAAC,KAAK,KAAV,EAAiB;AACf,WAAK,KAAL,GAAa,EAAb;AACD;AACD,SAAK,KAAL,CAAW,IAAX,IAAmB,GAAnB;AACA,WAAO,IAAP;AACD;AACD,SAAO,KAAK,KAAL,CAAW,IAAX,CAAP;AACD,CATD;;AAWA;;AAEA,QAAQ,SAAR,CAAkB,QAAlB,GAA6B,YAAY;AACvC,MAAI,IAAI,EAAR;AACA,OAAK,KAAL,CAAW,UAAU,CAAV,EAAa;AACtB,SAAK,CAAL;AACD,GAFD;AAGA,SAAO,CAAP;AACD,CAND;;AAQA,QAAQ,SAAR,CAAkB,MAAlB,GAA2B,YAAY;AACrC,SAAO;AACL,UAAM,KAAK,IADN;AAEL,WAAO,KAAK,KAFP;AAGL,cAAU,KAAK,QAAL,CAAc,GAAd,CAAkB,UAAU,KAAV,EAAiB;AAC3C,aAAO,SAAS,MAAM,MAAf,GAAwB,MAAM,MAAN,EAAxB,GAAyC,KAAhD;AACD,KAFS;AAHL,GAAP;AAOD,CARD;;AAUA,QAAQ,SAAR,CAAkB,YAAlB,GAAiC,UAAU,MAAV,EAAkB;AACjD,SAAO,GAAP;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,QAAL,CAAc,MAAlC,EAA0C,GAA1C,EAA+C;AAC7C,QAAI,QAAQ,KAAK,QAAL,CAAc,CAAd,CAAZ;AACA;AACA,QAAI,SAAU,UAAU,CAAxB,EAA4B;AAC1B,UAAI,MAAM,KAAV,EAAiB;AACf,cAAM,KAAN,CAAY,MAAZ;AACD,OAFD,MAEO,IAAI,OAAO,KAAP,KAAiB,QAArB,EAA+B;AACpC,eAAO,cAAc,KAAd,CAAP;AACD,OAFM,MAEA,IAAI,MAAM,QAAV,EAAoB;AACzB,eAAO,cAAc,MAAM,QAAN,CAAe,EAAf,CAAd,CAAP;AACD;AACF;AACF;AACD,SAAO,IAAP;AACA,SAAO,KAAK,IAAZ;AACA,SAAO,GAAP;AACD,CAlBD;;AAoBA,QAAQ,SAAR,CAAkB,KAAlB,GAA0B,UAAU,MAAV,EAAkB;AAC1C,SAAO,GAAP;AACA,SAAO,KAAK,IAAZ;AACA,OAAK,IAAI,CAAT,IAAc,KAAK,KAAnB,EAA0B;AACxB,QAAI,IAAI,KAAK,KAAL,CAAW,CAAX,CAAR;AACA,QAAI,KAAK,IAAT,EAAe;AAAE;AACf,aAAO,GAAP;AACA,aAAO,CAAP;AACA,aAAO,IAAP;AACA,UAAI,OAAO,CAAP,KAAa,QAAjB,EAA2B;AACzB,YAAI,EAAE,QAAF,EAAJ;AACD;AACD,aAAO,UAAU,CAAV,CAAP;AACA,aAAO,GAAP;AACD;AACF;AACD,MAAI,KAAK,QAAL,CAAc,MAAd,KAAyB,CAA7B,EAAgC;AAC9B,WAAO,IAAP;AACD,GAFD,MAEO;AACL,SAAK,YAAL,CAAkB,MAAlB;AACD;AACF,CArBD;;AAuBA,QAAQ,SAAR,CAAkB,UAAlB,GAA+B,UAAU,EAAV,EAAc;AAC3C,SAAO,UAAU,IAAV,EAAgB,EAAhB,CAAP;AACD,CAFD;;AAIA,QAAQ,SAAR,CAAkB,WAAlB,GAAgC,UAAU,EAAV,EAAc;AAC5C,SAAO,WAAW,IAAX,EAAiB,EAAjB,CAAP;AACD,CAFD;;AAIA,QAAQ,SAAR,CAAkB,cAAlB,GAAmC,UAAU,EAAV,EAAc;AAC/C,SAAO,cAAc,IAAd,EAAoB,EAApB,CAAP;AACD,CAFD;;AAIA,QAAQ,SAAR,CAAkB,MAAlB,GAA2B,UAAU,EAAV,EAAc;AACvC,SAAO,MAAM,IAAN,EAAY,EAAZ,CAAP;AACD,CAFD;;AAIA,OAAO,OAAP,GAAiB,OAAjB;;;ACrYA;;AAEA,OAAO,OAAP,GAAiB,SAAS,KAAT,CAAgB,EAAhB,EAAoB;AACnC,MAAI,QAAQ,IAAI,GAAG,WAAP,CAAmB,GAAG,IAAtB,EAA4B,GAAG,KAA/B,CAAZ;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,GAAG,QAAH,CAAY,MAAhC,EAAwC,GAAxC,EAA6C;AAC3C,QAAI,QAAQ,GAAG,QAAH,CAAY,CAAZ,CAAZ;AACA,UAAM,KAAN,CAAY,MAAM,KAAN,GAAc,MAAM,KAAN,EAAd,GAA8B,KAA1C;AACD;AACD,SAAO,KAAP;AACD,CAPD;;;ACFA;;AAEA,SAAS,SAAT,CAAoB,CAApB,EAAuB,CAAvB,EAA0B;AACxB,SAAO,EAAE,IAAF,KAAW,EAAE,IAApB;AACD;;AAED,SAAS,UAAT,CAAqB,CAArB,EAAwB,CAAxB,EAA2B;AACzB,MAAI,QAAQ,EAAE,KAAd;AACA,MAAI,OAAO,OAAO,IAAP,CAAY,KAAZ,CAAX;AACA,MAAI,SAAS,KAAK,MAAlB;AACA,MAAI,WAAW,OAAO,IAAP,CAAY,EAAE,KAAd,EAAqB,MAApC,EAA4C,OAAO,KAAP;AAC5C,OAAK,IAAI,IAAI,CAAR,EAAW,IAAI,MAApB,EAA4B,IAAI,CAAhC,EAAmC,GAAnC,EAAwC;AACtC,QAAI,MAAM,KAAK,CAAL,CAAV;AACA,QAAI,QAAQ,MAAM,GAAN,CAAZ;AACA,QAAI,SAAS,IAAT,IAAiB,EAAE,KAAF,CAAQ,GAAR,KAAgB,IAArC,EAA2C;AAAE;AAC3C,UAAI,UAAU,EAAE,KAAF,CAAQ,GAAR,CAAd,EAA4B,OAAO,KAAP;AAC7B,KAFD,MAEO,IAAI,MAAM,QAAN,OAAqB,EAAE,KAAF,CAAQ,GAAR,EAAa,QAAb,EAAzB,EAAkD;AACvD,aAAO,KAAP;AACD;AACF;AACD,SAAO,IAAP;AACD;;AAED,SAAS,aAAT,CAAwB,CAAxB,EAA2B,CAA3B,EAA8B;AAC5B,MAAI,WAAW,EAAE,QAAjB;AACA,MAAI,SAAS,SAAS,MAAtB;AACA,MAAI,WAAW,EAAE,QAAF,CAAW,MAA1B,EAAkC,OAAO,KAAP;AAClC,OAAK,IAAI,IAAI,CAAR,EAAW,IAAI,MAApB,EAA4B,IAAI,CAAhC,EAAmC,GAAnC,EAAwC;AACtC,QAAI,QAAQ,SAAS,CAAT,CAAZ;AACA,QAAI,OAAO,KAAP,KAAiB,QAArB,EAA+B;AAC7B,UAAI,UAAU,EAAE,QAAF,CAAW,CAAX,CAAd,EAA6B,OAAO,KAAP;AAC9B,KAFD,MAEO;AACL,UAAI,CAAC,MAAM,MAAN,CAAa,EAAE,QAAF,CAAW,CAAX,CAAb,CAAL,EAAkC,OAAO,KAAP;AACnC;AACF;AACD,SAAO,IAAP;AACD;;AAED,SAAS,KAAT,CAAgB,CAAhB,EAAmB,CAAnB,EAAsB;AACpB,MAAI,CAAC,UAAU,CAAV,EAAa,CAAb,CAAL,EAAsB,OAAO,KAAP;AACtB,MAAI,CAAC,WAAW,CAAX,EAAc,CAAd,CAAL,EAAuB,OAAO,KAAP;AACvB,MAAI,CAAC,cAAc,CAAd,EAAiB,CAAjB,CAAL,EAA0B,OAAO,KAAP;AAC1B,SAAO,IAAP;AACD;;AAED,OAAO,OAAP,CAAe,IAAf,GAAsB,SAAtB;AACA,OAAO,OAAP,CAAe,KAAf,GAAuB,UAAvB;AACA,OAAO,OAAP,CAAe,QAAf,GAA0B,aAA1B;AACA,OAAO,OAAP,CAAe,KAAf,GAAuB,KAAvB;;;AChDA;;AAEA,IAAI,iBAAiB;AACnB,OAAK,OADc;AAEnB,OAAK,MAFc;AAGnB,OAAK,MAHc;AAInB,OAAK,QAJc;AAKnB,QAAM;AALa,CAArB;;AAQA,SAAS,gBAAT,CAA2B,KAA3B,EAAkC;AAChC,SAAO,eAAe,KAAf,CAAP;AACD;;AAED,IAAI,mBAAmB;AACrB,WAAS,GADY;AAErB,WAAS,GAFY;AAGrB,UAAQ,GAHa;AAIrB,WAAS,GAJY;AAKrB,UAAQ,GALa;AAMrB,WAAS,GANY;AAOrB,YAAU,GAPW;AAQrB,WAAS,GARY;AASrB,YAAU,GATW;AAUrB,WAAS;AAVY,CAAvB;;AAaA,SAAS,kBAAT,CAA6B,KAA7B,EAAoC;AAClC,SAAO,iBAAiB,KAAjB,CAAP;AACD;;AAED,QAAQ,SAAR,GAAoB,SAAS,SAAT,CAAoB,CAApB,EAAuB;AACzC,SAAO,EAAE,OAAF,CAAU,YAAV,EAAwB,gBAAxB,CAAP;AACD,CAFD;;AAIA,QAAQ,WAAR,GAAsB,SAAS,WAAT,CAAsB,CAAtB,EAAyB;AAC7C,SAAO,EAAE,OAAF,CAAU,8CAAV,EAA0D,kBAA1D,CAAP;AACD,CAFD;;AAIA,QAAQ,aAAR,GAAwB,SAAS,aAAT,CAAwB,CAAxB,EAA2B;AACjD,SAAO,EAAE,OAAF,CAAU,QAAV,EAAoB,gBAApB,CAAP;AACD,CAFD;;AAIA,QAAQ,eAAR,GAA0B,SAAS,eAAT,CAA0B,CAA1B,EAA6B;AACrD,SAAO,EAAE,OAAF,CAAU,4BAAV,EAAwC,kBAAxC,CAAP;AACD,CAFD;;;AC3CA;;AAEA,IAAI,WAAW,QAAQ,UAAR,CAAf;AACA,IAAI,eAAe,QAAQ,QAAR,EAAkB,YAArC;AACA,IAAI,cAAc,QAAQ,WAAR,EAAqB,WAAvC;;AAEA,IAAI,aAAa,CAAjB;AACA,IAAI,uBAAuB,CAA3B;AACA,IAAI,2BAA2B,CAA/B;AACA,IAAI,iBAAiB,CAArB;AACA,IAAI,YAAY,CAAhB;AACA,IAAI,kBAAkB,CAAtB;AACA,IAAI,gBAAgB,CAApB;AACA,IAAI,kBAAkB,CAAtB;AACA,IAAI,mBAAmB,CAAvB;AACA,IAAI,cAAc,CAAlB;;AAEA,IAAI,SAAS,OAAO,OAAP,GAAiB,SAAS,MAAT,GAAmB;AAC/C,eAAa,IAAb,CAAkB,IAAlB;;AAEA,MAAI,QAAQ,UAAZ;AACA,MAAI,SAAJ;AACA,MAAI,OAAJ;AACA,MAAI,KAAJ;AACA,MAAI,MAAJ;AACA,MAAI,WAAJ;AACA,MAAI,SAAJ;AACA,MAAI,cAAc,CAAlB;AACA,MAAI,QAAJ;;AAEA,OAAK,iBAAL,GAAyB,UAAU,MAAV,EAAkB,OAAlB,EAA2B,KAA3B,EAAkC;AACzD,QAAI,CAAC,MAAL,EAAa;AACX,WAAK,IAAL,CAAU,cAAV,EAA0B,OAA1B,EAAmC,KAAnC;AACA,UAAI,WAAJ,EAAiB;AACf,aAAK,IAAL,CAAU,YAAV,EAAwB,OAAxB;AACD;AACF,KALD,MAKO;AACL,WAAK,IAAL,CAAU,YAAV,EAAwB,OAAxB;AACD;AACF,GATD;;AAWA,OAAK,KAAL,GAAa,UAAU,IAAV,EAAgB;AAC3B,QAAI,OAAO,IAAP,KAAgB,QAApB,EAA8B;AAC5B,aAAO,KAAK,QAAL,EAAP;AACD;AACD,QAAI,MAAM,CAAV;;AAEA;AACA,QAAI,SAAJ,EAAe;AACb,aAAO,YAAY,IAAnB;AACA,aAAO,UAAU,MAAjB;AACA,kBAAY,IAAZ;AACD;;AAED,aAAS,YAAT,GAAyB;AACvB,UAAI,OAAO,WAAP,KAAuB,QAA3B,EAAqC;AACnC,YAAI,WAAW,KAAK,KAAL,CAAW,WAAX,EAAwB,GAAxB,CAAf;AACA,sBAAc,SAAd;AACA,eAAO,QAAP;AACD;AACF;;AAED,WAAO,MAAM,KAAK,MAAlB,EAA0B,KAA1B,EAAiC;AAC/B,UAAI,IAAI,KAAK,UAAL,CAAgB,GAAhB,CAAR;AACA,cAAQ,KAAR;AACE,aAAK,UAAL;AACE,cAAI,MAAM,EAAV,CAAa,OAAb,EAAsB;AACpB,kBAAI,OAAO,cAAX;AACA,kBAAI,IAAJ,EAAU;AACR,qBAAK,IAAL,CAAU,MAAV,EAAkB,YAAY,IAAZ,CAAlB;AACD;AACD,sBAAQ,cAAR;AACA,4BAAc,MAAM,CAApB;AACA,sBAAQ,EAAR;AACD;AACD;AACF,aAAK,WAAL;AACE,cAAI,MAAM,EAAN,CAAS,OAAT,IAAoB,KAAK,MAAL,CAAY,MAAM,CAAlB,EAAqB,CAArB,MAA4B,IAApD,EAA0D;AACxD,gBAAI,QAAQ,cAAZ;AACA,gBAAI,KAAJ,EAAW;AACT,mBAAK,IAAL,CAAU,MAAV,EAAkB,KAAlB;AACD;AACD,oBAAQ,oBAAR;AACD;AACD;AACF,aAAK,cAAL;AACE,cAAI,MAAM,EAAN,CAAS,OAAT,IAAoB,gBAAgB,GAAxC,EAA6C;AAC3C,0BAAc,MAAM,CAApB;AACA,qBAAS,IAAT;AACD,WAHD,MAGO,IAAI,MAAM,EAAV,CAAa,OAAb,EAAsB;AAC3B,kBAAI,KAAK,MAAL,CAAY,MAAM,CAAlB,EAAqB,CAArB,MAA4B,SAAhC,EAA2C;AACzC,8BAAc,MAAM,CAApB;AACA,wBAAQ,WAAR;AACD,eAHD,MAGO;AACL,8BAAc,SAAd;AACA,wBAAQ,oBAAR;AACD;AACF,aARM,MAQA,IAAI,MAAM,EAAV,CAAa,OAAb,EAAsB;AAC3B,4BAAc,SAAd;AACA,sBAAQ,wBAAR;AACD,aAHM,MAGA,IAAI,KAAK,EAAL,IAAW,MAAM,EAAjB,CAAoB,OAApB,IAA+B,MAAM,EAAzC,CAA4C,OAA5C,EAAqD;AAC1D,wBAAU,cAAV;AACA;AACA,sBAAQ,SAAR;AACD;AACD;AACF,aAAK,oBAAL;AACE,cAAI,MAAM,EAAV,CAAa,OAAb,EAAsB;AACpB,kBAAI,YAAY,KAAK,UAAL,CAAgB,MAAM,CAAtB,CAAhB;AACA,kBAAI,aAAa,KAAK,UAAL,CAAgB,MAAM,CAAtB,CAAjB;AACA,kBAAK,cAAc,EAAd,CAAiB,OAAjB,IAA4B,eAAe,EAA5C,CAA+C,OAA/C,IACC,cAAc,EAAd,CAAiB,OAAjB,IAA4B,eAAe,EAD5C,CAC+C,OADnD,EAC6D;AAC3D,wBAAQ,UAAR;AACD;AACF;AACD;AACF,aAAK,wBAAL;AACE,cAAI,MAAM,EAAV,CAAa,OAAb,EAAsB;AACpB,kBAAI,OAAO,KAAK,UAAL,CAAgB,MAAM,CAAtB,CAAX;AACA,kBAAI,SAAS,EAAb,CAAgB,OAAhB,EAAyB;AACvB,0BAAQ,UAAR;AACD;AACF;AACD;AACF,aAAK,SAAL;AACE,cAAI,MAAM,EAAV,CAAa,OAAb,EAAsB;AACpB,mBAAK,iBAAL,CAAuB,MAAvB,EAA+B,OAA/B,EAAwC,KAAxC;AACA,wBAAU,SAAV;AACA,sBAAQ,SAAR;AACA,uBAAS,SAAT;AACA,4BAAc,SAAd;AACA,sBAAQ,UAAR;AACA,4BAAc,MAAM,CAApB;AACD,aARD,MAQO,IAAI,MAAM,EAAV,CAAa,OAAb,EAAsB;AAC3B,4BAAc,IAAd;AACD,aAFM,MAEA,IAAI,IAAI,EAAR,EAAY;AACjB,0BAAc,GAAd;AACA,oBAAQ,eAAR;AACD;AACD;AACF,aAAK,eAAL;AACE,cAAI,KAAK,EAAL,IAAW,MAAM,EAArB,CAAwB,OAAxB,EAAiC;AAC/B,yBAAW,cAAX;AACA;AACA,sBAAQ,aAAR;AACD;AACD;AACF,aAAK,aAAL;AACE,cAAI,MAAM,EAAV,CAAa,OAAb,EAAsB;AACpB,sBAAQ,eAAR;AACD;AACD;AACF,aAAK,eAAL;AACE,cAAI,MAAM,EAAN,CAAS,OAAT,IAAoB,MAAM,EAA9B,CAAiC,OAAjC,EAA0C;AACxC,0BAAY,CAAZ;AACA,sBAAQ,gBAAR;AACA,4BAAc,MAAM,CAApB;AACD;AACD;AACF,aAAK,gBAAL;AACE,cAAI,MAAM,SAAV,EAAqB;AACnB,gBAAI,QAAQ,YAAY,cAAZ,CAAZ;AACA,kBAAM,QAAN,IAAkB,KAAlB;AACA,uBAAW,SAAX;AACA,oBAAQ,SAAR;AACD;AACD;AAtGJ;AAwGD;;AAED,QAAI,OAAO,WAAP,KAAuB,QAAvB,IACF,eAAe,KAAK,MADtB,EAC8B;AAC5B,kBAAY,KAAK,KAAL,CAAW,WAAX,CAAZ;AACA,oBAAc,CAAd;AACD;AACF,GAtID;AAuIA;;;;;;;AAOD,CAtKD;AAuKA,SAAS,MAAT,EAAiB,YAAjB;;AAEA,OAAO,SAAP,CAAiB,GAAjB,GAAuB,UAAU,IAAV,EAAgB;AACrC,MAAI,IAAJ,EAAU;AACR,SAAK,KAAL,CAAW,IAAX;AACD;;AAED;AACA,OAAK,KAAL,GAAa,YAAY,CAAE,CAA3B;AACD,CAPD;;;;;;;AC1LC,WAAS,IAAT,EAAe,OAAf,EAAwB;AACvB,MAAI,QAAO,OAAP,yCAAO,OAAP,OAAmB,QAAvB,EAAiC;AAC/B;AACA,YAAQ,OAAR,EAAiB,MAAjB;AACD,GAHD,MAGO,IAAI,OAAO,MAAP,KAAkB,UAAlB,IAAgC,OAAO,GAA3C,EAAgD;AACrD;AACA,WAAO,CAAC,SAAD,EAAY,QAAZ,CAAP,EAA8B,OAA9B;AACD;AACF,CARA,aAQO,UAAS,OAAT,EAAkB,MAAlB,EAA0B;;AAEhC;;;;;;;;;;;;;AAaA,WAAS,SAAT,GAAqB,CACpB;;AAED,YAAU,SAAV,CAAoB,IAApB,GAA2B,WAA3B;AACA,YAAU,SAAV,CAAoB,WAApB,GAAkC,IAAlC;;AAEA;;;;;;;;;AASA,YAAU,SAAV,CAAoB,QAApB,GAA+B,UAAS,IAAT,EAAe;AAC5C,WAAO,KAAK,KAAL,IAAc,EAArB;AACD,GAFD;;AAIA;;;;;;AAMA,YAAU,SAAV,CAAoB,SAApB,GAAgC,UAAS,IAAT,EAAe,CAC9C,CADD;;AAGA,YAAU,OAAO,OAAP,GAAiB,SAA3B;AAED,CArDA,CAAD;;;;;;;ACAC,WAAS,IAAT,EAAe,OAAf,EAAwB;AACvB,MAAI,QAAO,OAAP,yCAAO,OAAP,OAAmB,QAAvB,EAAiC;AAC/B;AACA,YAAQ,OAAR,EACQ,MADR,EAEQ,QAAQ,iBAAR,CAFR;AAGD,GALD,MAKO,IAAI,OAAO,MAAP,KAAkB,UAAlB,IAAgC,OAAO,GAA3C,EAAgD;AACrD;AACA,WAAO,CAAC,SAAD,EACC,QADD,EAEC,iBAFD,CAAP,EAE4B,OAF5B;AAGD;AACF,CAZA,aAYO,UAAS,OAAT,EAAkB,MAAlB,EAA0B,SAA1B,EAAqC;;AAE3C,YAAU,OAAO,OAAP,GAAiB,SAA3B;AACA,UAAQ,SAAR,GAAoB,SAApB;AAED,CAjBA,CAAD;;;;;;;ACAC,WAAS,IAAT,EAAe,OAAf,EAAwB;AACvB,MAAI,QAAO,OAAP,yCAAO,OAAP,OAAmB,QAAvB,EAAiC;AAC/B;AACA,YAAQ,OAAR,EAAiB,MAAjB;AACD,GAHD,MAGO,IAAI,OAAO,MAAP,KAAkB,UAAlB,IAAgC,OAAO,GAA3C,EAAgD;AACrD;AACA,WAAO,CAAC,SAAD,EAAY,QAAZ,CAAP,EAA8B,OAA9B;AACD;AACF,CARA,aAQO,UAAS,OAAT,EAAkB,MAAlB,EAA0B;;AAEhC;;;;;;;;;;;;;;AAcA,WAAS,SAAT,GAAqB,CACpB;;AAED,YAAU,SAAV,CAAoB,IAApB,GAA2B,OAA3B;AACA,YAAU,SAAV,CAAoB,WAApB,GAAkC,IAAlC;;AAEA;;;;;;;;;;;AAWA,YAAU,SAAV,CAAoB,QAApB,GAA+B,UAAS,IAAT,EAAe;AAC5C,QAAI,MAAM,EAAV;AACA,WAAO,KAAK,OAAL,IAAgB,EAAvB;AACA,WAAO,IAAP;AACA,WAAO,KAAK,QAAZ;AACA,WAAO,IAAP;AACA,WAAO,KAAK,QAAZ;AACA,WAAO,GAAP;AACD,GARD;;AAUA;;;;;;;AAOA,YAAU,SAAV,CAAoB,SAApB,GAAgC,UAAS,IAAT,EAAe;AAC7C,WAAO,IAAP;AACD,GAFD;;AAIA,YAAU,OAAO,OAAP,GAAiB,SAA3B;AAED,CAhEA,CAAD;;;;;;;;;ACAC,WAAS,IAAT,EAAe,OAAf,EAAwB;AACvB,MAAI,QAAO,OAAP,yCAAO,OAAP,OAAmB,QAAvB,EAAiC;AAC/B;AACA,YAAQ,OAAR,EAAiB,MAAjB;AACD,GAHD,MAGO,IAAI,OAAO,MAAP,KAAkB,UAAlB,IAAgC,OAAO,GAA3C,EAAgD;AACrD;AACA,WAAO,CAAC,SAAD,EAAY,QAAZ,CAAP,EAA8B,OAA9B;AACD;AACF,CARA,aAQO,UAAS,OAAT,EAAkB,MAAlB,EAA0B;;AAEhC;;;;;AAKA,WAAS,OAAT,GAAmB;AACjB,SAAK,MAAL,GAAc,EAAd;AACD;;AAED;;;;;;;;;;;;;;;AAeA,UAAQ,SAAR,CAAkB,GAAlB,GAAwB,UAAS,IAAT,EAAe,IAAf,EAAqB;AAC3C,QAAI,CAAC,IAAL,EAAW;AACT,aAAO,IAAP;AACA,aAAO,KAAK,SAAL,CAAe,IAAtB;AACD;AACD,SAAK,MAAL,CAAY,IAAZ,CAAiB,EAAE,MAAM,IAAR,EAAc,MAAM,IAApB,EAAjB;AACA,WAAO,IAAP;AACD,GAPD;;AASA;;;;;;;;;;;;;AAaA,UAAQ,SAAR,CAAkB,MAAlB,GAA2B,UAAS,KAAT,EAAgB;AACzC,SAAK,IAAI,IAAI,CAAR,EAAW,MAAM,KAAK,MAAL,CAAY,MAAlC,EAA0C,IAAI,GAA9C,EAAmD,GAAnD,EAAwD;AACtD,WAAK,IAAI,IAAI,CAAR,EAAW,OAAO,MAAM,MAA7B,EAAqC,IAAI,IAAzC,EAA+C,GAA/C,EAAoD;AAClD,YAAI,QAAQ,KAAK,MAAL,CAAY,CAAZ,CAAZ;AACA,YAAI,MAAM,IAAN,IAAc,MAAM,CAAN,CAAlB,EAA4B;AAC1B,iBAAO,IAAI,MAAM,IAAV,EAAP;AACD;AACF;AACF;AACD,WAAO,IAAP;AACD,GAVD;;AAYA,YAAU,OAAO,OAAP,GAAiB,OAA3B;AAED,CAtEA,CAAD;;;;;;;ACAC,WAAS,IAAT,EAAe,OAAf,EAAwB;AACvB,MAAI,QAAO,OAAP,yCAAO,OAAP,OAAmB,QAAvB,EAAiC;AAC/B;AACA,YAAQ,OAAR,EACQ,MADR,EAEQ,QAAQ,eAAR,CAFR;AAGD,GALD,MAKO,IAAI,OAAO,MAAP,KAAkB,UAAlB,IAAgC,OAAO,GAA3C,EAAgD;AACrD;AACA,WAAO,CAAC,SAAD,EACC,QADD,EAEC,eAFD,CAAP,EAE0B,OAF1B;AAGD;AACF,CAZA,aAYO,UAAS,OAAT,EAAkB,MAAlB,EAA0B,OAA1B,EAAmC;;AAEzC,YAAU,OAAO,OAAP,GAAiB,OAA3B;AACA,UAAQ,OAAR,GAAkB,OAAlB;AAED,CAjBA,CAAD;;;ACAA;;AAEA,IAAM,SAAS,QAAQ,cAAR,CAAf;AACA,IAAM,MAAM,QAAQ,WAAR,CAAZ;AACA,IAAM,MAAM,QAAQ,WAAR,CAAZ;;AAEA,OAAO,OAAP,CAAe,MAAf,GAAwB,MAAxB;AACA,OAAO,OAAP,CAAe,GAAf,GAAqB,GAArB;AACA,OAAO,OAAP,CAAe,GAAf,GAAqB,GAArB;;;ACRA;;;;;;;;;;;;AAEA,IAAM,aAAa,QAAQ,kBAAR,CAAnB;;IAEM,M;;;AACJ,kBAAY,OAAZ,EAAqB;AAAA;;AAAA,gHACb,OADa;;AAEnB,UAAK,UAAL,GAAkB,EAAlB;AAFmB;AAGpB;;;;yBAEI,O,EAAkB;AAAA;;AACrB,UACE,CAAC,QAAQ,KAAR,CAAc,KAAf,KACC,QAAQ,EAAR,CAAW,IAAX,KAAoB,QAAQ,EAAR,CAAW,SAAX,CAApB,IAA6C,QAAQ,EAAR,CAAW,UAAX,CAD9C,CADF,EAGE;AACA,gBAAQ,KAAR,CAAc,KAAd,GAAsB,eAAtB,CADA,CACsC;AACvC;;AANoB,wCAAN,IAAM;AAAN,YAAM;AAAA;;AAOrB,0IAAkB,OAAlB,SAA8B,IAA9B;AACD;;;4BAEO,G,EAAK;AACX,UAAM,YAAY,KAAK,UAAL,CAAgB,IAAhB,CAAqB,qBAAa;AAClD,YAAI;AACF,iBAAO,UAAU,SAAV,CAAoB,gBAApB,CAAqC,GAArC,MAA8C,SAArD;AACD,SAFD,CAEE,OAAO,GAAP,EAAY;AACZ,iBAAO,KAAP;AACD;AACF,OANiB,CAAlB;;AAQA,UAAI,CAAC,SAAL,EAAgB;AACd,cAAM,IAAI,KAAJ,CAAU,wCAAV,CAAN;AACD;;AAED,WAAK,SAAL,GAAiB,SAAjB;AACA,WAAK,MAAL,GAAc,UAAU,SAAV,CAAoB,MAAlC;AACA,WAAK,MAAL,GAAc,UAAU,SAAV,CAAoB,MAAlC;;AAEA,qHAAqB,GAArB;AACD;;;uCAEyB;AAAA;;AACxB,aAAO,6BAAK,SAAL,CAAe,SAAf,EAAyB,gBAAzB,uCAAP;AACD;;;6BAEe;AAAA;;AACd,aAAO,8BAAK,SAAL,CAAe,SAAf,EAAyB,MAAzB,wCAAP;AACD;;;oCAEsB;AAAA;;AACrB,aAAO,8BAAK,SAAL,CAAe,SAAf,EAAyB,aAAzB,wCAAP;AACD;;;6BAEe;AAAA;;AACd,aAAO,8BAAK,SAAL,CAAe,SAAf,EAAyB,MAAzB,wCAAP;AACD;;;oCAEsB;AAAA;;AACrB,aAAO,8BAAK,SAAL,CAAe,SAAf,EAAyB,aAAzB,wCAAP;AACD;;;;EAtDkB,U;;AAyDrB,OAAO,SAAP,CAAiB,EAAjB,GAAsB,eAAtB;;AAEA,OAAO,OAAP,GAAiB,MAAjB;;;AC/DA;;;;;;;;;;;;;;eAEyC,QAAQ,cAAR,C;IAAlC,O,YAAA,O;IAAS,Y,YAAA,Y;IAAc,O,YAAA,O;;AAC9B,IAAM,MAAM,QAAQ,WAAR,CAAZ;AACA,IAAM,MAAM,QAAQ,KAAR,CAAZ;AACA,IAAM,MAAM,QAAQ,WAAR,CAAZ;;IAEM,S;;;AACJ,qBAAY,SAAZ,EAAuB,IAAvB,EAA6B,OAA7B,EAAsC;AAAA;;AAAA,sHAC9B,aAAa,eAAa,IAAb,GAAsB,EAAnC,CAD8B;;AAEpC,UAAK,IAAL,GAAY,WAAZ;AACA,UAAK,SAAL,GAAiB,SAAjB;AACA,UAAK,IAAL,GAAY,IAAZ;AACA,UAAK,OAAL,GAAe,OAAf;AALoC;AAMrC;;;EAPqB,K;;IAUlB,W;;;AACJ,yBAAqB;AAAA;;AAAA;;AAAA,sCAAN,IAAM;AAAN,UAAM;AAAA;;AAAA,sJACV,IADU;;AAEnB,WAAK,IAAL,GAAY,aAAZ;AAFmB;AAGpB;;;EAJuB,S;;AAO1B;;;AACA,SAAS,WAAT,CAAqB,GAArB,EAA0B;AACxB,MAAI,IAAI,KAAR,EAAe;AACb,QAAM,SAAS,IAAI,KAAJ,CAAU,GAAV,CAAf;AACA,WAAO,OAAO,QAAP,IAAmB,OAAO,QAAjC;AACD;AACD,MAAM,KAAK,SAAS,aAAT,CAAuB,GAAvB,CAAX,CALwB,CAKe;AACvC,KAAG,IAAH,GAAU,GAAV;AACA,SAAO,GAAG,QAAV;AACD;;IAEK,U;;;AACJ,sBAAY,OAAZ,EAAqB;AAAA;;AAAA;;AAEnB,WAAK,MAAL,GAAc,EAAd;AACA,WAAK,IAAL,GAAY,EAAZ;AACA,WAAK,GAAL,GAAW,IAAX;AACA,WAAK,OAAL,GAAe,IAAf;AACA,WAAK,OAAL,GAAe,QAAO,OAAP,yCAAO,OAAP,OAAmB,QAAnB,GAA8B,OAA9B,GAAwC,EAAvD;AACA,WAAK,OAAL,GAAe,OAAO,MAAP,CAAc,IAAd,CAAf;AACA,WAAK,YAAL,GAAoB,IAApB;AACA,WAAK,WAAL,GAAmB,IAAnB;AACA,WAAK,cAAL,GAAsB,IAAtB;AACA,WAAK,eAAL,GAAuB,OAAO,MAAP,CAAc,IAAd,CAAvB;AACA,WAAK,eAAL,GAAuB,OAAO,MAAP,CAAc,IAAd,CAAvB;AACA,WAAK,MAAL,GAAc,SAAd;AAbmB;AAcpB;;;;6BAEQ;AACP,WAAK,MAAL,GAAc,EAAd;AACA,WAAK,IAAL,GAAY,EAAZ;AACA,WAAK,GAAL,GAAW,IAAX;AACA,WAAK,aAAL;AACA,WAAK,aAAL;AACA,WAAK,MAAL,GAAc,IAAd;AACD;;;kCAEa,M,EAAQ;AAAA;;AACpB,UAAM,OAAQ,KAAK,MAAL,GAAc,MAA5B;AACA,UAAM,YAAY,KAAK,eAAvB;AACA,gBAAU,IAAV,GAAiB,gBAAQ;AACvB,YAAM,MAAM,KAAK,QAAL,CAAc,MAAd,CAAZ;AACA,eAAK,IAAL,CAAU,OAAV,EAAmB,GAAnB;AACA,eAAK,MAAL,CAAY,KAAZ,CAAkB,GAAlB;AACD,OAJD;AAKA,gBAAU,KAAV,GAAkB,YAAa;AAAA,2CAAT,IAAS;AAAT,cAAS;AAAA;;AAC7B,eAAK,MAAL;AACA,eAAK,OAAL,gBAAa,YAAb,SAA8B,IAA9B;AACD,OAHD;AAIA,gBAAU,OAAV,GAAoB,YAAM;AACxB,eAAK,OAAL,CAAa,SAAb;AACA,aAAK,IAAL,CAAU,OAAV,EAAmB,UAAU,KAA7B;AACD,OAHD;AAIA,gBAAU,KAAV,GAAkB,iBAAS;AACzB,eAAK,MAAL;AACA,YAAI,OAAK,MAAL,KAAgB,YAApB,EAAkC;AAChC,iBAAK,OAAL,CAAa,SAAb;AACD;AACD,eAAK,IAAL,CAAU,OAAV,EAAmB,KAAnB;AACD,OAND;AAOA,WAAK,EAAL,CAAQ,MAAR,EAAgB,UAAU,IAA1B;AACA,WAAK,EAAL,CAAQ,OAAR,EAAiB,UAAU,KAA3B;AACA,WAAK,EAAL,CAAQ,SAAR,EAAmB,UAAU,OAA7B;AACD;;;oCAEe;AAAA;;AACd,UAAM,YAAY,KAAK,eAAvB;AACA,aAAO,mBAAP,CAA2B,SAA3B,EAAsC,OAAtC,CAA8C,aAAK;AACjD,eAAK,MAAL,CAAY,cAAZ,CAA2B,CAA3B,EAA8B,UAAU,CAAV,CAA9B;AACA,eAAO,UAAU,CAAV,CAAP;AACD,OAHD;AAIA,aAAO,KAAK,MAAZ;AACD;;;kCAEa,C,EAAG;AAAA;;AACf,UAAM,SAAU,KAAK,MAAL,GAAc,CAA9B;AACA,UAAM,YAAY,KAAK,eAAvB;AACA,gBAAU,OAAV,GAAoB,mBAAW;AAC7B,YAAI,QAAQ,IAAR,KAAiB,cAArB,EAAqC;AACnC,iBAAK,KAAL,GAAa,IAAb,CAAkB;AAAA,mBAAM,OAAK,UAAL,EAAN;AAAA,WAAlB;AACA,iBAAK,IAAL,CACE,OADF,EAEE,IAAI,WAAJ,CACE,QAAQ,QAAR,CAAiB,CAAjB,EAAoB,IADtB,EAEE,QAAQ,YAAR,CACE,MADF,EAEE,qCAFF,KAGK,EALP,EAME,OANF,CAFF;AAWD;AACD,eAAK,IAAL,CAAU,SAAV,EAAqB,OAArB;AACA,eAAK,IAAL,CAAU,OAAK,QAAL,CAAc,OAAd,IAAyB,QAAzB,GAAoC,OAA9C,EAAuD,OAAvD;AACD,OAjBD;AAkBA,gBAAU,KAAV,GAAkB,iBAAS;AACzB,eAAK,IAAL,CAAU,OAAV,EAAmB,KAAnB;AACD,OAFD;AAGA,gBAAU,GAAV,GAAgB,mBAAW;AACzB,eAAK,OAAL,CAAa,OAAb,EAAsB,OAAtB;AACD,OAFD;AAGA,aAAO,IAAP,CAAY,OAAZ,EAAqB,UAAU,KAA/B;AACA,aAAO,EAAP,CAAU,SAAV,EAAqB,UAAU,OAA/B;AACA,aAAO,EAAP,CAAU,KAAV,EAAiB,UAAU,GAA3B;AACD;;;oCAEe;AAAA;;AACd,UAAM,YAAY,KAAK,eAAvB;AACA,aAAO,mBAAP,CAA2B,SAA3B,EAAsC,OAAtC,CAA8C,aAAK;AACjD,eAAK,MAAL,CAAY,cAAZ,CAA2B,CAA3B,EAA8B,UAAU,CAAV,CAA9B;AACA,eAAO,UAAU,CAAV,CAAP;AACD,OAHD;AAIA,aAAO,KAAK,MAAZ;AACD;;;yBAEI,E,EAAI;AACP,WAAK,GAAL,GAAW,IAAI,EAAJ,CAAX;AACA,aAAO,KAAK,GAAZ;AACD;;;4BAEO,M,EAAiB;AACvB,WAAK,MAAL,GAAc,MAAd;;AADuB,yCAAN,IAAM;AAAN,YAAM;AAAA;;AAEvB,WAAK,IAAL,cAAU,QAAV,EAAoB,MAApB,SAA+B,IAA/B;AACA,WAAK,IAAL,cAAU,MAAV,SAAqB,IAArB;AACD;;AAED;;;;;;0BAGM,O,EAAS;AAAA;;AACb,UAAI,KAAK,MAAL,KAAgB,SAApB,EAA+B;AAC7B,eAAO,QAAQ,MAAR,CAAe,IAAI,KAAJ,CAAU,2BAAV,CAAf,CAAP;AACD;;AAED,WAAK,YAAL,GAAoB,OAApB;;AAEA,UAAI,OAAO,OAAP,KAAmB,QAAvB,EAAiC;AAC/B,kBAAU,EAAC,KAAK,OAAN,EAAV;AACD;;AAED,UAAI,CAAC,QAAQ,MAAb,EAAqB;AACnB,gBAAQ,MAAR,GAAiB,YAAY,QAAQ,GAApB,CAAjB;AACD;;AAED,aAAO,QAAQ,GAAR,CAAY,CACjB,KAAK,OAAL,CAAa,QAAb,CADiB,EAEjB,KAAK,OAAL,CAAa,QAAQ,GAArB,EAA0B,IAA1B,CAA+B,YAAM;AAAA,uBACZ,OADY;AAAA,YAC5B,MAD4B,YAC5B,MAD4B;AAAA,YACpB,IADoB,YACpB,IADoB;;AAEnC,eAAO,OAAK,IAAL,CAAU,EAAC,cAAD,EAAS,UAAT,EAAV,CAAP;AACD,OAHD,CAFiB,CAAZ,EAMJ,IANI,CAMC;AAAA;AAAA,YAAE,IAAF;;AAAA,eAAY,IAAZ;AAAA,OAND,CAAP;AAOD;;AAED;;;;;;4BAGQ,O,EAAS;AAAA;;AACf,WAAK,OAAL,CAAa,YAAb;AACA,WAAK,cAAL,GAAsB,OAAtB;AACA,aAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,eAAK,aAAL,CAAmB,IAAI,OAAK,MAAT,EAAnB;AACA,eAAK,aAAL,CAAmB,IAAI,OAAK,MAAT,EAAnB;AACA,eAAK,MAAL,CAAY,IAAZ,CAAiB,OAAjB,EAA0B,MAA1B;AACA,eAAK,MAAL,CAAY,OAAZ,CAAoB,OAAK,gBAAL,CAAsB,OAAtB,CAApB,EAAoD,YAAM;AACxD,iBAAK,MAAL,CAAY,cAAZ,CAA2B,OAA3B,EAAoC,MAApC;AACA;AACA;AACD,SAJD;AAKD,OATM,CAAP;AAUD;;AAED;;;;;;;;iCAK8B;AAAA,UAAnB,EAAmB,uEAAd,KAAK,OAAS;;AAC5B,WAAK,OAAL,CAAa,eAAb;AACA,WAAK,MAAL,CAAY,GAAZ;AACA,aAAO,QAAQ,QAAQ,KAAK,MAAb,EAAqB,OAArB,CAAR,EAAuC,EAAvC,CAAP;AACA;AACD;;AAED;;;;;;yBAGK,O,EAAS;AAAA;;AACZ,WAAK,OAAL,CAAa,SAAb;AACA;AACA,WAAK,WAAL,GAAmB,OAAnB;AACA,UAAI,OAAO,OAAP,KAAmB,QAAvB,EAAiC;AAC/B,kBAAU,EAAC,QAAQ,OAAT,EAAV;AACD;;AANW,sBAQW,OARX;AAAA,UAQL,MARK,aAQL,MARK;AAAA,UAQG,IARH,aAQG,IARH;;;AAUZ,UAAM,gBAAgB,KAAK,aAAL,EAAtB;AACA,oBAAc,KAAd,CAAoB,EAApB,GAAyB,MAAzB;AACA,oBAAc,KAAd,CAAoB,UAApB,IAAkC,IAAlC;;AAEA,aAAO,QAAQ,GAAR,CAAY,CACjB,KAAK,KAAL,CAAW,KAAK,MAAL,CAAY,aAAZ,CAAX,CADiB,EAEjB,QAAQ,KAAK,MAAb,EAAqB,OAArB,EAA8B,IAA9B,CAAmC,cAAM;AACvC;AACA,YACE,GAAG,IAAH,KAAY,cAAc,IAA1B,IACA,GAAG,KAAH,CAAS,KAAT,KAAmB,cAAc,KAAd,CAAoB,KADvC,IAEA,GAAG,KAAH,CAAS,IAAT,KAAkB,cAAc,KAAd,CAAoB,EAFtC,IAGA,CAAC,GAAG,KAAH,CAAS,EAJZ,EAKE;AACA,iBAAO,QAAK,OAAL,CAAa,OAAb,CAAP;AACD;;AAED,gBAAK,MAAL,GAAc,MAAd;AACA,gBAAK,IAAL,GAAY,GAAG,KAAH,CAAS,UAAT,CAAZ;AACA,gBAAK,OAAL,CAAa,MAAb,EAAqB,EAArB;AACA,eAAO,EAAP;AACD,OAfD,CAFiB,CAAZ,EAkBJ,IAlBI,CAkBC;AAAA;AAAA,YAAI,EAAJ;;AAAA,eAAY,EAAZ;AAAA,OAlBD,CAAP;AAmBD;;AAED;;;;;;;;2BAKO;AAAA;;AACL,UAAI,CAAC,KAAK,MAAV,EAAkB;AAChB,eAAO,QAAQ,OAAR,EAAP;AACD;AACD,aAAO,KAAK,KAAL,GAAa,IAAb,CAAkB;AAAA,eACvB,QAAK,UAAL,GAAkB,IAAlB,CAAuB,YAAM;AAC3B,kBAAK,OAAL,CAAa,SAAb;AACA,iBAAO,EAAP;AACD,SAHD,CADuB;AAAA,OAAlB,CAAP;AAMD;;AAED;;;;;;;;4BAKyB;AAAA,UAAnB,EAAmB,uEAAd,KAAK,OAAS;;AACvB,WAAK,OAAL,CAAa,SAAb;;AAEA,aAAO,QAAQ,GAAR,CAAY,CACjB,QAAQ,QAAQ,KAAK,MAAb,EAAqB,KAArB,CAAR,EAAqC,EAArC,CADiB,EAEjB,KAAK,KAAL,CAAW,KAAK,MAAL,CAAY,KAAK,aAAL,EAAZ,CAAX,CAFiB,CAAZ,EAGJ,IAHI,CAGC;AAAA;AAAA,YAAE,EAAF;;AAAA,eAAU,EAAV;AAAA,OAHD,CAAP;AAIA;AACD;;AAED;;;;;;;8BAIU;AAAA;;AACR,WAAK,aAAL;AACA,WAAK,aAAL,CAAmB,IAAI,KAAK,MAAT,EAAnB;AACA,WAAK,OAAL,CAAa,YAAb;AACA,aAAO,KAAK,IAAL,CAAU,KAAK,WAAf,EAA4B,IAA5B,CAAiC,YAAM;AAC5C,gBAAK,OAAL,CAAa,SAAb;AACD,OAFM,CAAP;AAGD;;;yBAEI,O,EAAS;AAAA;;AACZ,aAAO,KAAK,KAAL,CAAW,OAAX,EAAoB,IAApB,CAAyB,YAAM;AACpC,gBAAK,IAAL,CAAU,MAAV,EAAkB,OAAlB;AACD,OAFM,CAAP;AAGD;;;gCAEW,O,EAA4B;AAAA,UAAnB,EAAmB,uEAAd,KAAK,OAAS;;AACtC,aAAO,QAAQ,GAAR,CAAY,CACjB,KAAK,IAAL,CAAU,OAAV,CADiB,EAEjB,QAAQ,KAAK,OAAL,CAAa,SAAb,CAAR,EAAiC,EAAjC,CAFiB,CAAZ,EAGJ,IAHI,CAGC;AAAA;AAAA,YAAI,EAAJ;;AAAA,eAAY,EAAZ;AAAA,OAHD,CAAP;AAID;;;0BAEK,I,EAAM;AAAA;;AACV,aAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,YAAM,MAAM,KAAK,QAAL,CAAc,MAAd,CAAZ;AACA,gBAAK,MAAL,CAAY,KAAZ,CAAkB,GAAlB,EAAuB,eAAO;AAC5B,cAAI,GAAJ,EAAS;AACP,mBAAO,OAAO,GAAP,CAAP;AACD;AACD,kBAAK,IAAL,CAAU,QAAV,EAAoB,GAApB;AACA;AACD,SAND;AAOD,OATM,CAAP;AAUD;;;6BAEQ,O,EAAS;AAAA,UACT,IADS,GACD,OADC,CACT,IADS;;AAEhB,UAAM,KAAK,QAAQ,KAAR,CAAc,KAAzB;AACA;AACE;AACA,SAAC,KAAK,OAAO,KAAK,EAAjB,GAAsB,IAAvB,MACC,SAAS,IAAT,IAAiB,SAAS,SAA1B,IAAuC,SAAS,UADjD;AAFF;AAKD;;;4BAEO,O,EAAS;AACf,aAAO,CAAC,KAAK,QAAL,CAAc,OAAd,CAAR;AACD;;;2BAEM,O,EAAQ;AACb,UAAI,CAAC,KAAK,OAAL,CAAa,QAAO,IAApB,CAAL,EAAgC;AAC9B,aAAK,OAAL,CAAa,QAAO,IAApB,IAA4B,QAAO,MAAP,CAAc,IAAd,CAA5B;AACA,YAAM,IAAI,KAAK,OAAL,CAAa,QAAO,IAApB,CAAV;AACA,YAAI,KAAK,EAAE,KAAX,EAAkB;AAChB,YAAE,KAAF;AACD,SAFD,MAEO,IAAI,KAAK,EAAE,QAAX,EAAqB;AAC1B,YAAE,QAAF;AACD;AACF;;AAED,aAAO,KAAK,OAAL,CAAa,QAAO,IAApB,CAAP;AACD;;AAED;;;;2BACO,E,EAAI;AACT,aAAO,GAAG,QAAH,EAAP;AACD;;;oCACe;AACd,aAAO,IAAI,IAAI,OAAR,CAAgB,EAAhB,EAAoB;AACzB,iBAAS,KADgB;AAEzB,eAAO,KAAK;AAFa,OAApB,CAAP;AAID;;;2BACM,E,EAAI;AACT,aAAO,GAAG,QAAH,EAAP;AACD;;;oCACe,CAAE;;;qCACD,G,EAAK;AACpB,UAAM,SAAS,IAAI,KAAJ,CAAU,GAAV,CAAf;AACA,aAAO,IAAP,GAAc,OAAO,OAAO,IAAd,CAAd;AACA,aAAO,IAAP,GAAc,OAAO,QAArB;AACA,aAAO,MAAP;AACD;;;;EAxUsB,Y;;AA2UzB;;;AACA,WAAW,SAAX,CAAqB,EAArB,GAA0B,EAA1B;AACA,WAAW,SAAX,CAAqB,MAArB,GAA8B,IAA9B;AACA,WAAW,SAAX,CAAqB,MAArB,GAA8B,IAA9B;;AAEA,OAAO,OAAP,GAAiB,UAAjB;AACA,OAAO,OAAP,CAAe,WAAf,GAA6B,WAA7B;AACA,OAAO,OAAP,CAAe,SAAf,GAA2B,SAA3B;AACA,OAAO,OAAP,CAAe,WAAf,GAA6B,WAA7B;;;ACtXA;;;;;;;;AAEA,IAAM,UAAU,QAAQ,eAAR,CAAhB;AACA,IAAM,QAAQ,QAAQ,aAAR,CAAd;AACA,IAAM,eAAe,QAAQ,oBAAR,CAArB;AACA,IAAM,UAAU,QAAQ,eAAR,CAAhB;AACA,IAAM,gBAAgB,QAAQ,oBAAR,CAAtB;;AAEA,UAAU,OAAO,OAAP;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,EAA4C,aAA5C,CAAV;AACA,QAAQ,YAAR,GAAuB,aAAvB;AACA,QAAQ,OAAR,GAAkB,OAAlB;AACA,QAAQ,KAAR,GAAgB,KAAhB;AACA,QAAQ,YAAR,GAAuB,YAAvB;AACA,QAAQ,OAAR,GAAkB,OAAlB;;;ACbA;;;;;;AAEA,IAAM,gBAAgB,QAAQ,QAAR,CAAtB;AACA,IAAM,eAAe,QAAQ,WAAR,CAArB;;IAEM,Y;AACJ,0BAAc;AAAA;;AACZ,SAAK,QAAL,GAAgB,IAAI,aAAJ,EAAhB;AACA,SAAK,SAAL,GAAiB,OAAO,MAAP,CAAc,IAAd,CAAjB;AACD;;;;8BAEgB;AAAA,wCAAN,IAAM;AAAN,YAAM;AAAA;;AACf,aAAO,+BAAa,IAAb,SAAsB,IAAtB,EAAP;AACD;;;2BAEM,K,EAAO,O,EAAS;AACrB,WAAK,SAAL,CAAe,KAAf,IAAwB,OAAxB;AACD;;;6BAEQ,K,EAAgB;AACvB,UAAM,UAAU,KAAK,SAAL,CAAe,KAAf,CAAhB;AACA,UAAI,CAAC,OAAL,EAAc;AACZ,cAAM,IAAI,KAAJ,CAAa,KAAb,+BAAN;AACD;;AAJsB,yCAAN,IAAM;AAAN,YAAM;AAAA;;AAKvB,UAAM,UAAU,yBAAW,IAAX,CAAhB;AACA,UAAI,EAAE,mBAAmB,OAArB,CAAJ,EAAmC;AACjC,cAAM,IAAI,SAAJ,CAAiB,KAAjB,qCAAN;AACD;AACD,aAAO,OAAP;AACD;;;8BAES,K,EAAO;AACf,aAAO,QAAQ,KAAK,SAAL,CAAe,KAAf,CAAR,CAAP;AACD;;;;;;AAGH,CAAC,CACC,IADD,EAEC,aAFD,EAGC,gBAHD,EAIC,MAJD,EAKC,MALD,EAMC,eAND,EAOC,OAPD,CAOS,gBAAQ;AAChB,eAAa,SAAb,CAAuB,IAAvB,IAA+B,YAAkB;AAAA;;AAC/C,qBAAK,QAAL,EAAc,IAAd;AACD,GAFD;AAGD,CAXA;;AAaD,OAAO,OAAP,GAAiB,YAAjB;;;ACjDA;;;;;;;;AAEA,OAAO,OAAP;AAAA;;AACE,wBAAY,OAAZ,EAAqB;AAAA;;AAAA,4HACb,OADa;;AAEnB,UAAK,IAAL,GAAY,cAAZ;AAFmB;AAGpB;;AAJH;AAAA,EAA4C,KAA5C;;;ACFA;;AAEA,OAAO,OAAP,GAAiB,SAAS,KAAT,CAAe,OAAf,EAAwB;AACvC,SAAO,IAAI,OAAJ,CAAY,mBAAW;AAC5B,eAAW,OAAX,EAAoB,OAApB;AACD,GAFM,CAAP;AAGD,CAJD;;;ACFA;;AAEA,OAAO,OAAP,GAAiB,SAAS,OAAT,CAAiB,EAAjB,EAAqB,KAArB,EAAmD;AAAA,MAAvB,WAAuB,uEAAT,OAAS;;AAClE,SAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,QAAM,UAAU,SAAV,OAAU,GAAM;AACpB,SAAG,cAAH,CAAkB,KAAlB,EAAyB,OAAzB;AACA,SAAG,cAAH,CAAkB,WAAlB,EAA+B,OAA/B;AACD,KAHD;AAIA,aAAS,OAAT,CAAiB,MAAjB,EAAyB;AACvB,aAAO,MAAP;AACA;AACD;AACD,aAAS,OAAT,CAAiB,KAAjB,EAAwB;AACtB,cAAQ,KAAR;AACA;AACD;AACD,OAAG,IAAH,CAAQ,KAAR,EAAe,OAAf;AACA,QAAI,WAAJ,EAAiB;AACf,SAAG,IAAH,CAAQ,WAAR,EAAqB,OAArB;AACD;AACF,GAjBM,CAAP;AAkBD,CAnBD;;;ACFA;;AAEA,IAAM,eAAe,QAAQ,gBAAR,CAArB;AACA,IAAM,QAAQ,QAAQ,SAAR,CAAd;;AAEA,OAAO,OAAP,GAAiB,SAAS,OAAT,CAAiB,OAAjB,EAA0B,EAA1B,EAA8B;AAC7C,SAAO,QAAQ,IAAR,CAAa,CAClB,OADkB,EAElB,MAAM,EAAN,EAAU,IAAV,CAAe,YAAM;AACnB,UAAM,IAAI,YAAJ,EAAN;AACD,GAFD,CAFkB,CAAb,CAAP;AAMD,CAPD;;;ACLA;;AAEA,IAAM,MAAM,QAAQ,WAAR,CAAZ;AACA,IAAM,WAAW,QAAQ,gBAAR,CAAjB;AACA,IAAM,QAAQ,QAAQ,aAAR,CAAd;;AAEA,SAAS,GAAT,GAAsB;AAAA,oCAAN,IAAM;AAAN,QAAM;AAAA;;AACpB,MAAI,CAAC,KAAK,CAAL,CAAD,IAAY,CAAC,KAAK,CAAL,CAAjB,EAA0B;AACxB,WAAO,uBAAS,IAAT,CAAP;AACD;AACD,4CAAW,GAAX,gBAAkB,IAAlB;AACD;;AAED,UAAU,OAAO,OAAP,GAAiB,IAAI,IAAJ,EAA3B;AACA,QAAQ,GAAR,GAAc,GAAd;AACA,QAAQ,GAAR,GAAc,GAAd;AACA,QAAQ,KAAR,GAAgB,UAAS,CAAT,EAAY,CAAZ,EAAe;AAC7B,SAAO,EAAE,MAAF,CAAS,CAAT,CAAP;AACD,CAFD;AAGA,QAAQ,YAAR,GAAuB,SAAS,MAAhC;AACA,QAAQ,WAAR,GAAsB,SAAS,MAA/B;AACA,QAAQ,aAAR,GAAwB,SAAS,QAAjC;AACA,QAAQ,KAAR,GAAgB,KAAhB;;;ACtBA;;;;;;AAEA,IAAM,WAAW,QAAQ,YAAR,CAAjB;;AAEA;;;;;;;;;IAQM,G;AACJ,eAAY,KAAZ,EAAmB,MAAnB,EAA2B,QAA3B,EAAqC;AAAA;;AACnC,QAAI,OAAO,MAAP,KAAkB,QAAlB,IAA8B,CAAC,MAAnC,EAA2C;AACzC,YAAM,IAAI,SAAJ,mBAAN;AACD;AACD,SAAK,SAAL,CAAe,MAAf;AACA,SAAK,QAAL,CAAc,OAAO,KAAP,KAAiB,QAAjB,GAA4B,KAA5B,GAAoC,EAAlD;AACA,SAAK,WAAL,CAAiB,OAAO,QAAP,KAAoB,QAApB,GAA+B,QAA/B,GAA0C,EAA3D;AACD;;;SAEA,OAAO,W;0BAAa,I,EAAM;AACzB,UAAI,SAAS,QAAb,EAAuB;AACrB,eAAO,GAAP;AACD;AACD,aAAO,KAAK,QAAL,EAAP;AACD;;;6BAEQ,Q,EAAU;AACjB,UAAI,IAAI,KAAK,OAAb;AACA,UAAI,KAAK,MAAT,EAAiB;AACf,YAAI,KAAK,QAAL,CAAc,QAAd,IAA0B,GAA1B,GAAgC,CAApC;AACD;AACD,UAAI,KAAK,SAAT,EAAoB;AAClB,YAAI,IAAI,GAAJ,GAAU,KAAK,SAAnB;AACD;AACD,aAAO,CAAP;AACD;;AAED;;;;;;2BAGO;AACL,UAAI,KAAK,SAAT,EAAoB;AAClB,eAAO,IAAI,GAAJ,CAAQ,KAAK,MAAb,EAAqB,KAAK,OAA1B,EAAmC,IAAnC,CAAP;AACD;AACD,aAAO,IAAP;AACD;;AAED;;;;;;2BAGO,K,EAAO;AACZ,aACE,KAAK,MAAL,KAAgB,MAAM,MAAtB,IACA,KAAK,OAAL,KAAiB,MAAM,OADvB,IAEA,KAAK,SAAL,KAAmB,MAAM,SAH3B;AAKD;;AAED;;;;;;6BAGS,K,EAAO,M,EAAQ;AACtB,eAAS,UAAU,SAAS,MAAT,CAAgB,KAAhB,CAAnB;;AAEA,UAAI,MAAJ,EAAY;AACV,gBAAQ,SAAS,MAAT,CAAgB,KAAhB,CAAR;AACD;;AAED,WAAK,MAAL,GAAc,SAAS,MAAM,WAAN,EAAvB;AACA,aAAO,IAAP;AACD;;;6BACQ,Q,EAAU;AACjB,iBAAW,YAAY,KAAvB;AACA,UAAI,QAAQ,IAAZ;;AAEA,UAAI,QAAJ,EAAc;AACZ,gBAAQ,SAAS,QAAT,CAAkB,KAAK,MAAvB,CAAR;AACD,OAFD,MAEO;AACL,gBAAQ,KAAK,MAAb;AACD;;AAED,aAAO,KAAP;AACD;;AAED;;;;;;8BAGU,M,EAAQ;AAChB,WAAK,OAAL,GAAe,OAAO,WAAP,EAAf;AACA,aAAO,IAAP;AACD;;;gCACW;AACV,aAAO,KAAK,OAAZ;AACD;;AAED;;;;;;gCAGY,Q,EAAU;AACpB,WAAK,SAAL,GAAiB,QAAjB;AACA,aAAO,IAAP;AACD;;;kCACa;AACZ,aAAO,KAAK,SAAZ;AACD;;;;;;AAGH,OAAO,cAAP,CAAsB,IAAI,SAA1B,EAAqC,OAArC,EAA8C;AAC5C,OAAK,IAAI,SAAJ,CAAc,QADyB;AAE5C,OAAK,IAAI,SAAJ,CAAc;AAFyB,CAA9C;;AAKA,OAAO,cAAP,CAAsB,IAAI,SAA1B,EAAqC,QAArC,EAA+C;AAC7C,OAAK,IAAI,SAAJ,CAAc,SAD0B;AAE7C,OAAK,IAAI,SAAJ,CAAc;AAF0B,CAA/C;;AAKA,OAAO,cAAP,CAAsB,IAAI,SAA1B,EAAqC,UAArC,EAAiD;AAC/C,OAAK,IAAI,SAAJ,CAAc,WAD4B;AAE/C,OAAK,IAAI,SAAJ,CAAc;AAF4B,CAAjD;;AAKA,OAAO,OAAP,GAAiB,GAAjB;;;AC7HA;;AAEA,OAAO,OAAP,CAAe,MAAf,GAAwB,UAAS,KAAT,EAAgB;AACtC,MAAI,CAAC,KAAL,EAAY;AACV,WAAO,KAAP;AACD;;AAED;AACA,MAAM,MAAM,MACT,OADS,CACD,OADC,EACQ,EADR,EAET,OAFS,CAED,OAFC,EAEQ,EAFR,EAGT,OAHS,CAGD,OAHC,EAGQ,EAHR,EAIT,OAJS,CAID,OAJC,EAIQ,EAJR,EAKT,OALS,CAKD,OALC,EAKQ,EALR,EAMT,OANS,CAMD,OANC,EAMQ,EANR,EAOT,OAPS,CAOD,OAPC,EAOQ,EAPR,EAQT,OARS,CAQD,OARC,EAQQ,EARR,EAST,OATS,CASD,OATC,EASQ,EATR,EAUT,OAVS,CAUD,OAVC,EAUQ,EAVR,CAAZ;;AAYA;AACA,MAAM,SAAS,IAAI,MAAJ,CAAW,wBAAX,CAAf;AACA,MAAI,WAAW,CAAC,CAAhB,EAAmB;AACjB,WAAO,KAAP;AACD;AACD,SAAO,IAAP;AACD,CAxBD;;AA0BA;;;;;;;AAOA,OAAO,OAAP,CAAe,MAAf,GAAwB,UAAS,KAAT,EAAgB;AACtC,MAAI,UAAU,IAAd,EAAoB;AAClB,WAAO,IAAP;AACD;;AAED,SAAO,MACJ,OADI,CACI,YADJ,EACkB,EADlB,EAEJ,OAFI,CAEI,KAFJ,EAEW,MAFX,EAGJ,OAHI,CAGI,IAHJ,EAGU,MAHV,EAIJ,OAJI,CAII,IAJJ,EAIU,MAJV,EAKJ,OALI,CAKI,IALJ,EAKU,MALV,EAMJ,OANI,CAMI,IANJ,EAMU,MANV,EAOJ,OAPI,CAOI,KAPJ,EAOW,MAPX,EAQJ,OARI,CAQI,IARJ,EAQU,MARV,EASJ,OATI,CASI,IATJ,EASU,MATV,EAUJ,OAVI,CAUI,IAVJ,EAUU,MAVV,EAWJ,OAXI,CAWI,IAXJ,EAWU,MAXV,EAYJ,OAZI,CAYI,MAZJ,EAYY,SAZZ,CAAP;AAaD,CAlBD;;AAoBA;;;;;;;AAOA,OAAO,OAAP,CAAe,QAAf,GAA0B,UAAS,KAAT,EAAgB;AACxC,MAAI,UAAU,IAAd,EAAoB;AAClB,WAAO,IAAP;AACD;;AAED,SAAO,MACJ,OADI,CACI,OADJ,EACa,GADb,EAEJ,OAFI,CAEI,OAFJ,EAEa,GAFb,EAGJ,OAHI,CAGI,OAHJ,EAGa,GAHb,EAIJ,OAJI,CAII,OAJJ,EAIa,GAJb,EAKJ,OALI,CAKI,OALJ,EAKa,GALb,EAMJ,OANI,CAMI,OANJ,EAMa,GANb,EAOJ,OAPI,CAOI,OAPJ,EAOa,GAPb,EAQJ,OARI,CAQI,OARJ,EAQa,GARb,EASJ,OATI,CASI,OATJ,EASa,GATb,EAUJ,OAVI,CAUI,OAVJ,EAUa,IAVb,CAAP;AAWD,CAhBD;;;AC9DA;;AAEA,IAAM,MAAM,QAAQ,YAAR,CAAZ;;AAEA,OAAO,OAAP,GAAiB,SAAS,KAAT,CAAe,CAAf,EAAkB;AACjC,MAAI,cAAJ;AACA,MAAI,iBAAJ;;AAEA,MAAM,gBAAgB,EAAE,OAAF,CAAU,GAAV,CAAtB;AACA,MAAI,kBAAkB,CAAC,CAAvB,EAA0B;AACxB,eAAW,EAAE,MAAF,CAAS,gBAAgB,CAAzB,CAAX;AACA,QAAI,EAAE,MAAF,CAAS,CAAT,EAAY,aAAZ,CAAJ;AACD;;AAED,MAAM,UAAU,EAAE,OAAF,CAAU,GAAV,CAAhB;AACA,MAAI,YAAY,CAAC,CAAjB,EAAoB;AAClB,YAAQ,EAAE,MAAF,CAAS,CAAT,EAAY,OAAZ,CAAR;AACA,QAAI,EAAE,MAAF,CAAS,UAAU,CAAnB,CAAJ;AACD;;AAED,SAAO,IAAI,GAAJ,CAAQ,KAAR,EAAe,CAAf,EAAkB,QAAlB,CAAP;AACD,CAjBD;;;ACJA;;;;;;;;AAEA,IAAM,UAAU,QAAQ,cAAR,CAAhB;AACA,IAAM,MAAM,QAAQ,WAAR,CAAZ;AACA,IAAM,MAAM,QAAQ,WAAR,CAAZ;;AAEA,SAAS,MAAT,CAAgB,IAAhB,EAAsB,KAAtB,EAAgD;AAAA,MAAnB,YAAmB,uEAAJ,EAAI;;AAAA,MACxC,MADwC;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,IACzB,OADyB;;AAE9C,SAAO,MAAP,CAAc,OAAO,SAArB,EAAgC,KAAhC;;AAEA,SAAO;AACL,cADK;AAEL,UAFK,kBAEE,MAFF,EAEU;AACb,UAAM,IAAI,IAAI,MAAJ,EAAV;AACA,QAAE,MAAF,CAAS,MAAT;;AAEA,UAAM,UAAU,EAAhB;AACA,mBAAa,OAAb,CAAqB,eAAO;AAC1B,gBAAQ,IAAI,IAAZ,IAAoB,OAAO,MAAP,CAAc,GAAd,CAApB;AACD,OAFD;AAGA,QAAE,OAAF,GAAY,OAAZ;;AAEA,aAAO,CAAP;AACD,KAbI;AAcL,UAdK,oBAcI;AACP;AACD;AAhBI,GAAP;AAkBD;;AAED,OAAO,OAAP,GAAiB,OAAO,IAAP,CAAY,SAAZ,CAAjB;AACA,OAAO,OAAP,CAAe,MAAf,GAAwB,MAAxB;AACA,OAAO,OAAP,CAAe,MAAf,GAAwB,OAAxB;AACA,OAAO,OAAP,CAAe,GAAf,GAAqB,GAArB;AACA,OAAO,OAAP,CAAe,GAAf,GAAqB,GAArB;;;AClCA;;;;;;;;;;AAEA,IAAM,eAAe,QAAQ,cAAR,CAArB;;IAEM,M;;;;;;;;;;;2BACG,M,EAAQ;AACb,WAAK,MAAL,GAAc,MAAd;AACD;;;6BAEQ;AACP,aAAO,KAAK,MAAZ;AACD;;AAED;;;;4BACQ,CAAE;;;2BACH,CAAE;;;;EAXU,Y;;AAcrB,OAAO,OAAP,GAAiB,MAAjB;;;AClBA;;eAEsB,QAAQ,cAAR,C;IAAf,M,YAAA,M;IAAQ,G,YAAA,G;;AACf,IAAM,iBAAiB,QAAQ,oBAAR,CAAvB;AACA,IAAM,WAAW,QAAQ,cAAR,CAAjB;;AAEA;;;;;AAKA,IAAM,KAAK,kCAAX;;AAEA,SAAS,eAAT,CAAyB,QAAzB,EAAmC;AACjC,SAAO,IAAI,MAAJ,EAAY,EAAC,OAAO,EAAR,EAAZ,EAAyB,YAAY,IAAI,UAAJ,EAAgB,EAAhB,EAAoB,QAApB,CAArC,CAAP;AACD;;AAED,SAAS,KAAT,CAAe,QAAf,EAAyB;AACvB,SAAO,SAAS,QAAT,CAAkB,MAAlB,EAA0B,EAA1B,CAAP;AACD;;AAED,OAAO,OAAP,GAAiB,OACf,MADe,EAEf;AACE,OADF,mBACU;AAAA;;AACN,QAAM,gBAAgB;AACpB,YAAM,MADc;AAEpB,gBAAU,IAFU;AAGpB,kBAHoB;AAIpB,WAAK;AAAA,eAAM,MAAK,aAAL,EAAN;AAAA;AAJe,KAAtB;AAMA,SAAK,OAAL,CAAa,iBAAb,EAAgC,GAAhC,CAAoC,aAApC;AACD,GATH;AAUE,MAVF,gBAUO,QAVP,EAUiB;AAAA;;AACb,SAAK,MAAL,CAAY,OAAZ,CAAoB,SAApB;AACA,WAAO,KAAK,OAAL,CAAa,WAAb,EACJ,GADI,CACA,gBAAgB,QAAhB,CADA,EAEJ,IAFI,CAEC,kBAAU;AACd,aAAK,MAAL,CAAY,IAAZ,CAAiB,OAAO,YAAP,CAAoB,KAApB,CAAjB;AACA,aAAK,MAAL,CAAY,OAAZ,CAAoB,OAApB;AACD,KALI,CAAP;AAMD,GAlBH;AAmBE,eAnBF,2BAmBkB;AAAA;;AAAA,QACP,MADO,GACG,IADH,CACP,MADO;;AAEd,WAAO,OAAP,CAAe,MAAf;AACA,WAAO,OAAO,SAAP,CAAiB,MAAjB,IACH,OAAO,QAAP,CAAgB,MAAhB,EAAwB;AAAA,aAAY,OAAK,IAAL,CAAU,QAAV,CAAZ;AAAA,KAAxB,CADG,GAEH,KAAK,IAAL,EAFJ;AAGD;AAzBH,CAFe,EA6Bf,CAAC,cAAD,EAAiB,QAAjB,CA7Be,CAAjB;;;ACrBA;;eAEsB,QAAQ,cAAR,C;IAAf,M,YAAA,M;IAAQ,G,YAAA,G;;AAEf,OAAO,OAAP,GAAiB,OAAO,WAAP,EAAoB;AACnC,OADmC,mBAC3B;AAAA;;AACN,SAAK,QAAL,GAAgB,IAAI,GAAJ,EAAhB;AACA,SAAK,OAAL,GAAe,kBAAU;AACvB,UAAI,CAAC,MAAK,KAAL,CAAW,MAAX,CAAL,EAAyB;AACvB;AACD;;AAHsB,UAKhB,EALgB,GAKV,OAAO,KALG,CAKhB,EALgB;;;AAOvB,UAAM,UAAU,MAAK,QAAL,CAAc,GAAd,CAAkB,EAAlB,CAAhB;AACA,UAAI,CAAC,OAAL,EAAc;AACZ;AACD;;AAED,UAAI,OAAO,KAAP,CAAa,IAAb,KAAsB,OAA1B,EAAmC;AACjC,gBAAQ,CAAR,EAAW,OAAO,QAAP,CAAgB,OAAhB,CAAX;AACD,OAFD,MAEO;AACL,gBAAQ,CAAR,EAAW,OAAO,QAAP,CAAgB,CAAhB,CAAX;AACD;AACD,YAAK,QAAL,CAAc,MAAd,CAAqB,EAArB;AACD,KAlBD;AAmBA,SAAK,MAAL,CAAY,EAAZ,CAAe,SAAf,EAA0B,KAAK,OAA/B;AACD,GAvBkC;AAwBnC,MAxBmC,kBAwB5B;AACL,SAAK,MAAL,CAAY,cAAZ,CAA2B,SAA3B,EAAsC,KAAK,OAA3C;AACD,GA1BkC;AA2BnC,IA3BmC,gBA2B9B;AACH,QAAI,WAAJ;AACA,WAAO,CAAC,EAAR,EAAY;AACV,WAAK,KAAK,MAAL,GACF,QADE,CACO,EADP,EAEF,MAFE,CAEK,CAFL,EAEQ,EAFR,CAAL;AAGD;AACD,WAAO,EAAP;AACD,GAnCkC;AAoCnC,OApCmC,iBAoC7B,MApC6B,EAoCrB;AACZ,WACE,OAAO,IAAP,KAAgB,IAAhB,KACC,OAAO,KAAP,CAAa,IAAb,KAAsB,OAAtB,IAAiC,OAAO,KAAP,CAAa,IAAb,KAAsB,QADxD,CADF;AAID,GAzCkC;AA0CnC,KA1CmC,eA0C/B,EA1C+B,EA0ClB;AACf,QAAM,KAAK,IAAI,IAAJ,EAAU,EAAC,MAAM,KAAP,EAAV,CAAX;AACA,OAAG,MAAH,CAAU,EAAV;;AAFe,sCAAN,IAAM;AAAN,UAAM;AAAA;;AAGf,WAAO,KAAK,OAAL,cAAa,EAAb,SAAoB,IAApB,EAAP;AACD,GA9CkC;AA+CnC,KA/CmC,eA+C/B,EA/C+B,EA+ClB;AACf,QAAM,KAAK,IAAI,IAAJ,EAAU,EAAC,MAAM,KAAP,EAAV,CAAX;AACA,OAAG,MAAH,CAAU,EAAV;;AAFe,uCAAN,IAAM;AAAN,UAAM;AAAA;;AAGf,WAAO,KAAK,OAAL,cAAa,EAAb,SAAoB,IAApB,EAAP;AACD,GAnDkC;AAoDnC,SApDmC,mBAoD3B,MApD2B,EAoDnB,EApDmB,EAoDf;AAAA;;AAClB,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,UAAI,MAAM,OAAO,EAAP,KAAc,QAApB,IAAgC,CAAC,OAAO,KAAP,CAAa,EAAlD,EAAsD;AACpD,eAAO,KAAP,CAAa,EAAb,GAAkB,EAAlB;AACD;AACD,UAAI,CAAC,OAAO,KAAP,CAAa,EAAlB,EAAsB;AACpB,eAAO,KAAP,CAAa,EAAb,GAAkB,OAAK,EAAL,EAAlB;AACD;;AAED,aAAK,QAAL,CAAc,GAAd,CAAkB,OAAO,KAAP,CAAa,EAA/B,EAAmC,CAAC,OAAD,EAAU,MAAV,CAAnC;;AAEA,aAAK,MAAL,CAAY,IAAZ,CAAiB,MAAjB;AACD,KAXM,CAAP;AAYD;AAjEkC,CAApB,CAAjB;;;ACJA;;AAEA,IAAM,SAAS,QAAQ,cAAR,CAAf;;AAEA,OAAO,OAAP,GAAiB,OAAO,WAAP,EAAoB;AACnC,SAAO,IAD4B;;AAGnC,WAHmC,uBAGvB;AAAA;;AAAA,QACH,MADG,GACO,IADP,CACH,MADG;;AAEV,SAAK,IAAL,CAAU,cAAV;AACA,SAAK,QAAL,GAAgB,WAAW,YAAM;AAC/B,UAAI,OAAO,MAAP,KAAkB,SAAtB,EAAiC;AAC/B;AACD;AACD;AACA;AAL+B,UAMxB,MANwB,GAMd,MANc,CAMxB,MANwB;;AAO/B,aAAO,MAAP,GAAgB,SAAhB;;AAEA,aACG,KADH,CACS,OAAO,YADhB,EAEG,IAFH,CAEQ,YAAM;AACV,cAAK,IAAL,CAAU,aAAV;AACD,OAJH,EAKG,KALH,CAKS;AAAA,eAAM,MAAK,SAAL,EAAN;AAAA,OALT,EAMG,KANH,CAMS,eAAO;AACZ,cAAK,IAAL,CAAU,OAAV,EAAmB,GAAnB;AACD,OARH;AASA,aAAO,MAAP,GAAgB,MAAhB;AACD,KAnBe,EAmBb,KAAK,KAnBQ,CAAhB;AAoBD,GA1BkC;AA4BnC,SA5BmC,qBA4BzB;AAAA,QACD,MADC,GAC8B,IAD9B,CACD,MADC;AAAA,QACO,SADP,GAC8B,IAD9B,CACO,SADP;AAAA,QACkB,QADlB,GAC8B,IAD9B,CACkB,QADlB;;AAER,WAAO,cAAP,CAAsB,YAAtB,EAAoC,UAAU,UAA9C;AACA,iBAAa,QAAb;AACD,GAhCkC;AAkCnC,OAlCmC,mBAkC3B;AAAA;;AACN,QAAM,YAAY,EAAlB;AACA,cAAU,UAAV,GAAuB,YAAM;AAC3B,aAAK,SAAL;AACD,KAFD;AAGA,cAAU,MAAV,GAAmB,YAAM;AACvB,aAAK,MAAL,CAAY,EAAZ,CAAe,YAAf,EAA6B,UAAU,UAAvC;AACD,KAFD;AAGA,SAAK,SAAL,GAAiB,SAAjB;AACA,SAAK,MAAL,CAAY,IAAZ,CAAiB,QAAjB,EAA2B,UAAU,MAArC;AACD,GA5CkC;AA8CnC,MA9CmC,kBA8C5B;AACL,SAAK,OAAL;AACA,SAAK,MAAL,CAAY,cAAZ,CAA2B,QAA3B,EAAqC,KAAK,SAAL,CAAe,MAApD;AACD;AAjDkC,CAApB,CAAjB;;;ACJA;;AAEA,IAAM,OAAO,QAAQ,gBAAR,CAAb;AACA,IAAM,OAAO,QAAQ,SAAR,CAAb;;AAEA,OAAO,OAAP,CAAe,IAAf,GAAsB,gBAAtB;AACA,OAAO,OAAP,CAAe,MAAf,GAAwB,SAAS,MAAT,CAAgB,MAAhB,EAAwB;AAC9C,MAAM,OAAO,OAAO,MAAP,CAAc,IAAd,CAAb;AACA,OAAK,GAAL,CAAS,IAAT;AACA,SAAO;AACL;AADK,GAAP;AAGD,CAND;;;ACNA;;AAEA,IAAM,OAAO,QAAQ,YAAR,CAAb;AACA,IAAM,OAAO,QAAQ,SAAR,CAAb;;AAEA,OAAO,OAAP,CAAe,IAAf,GAAsB,YAAtB;AACA,OAAO,OAAP,CAAe,MAAf,GAAwB,SAAS,MAAT,CAAgB,MAAhB,EAAwB;AAC9C,MAAM,OAAO,OAAO,MAAP,CAAc,IAAd,CAAb;AACA,OAAK,GAAL,CAAS,IAAT;AACA,SAAO;AACL;AADK,GAAP;AAGD,CAND;;;ACNA;;;;;;;;eAEyB,QAAQ,WAAR,C;IAAlB,M,YAAA,M;IAAQ,M,YAAA,M;;AACf,IAAM,SAAS,QAAQ,cAAR,CAAf;AACA,IAAM,MAAM,QAAQ,WAAR,CAAZ;AACA,IAAM,iBAAiB,QAAQ,oBAAR,CAAvB;;gBACoB,QAAQ,kBAAR,C;IAAb,S,aAAA,S;;AACP,IAAM,cAAc,QAAQ,gBAAR,CAApB;;AAEA,IAAM,KAAK,kCAAX;;IAEM,S;;;AACJ,uBAAqB;AAAA;;AAAA;;AAAA,sCAAN,IAAM;AAAN,UAAM;AAAA;;AAAA,iJACV,IADU;;AAEnB,UAAK,IAAL,GAAY,WAAZ;AAFmB;AAGpB;;;EAJqB,S;;AAOxB,SAAS,KAAT,CAAe,QAAf,EAAyB;AACvB,SAAO,SAAS,QAAT,CAAkB,YAAlB,EAAgC,EAAhC,CAAP;AACD;;AAED,SAAS,iBAAT,CAA2B,QAA3B,EAAqC;AACnC,SAAO,SAAS,QAAT,CAAkB,YAAlB,EAAgC,EAAhC,EAAoC,QAApC,CAA6C,GAA7C,CAAiD;AAAA,WAAM,GAAG,IAAH,EAAN;AAAA,GAAjD,CAAP;AACD;;AAED,OAAO,OAAP,GAAiB,OACf,MADe,EAEf;AACE,OADF,mBACU;AAAA;;AACN,SAAK,IAAL,GAAY,IAAI,WAAJ,EAAZ;AACA,SAAK,aAAL,GAAqB;AACnB,YAAM,MADa;AAEnB,gBAAU,IAFS;AAGnB,kBAHmB;AAInB,eAAS,IAJU;AAKnB,WAAK,aAAC,MAAD,EAAS,QAAT,EAAsB;AACzB,eAAO,OAAK,WAAL,CAAiB,QAAjB,CAAP;AACD;AAPkB,KAArB;AASA,SAAK,OAAL,CAAa,iBAAb,EAAgC,GAAhC,CAAoC,KAAK,aAAzC;AACD,GAbH;AAeE,MAfF,kBAeS;AACL,WAAO,KAAK,IAAZ;AACA,SAAK,OAAL,CAAa,iBAAb,EAAgC,MAAhC,CAAuC,KAAK,aAA5C;AACA,WAAO,KAAK,aAAZ;AACA,WAAO,KAAK,IAAZ;AACD,GApBH;AAsBE,KAtBF,iBAsBe;AAAA;;AACX,kBAAK,IAAL,EAAU,GAAV;AACD,GAxBH;AA0BE,aA1BF,uBA0Bc,QA1Bd,EA0BwB;AAAA;;AACpB,QAAM,UAAU,kBAAkB,QAAlB,CAAhB;AACA,QAAM,SAAS,KAAK,mBAAL,CAAyB,OAAzB,CAAf;AACA;;AAEA,WAAO,QAAQ,OAAR,CAAgB,KAAK,YAAL,CAAkB,MAAlB,CAAhB,EAA2C,IAA3C,CAAgD,gBAAQ;AAC7D,aAAK,IAAL,GAAY,IAAZ;AACA,aAAO,OAAK,eAAL,CAAqB,IAArB,EAA2B,QAA3B,CAAP;AACD,KAHM,CAAP;AAID,GAnCH;AAqCE,iBArCF,2BAqCkB,IArClB,EAqCwB,QArCxB,EAqCkC;AAAA;;AAC9B,SAAK,MAAL,CAAY,OAAZ,CAAoB,cAApB;;AAEA,QAAI,SAAS,WAAb,EAA0B;AACxB,aAAO,KAAK,YAAL,CAAkB,IAAlB,EAAwB,EAAxB,EAA4B,QAA5B,CAAP;AACD;;AAED,WAAO,KAAK,MAAL,CAAY,QAAZ,CACL,cADK,EAEL,UAAC,QAAD,EAAW,QAAX,EAAwB;AACtB,aAAO,OAAK,YAAL,CAAkB,IAAlB,EAAwB,EAAC,kBAAD,EAAW,kBAAX,EAAxB,EAA8C,QAA9C,CAAP;AACD,KAJI,EAKL,IALK,CAAP;AAOD,GAnDH;AAqDE,wBArDF,oCAqD2B;AACvB,WAAO,KAAK,IAAL,CAAU,MAAV,CAAiB,GAAjB,CAAqB;AAAA,UAAE,IAAF,SAAE,IAAF;AAAA,aAAY,IAAZ;AAAA,KAArB,CAAP;AACD,GAvDH;AAyDE,qBAzDF,+BAyDsB,KAzDtB,EAyD6B;AACzB,QAAM,YAAY,KAAK,sBAAL,EAAlB;AACA,WAAO,MAAM,MAAN,CAAa,gBAAQ;AAC1B,aAAO,UAAU,OAAV,CAAkB,IAAlB,IAA0B,CAAC,CAAlC;AACD,KAFM,CAAP;AAGD,GA9DH;AAgEE,cAhEF,wBAgEe,MAhEf,EAgEuB;AACnB,WAAO,OAAO,CAAP,CAAP,CADmB,CACF;AAClB,GAlEH;AAoEE,eApEF,yBAoEgB,IApEhB,EAoEsB;AAClB,WAAO,KAAK,IAAL,CAAU,MAAV,CAAiB,CAAC,IAAD,CAAjB,CAAP;AACD,GAtEH;AAwEE,cAxEF,wBAwEe,QAxEf,EAwEyB,WAxEzB,EAwEsC;AAAA;;AAClC,QAAM,OAAO,KAAK,aAAL,CAAmB,QAAnB,CAAb;AACA,QAAI,CAAC,IAAL,EAAW;AACT,aAAO,QAAQ,MAAR,CAAe,IAAI,KAAJ,CAAU,yBAAV,CAAf,CAAP;AACD;;AAJiC,QAM3B,MAN2B,GAMjB,KAAK,MAAL,CAAY,OANK,CAM3B,MAN2B;;AAOlC,QAAM,QAAQ,OAAO,MAAP,CACZ;AACE,gBAAU,IADZ;AAEE,gBAAU,IAFZ;AAGE,cAAQ,MAHV;AAIE,YAAM,MAJR;AAKE,aAAO,MALT;AAME,mBAAa,MANf;AAOE,mBAAa;AAPf,KADY,EAUZ,WAVY,CAAd;;AAaA,SAAK,MAAL,CAAY,OAAZ,CAAoB,gBAApB;;AAEA,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,UAAM,UAAU,SAAV,OAAU,UAAW;AACzB,YAAI,QAAQ,KAAR,CAAc,KAAd,KAAwB,EAA5B,EAAgC;AAC9B;AACD;;AAED,YAAI,QAAQ,IAAR,KAAiB,WAArB,EAAkC;AAChC,eAAK,SAAL,CAAe,OAAO,QAAQ,IAAR,EAAP,CAAf;AACA,cAAM,OAAO,KAAK,QAAL,CAAc,KAAd,CAAb;AACA,iBAAK,MAAL,CAAY,IAAZ,CACE,IACE,UADF,EAEE,EAAC,OAAO,EAAR,EAAY,WAAW,KAAK,IAA5B,EAFF,EAGE,OAAO,IAAP,KAAgB,QAAhB,GAA2B,OAAO,IAAP,CAA3B,GAA0C,EAH5C,CADF;AAOA;AACD;;AAED,YAAI,QAAQ,IAAR,KAAiB,SAArB,EAAgC;AAC9B,iBACE,IAAI,SAAJ,CACE,QAAQ,QAAR,CAAiB,CAAjB,EAAoB,IADtB,EAEE,QAAQ,YAAR,CAAqB,MAArB,KAAgC,EAFlC,EAGE,OAHF,CADF;AAOD,SARD,MAQO,IAAI,QAAQ,IAAR,KAAiB,SAArB,EAAgC;AACrC;AACA,iBAAK,MAAL,CAAY,OAAZ,CAAoB,eAApB;AACD;;AAED,eAAK,MAAL,CAAY,cAAZ,CAA2B,OAA3B,EAAoC,OAApC;AACD,OAhCD;AAiCA,aAAK,MAAL,CAAY,EAAZ,CAAe,OAAf,EAAwB,OAAxB;;AAEA,UAAI,KAAK,WAAT,EAAsB;AACpB,eAAK,MAAL,CAAY,IAAZ,CACE,IACE,MADF,EAEE,EAAC,OAAO,EAAR,EAAY,WAAW,KAAK,IAA5B,EAFF,EAGE,OAAO,KAAK,QAAL,CAAc,KAAd,CAAP,CAHF,CADF;AAOD;AACF,KA7CM,CAAP;AA8CD;AA5IH,CAFe,EAgJf,CAAC,cAAD,CAhJe,CAAjB;;;;AC1BA;;AAEA,OAAO,OAAP,CAAe,MAAf,GAAwB,SAAS,MAAT,CAAgB,MAAhB,EAAwB;AAC9C,MAAI,CAAC,OAAO,MAAZ,EAAoB;AAClB,WAAO,OAAO,IAAP,CAAY,MAAZ,CAAP;AACD;AACD,SAAO,OAAO,IAAP,CAAY,MAAZ,EAAoB,MAApB,EAA4B,QAA5B,CAAqC,QAArC,CAAP;AACD,CALD;;AAOA,OAAO,OAAP,CAAe,MAAf,GAAwB,SAAS,MAAT,CAAgB,MAAhB,EAAwB;AAC9C,MAAI,CAAC,OAAO,MAAZ,EAAoB;AAClB,WAAO,OAAO,IAAP,CAAY,MAAZ,CAAP;AACD;AACD,SAAO,OAAO,IAAP,CAAY,MAAZ,EAAoB,QAApB,EAA8B,QAA9B,CAAuC,MAAvC,CAAP;AACD,CALD;;;;;ACTA;;eAEsB,QAAQ,cAAR,C;IAAf,M,YAAA,M;IAAQ,G,YAAA,G;;AACf,IAAM,iBAAiB,QAAQ,oBAAR,CAAvB;AACA,IAAM,WAAW,QAAQ,cAAR,CAAjB;;AAEA,IAAM,KAAK,qCAAX;;AAEA,SAAS,KAAT,CAAe,QAAf,EAAyB;AACvB,MAAM,UAAU,SAAS,QAAT,CAAkB,SAAlB,EAA6B,EAA7B,CAAhB;AACA,SAAO,QAAQ,OAAR,KAAoB,CAAC,QAAQ,QAAR,CAAiB,UAAjB,CAA5B;AACD;;AAED,OAAO,OAAP,GAAiB,OACf,uBADe,EAEf;AACE,OADF,mBACU;AAAA;;AACN,QAAM,gBAAgB;AACpB,YAAM,uBADc;AAEpB,gBAAU,IAFU;AAGpB,kBAHoB;AAIpB,WAAK;AAAA,eAAM,MAAK,gBAAL,EAAN;AAAA;AAJe,KAAtB;AAMA,SAAK,OAAL,CAAa,iBAAb,EAAgC,GAAhC,CAAoC,aAApC;AACD,GATH;AAUE,kBAVF,8BAUqB;AACjB,WAAO,KAAK,MAAL,CAAY,OAAZ,CAAoB,WAApB,EAAiC,GAAjC,CACL,IAAI,SAAJ,EAAe,qCAAf,CADK,CAAP;AAGD;AAdH,CAFe,EAkBf,CAAC,cAAD,EAAiB,QAAjB,CAlBe,CAAjB;AAoBA,OAAO,OAAP,CAAe,KAAf,GAAuB,KAAvB;;;ACjCA;;AAEA;;;;;;;AAOA,IAAM,SAAS,QAAQ,cAAR,CAAf;;AAEA,OAAO,OAAP,GAAiB,OAAO,iBAAP,EAA0B;AACzC,OADyC,mBACjC;AAAA;;AACN,SAAK,QAAL,GAAgB,EAAhB;;AADM,QAGC,MAHD,GAGW,IAHX,CAGC,MAHD;;AAIN,SAAK,OAAL,GAAe,cAAM;AACnB,UAAI,GAAG,IAAH,KAAY,iBAAhB,EAAmC;AACjC;AACD;;AAED,UAAM,iBAAiB,MAAK,cAAL,CAAoB,EAApB,CAAvB;AACA,UAAI,eAAe,MAAf,KAA0B,CAA9B,EAAiC;AAC/B;AACD;;AAED,eAAS,OAAT,CAAiB,CAAjB,EAAoB;AAClB,YAAM,UAAU,eAAe,CAAf,CAAhB;AACA,eAAO,QACJ,GADI,CACA,MADA,EACQ,EADR,EAEJ,IAFI,CAEC,YAAM;AACV,cAAI,QAAQ,OAAZ,EAAqB;AACnB,mBAAO,OAAO,OAAP,EAAP;AACD,WAFD,MAEO,IAAI,MAAM,eAAe,MAAf,GAAwB,CAAlC,EAAqC;AAC1C,gBAAI,OAAO,GAAX,EAAgB,OAAO,OAAP,CAAe,QAAf,EAAyB,OAAO,GAAhC;AACjB,WAFM,MAEA;AACL,oBAAQ,IAAI,CAAZ;AACD;AACF,SAVI,EAWJ,KAXI,CAWE;AAAA,iBAAO,OAAO,IAAP,CAAY,OAAZ,EAAqB,GAArB,CAAP;AAAA,SAXF,CAAP;AAYD;;AAED,aAAO,QAAQ,CAAR,CAAP;AACD,KA3BD;;AA6BA,WAAO,EAAP,CAAU,OAAV,EAAmB,KAAK,OAAxB;AACD,GAnCwC;AAqCzC,MArCyC,kBAqClC;AACL,WAAO,KAAK,QAAZ;AACA,SAAK,MAAL,CAAY,GAAZ,CAAgB,OAAhB,EAAyB,KAAK,OAA9B;AACA,WAAO,KAAK,OAAZ;AACD,GAzCwC;AA2CzC,gBA3CyC,0BA2C1B,EA3C0B,EA2CtB;AAAA;;AACjB,WAAO,KAAK,QAAL,CACJ,MADI,CACG;AAAA,aAAK,EAAE,KAAF,CAAQ,EAAR,EAAY,OAAK,MAAjB,KAA4B,OAAO,EAAE,QAAT,KAAsB,QAAvD;AAAA,KADH,EAEJ,IAFI,CAEC,UAAC,CAAD,EAAI,CAAJ,EAAU;AACd,aAAO,EAAE,QAAF,GAAa,EAAE,QAAtB;AACD,KAJI,CAAP;AAKD,GAjDwC;AAmDzC,KAnDyC,qBAmDE;AAAA,QAAtC,IAAsC,QAAtC,IAAsC;AAAA,QAAhC,QAAgC,QAAhC,QAAgC;AAAA,QAAtB,GAAsB,QAAtB,GAAsB;AAAA,QAAjB,KAAiB,QAAjB,KAAiB;AAAA,QAAV,OAAU,QAAV,OAAU;;AACzC,SAAK,QAAL,CAAc,IAAd,CAAmB,EAAC,UAAD,EAAO,kBAAP,EAAiB,QAAjB,EAAsB,YAAtB,EAA6B,gBAA7B,EAAnB;AACD;AArDwC,CAA1B,CAAjB;;;ACXA;;AAEA,IAAM,sBAAsB,QAAQ,kBAAR,CAA5B;;AAEA,OAAO,OAAP,CAAe,IAAf,GAAsB,WAAtB;AACA,OAAO,OAAP,CAAe,MAAf,GAAwB,SAAS,MAAT,CAAgB,MAAhB,EAAwB;AAC9C,SAAO,UAAP,CAAkB,IAAlB,CAAuB,mBAAvB;AACA,SAAO;AACL;AADK,GAAP;AAGD,CALD;;;ACLA;;;;;;;;;;;;AAEA,IAAM,SAAS,QAAQ,UAAR,CAAf;AACA,IAAM,aAAa,QAAQ,kBAAR,CAAnB;AACA,IAAM,MAAM,QAAQ,WAAR,CAAZ;AACA,IAAM,eAAe,QAAQ,gBAAR,CAArB;;AAEA,IAAM,aAAa,qCAAnB;;AAEA;;;;;;IAMM,mB;;;;;;;;;;;;AACJ;oCACgB;AACd,aAAO,IAAI,IAAI,OAAR,CAAgB,OAAhB,EAAyB;AAC9B,eAAO;AADuB,OAAzB,CAAP;AAGD;;AAED;;;;oCACgB;AACd,UAAM,4IAAN;AACA,SAAG,IAAH,GAAU,MAAV;AACA,SAAG,KAAH,CAAS,KAAT,GAAiB,UAAjB;AACA,aAAO,EAAP;AACD;;;qCAEgB,G,EAAK;AACpB,aAAO,IAAI,KAAJ,CAAU,YAAV,IAA0B,GAA1B,GAAgC,SAAvC;AACD;;;;EAlB+B,U;;AAqBlC,oBAAoB,SAApB,CAA8B,MAA9B,GAAuC,MAAvC;AACA,oBAAoB,SAApB,CAA8B,EAA9B,GAAmC,eAAnC;AACA,oBAAoB,SAApB,CAA8B,MAA9B,GAAuC,YAAvC;;AAEA,OAAO,OAAP,GAAiB,mBAAjB;;;ACxCA;;;;;;;;;;eAEiB,QAAQ,WAAR,C;IAAV,M,YAAA,M;;AAEP,OAAO,OAAP;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,qCACmB,CAAE;AADrB;AAAA;AAAA,iCAEe,OAFf,EAEwB,MAFxB,EAEgC;AAC5B,UAAI,WAAW,CAAf,EAAkB;AAChB,YAAI,QAAQ,EAAR,CAAW,MAAX,EAAmB,qCAAnB,CAAJ,EAA+D;AAC7D,eAAK,IAAL,CAAU,OAAV,EAAmB,OAAnB;AACD,SAFD,MAEO,IAAI,QAAQ,EAAR,CAAW,OAAX,EAAoB,qCAApB,CAAJ,EAAgE;AACrE,eAAK,IAAL,CAAU,KAAV,EAAiB,OAAjB;AACD,SAFM,MAEA;AACL,eAAK,IAAL,CAAU,SAAV,EAAqB,OAArB;AACD;AACF;AACF;AAZH;;AAAA;AAAA,EAA4C,MAA5C;;;;ACJA;;;;;;;;;;AAEA,IAAM,KAAK,QAAQ,IAAR,CAAX;AACA,IAAM,YAAY,OAAO,SAAP,IAAoB,EAAtC;AACA,IAAM,eAAe,QAAQ,QAAR,CAArB;;IAEM,M;;;AACJ,oBAAc;AAAA;;AAAA;;AAEZ,UAAK,SAAL,GAAiB,OAAO,MAAP,CAAc,IAAd,CAAjB;AAFY;AAGb;;;;4BAEO,G,EAAK,E,EAAI;AACf,WAAK,GAAL,GAAW,GAAX;AACA,WAAK,aAAL,CAAmB,IAAI,SAAJ,CAAc,GAAd,EAAmB,CAAC,MAAD,CAAnB,CAAnB,EAAiD,EAAjD;AACD;;;kCAEa,M,EAAQ,E,EAAI;AAAA;;AACxB,UAAM,OAAQ,KAAK,MAAL,GAAc,MAA5B;AADwB,UAEjB,SAFiB,GAEJ,IAFI,CAEjB,SAFiB;;AAGxB,gBAAU,IAAV,GAAiB,YAAM;AACrB,eAAK,IAAL,CAAU,SAAV;AACA,YAAI,EAAJ,EAAQ;AACN;AACD;AACF,OALD;AAMA,gBAAU,OAAV,GAAoB;AAAA,YAAE,IAAF,QAAE,IAAF;AAAA,eAAY,OAAK,IAAL,CAAU,MAAV,EAAkB,IAAlB,CAAZ;AAAA,OAApB;AACA,gBAAU,KAAV,GAAkB,eAAO;AACvB,eAAK,IAAL,CACE,OADF,EAEE,eAAe,KAAf,GAAuB,GAAvB,GAA6B,IAAI,KAAJ,uBAA8B,OAAK,GAAnC,CAF/B;AAID,OALD;AAMA,gBAAU,KAAV,GAAkB,iBAAoB;AAAA,YAAlB,IAAkB,SAAlB,IAAkB;AAAA,YAAZ,MAAY,SAAZ,MAAY;;AACpC,eAAK,aAAL;AACA,eAAK,IAAL,CAAU,OAAV,EAAmB,EAAC,UAAD,EAAO,cAAP,EAAnB;AACD,OAHD;;AAKA,WAAK,gBAAL,CAAsB,MAAtB,EAA8B,UAAU,IAAxC;AACA,WAAK,gBAAL,CAAsB,SAAtB,EAAiC,UAAU,OAA3C;AACA,WAAK,gBAAL,CAAsB,OAAtB,EAA+B,UAAU,KAAzC;AACA,WAAK,gBAAL,CAAsB,OAAtB,EAA+B,UAAU,KAAzC;AACD;;;oCAEe;AACd,aAAO,KAAK,GAAZ;AADc,UAEP,MAFO,GAEc,IAFd,CAEP,MAFO;AAAA,UAEC,SAFD,GAEc,IAFd,CAEC,SAFD;;AAGd,aAAO,mBAAP,CAA2B,SAA3B,EAAsC,OAAtC,CAA8C,aAAK;AACjD,eAAO,mBAAP,CAA2B,CAA3B,EAA8B,UAAU,CAAV,CAA9B;AACA,eAAO,UAAU,CAAV,CAAP;AACD,OAHD;AAIA,aAAO,KAAK,MAAZ;AACD;;;0BAEK;AACJ,WAAK,MAAL,CAAY,KAAZ;AACD;;;0BAEK,I,EAAM,E,EAAI;AACd,UAAI,cAAc,EAAlB,EAAsB;AACpB,aAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,EAAuB,EAAvB;AACD,OAFD,MAEO;AACL,aAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB;AACA;AACD;AACF;;;;EA3DkB,Y;;AA8DrB,OAAO,OAAP,GAAiB,MAAjB;;;;;ACpEA;;AAEA,IAAM,IAAI,QAAQ,SAAR,CAAV;AACA,IAAM,UAAU,QAAQ,eAAR,CAAhB;AACA,IAAM,SAAS,QAAQ,cAAR,CAAf;;eAMI,QAAQ,gBAAR,C;IAJF,S,YAAA,S;IACA,W,YAAA,W;IACA,a,YAAA,a;IACA,e,YAAA,e;;AAGF,SAAS,GAAT,GAAsB;AACpB,SAAO,6BAAP;AACD;;AAED,UAAU,OAAO,OAAP,GAAiB,GAA3B;;AAEA,OAAO,MAAP,CAAc,OAAd,EAAuB;AACrB,MADqB;AAErB,kBAFqB;AAGrB,gBAHqB;AAIrB,sBAJqB;AAKrB,0BALqB;AAMrB,8BANqB;AAOrB;AAPqB,CAAvB;;;AClBA;;;;;;;;;;;;AAEA,IAAM,WAAW,QAAQ,iBAAR,CAAjB;;IAEM,O;;;;;;;;;;;2BACG,K,EAAO;AAAA;;AACZ,cAAQ,MAAM,OAAN,CAAc,KAAd,IAAuB,KAAvB,GAA+B,CAAC,KAAD,CAAvC;AACA,YAAM,OAAN,CAAc,gBAAQ;AACpB,eAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB;AACA,YAAI,QAAO,IAAP,yCAAO,IAAP,OAAgB,QAApB,EAA8B;AAC5B,eAAK,MAAL;AACD;AACF,OALD;AAMD;;;4BAEO,K,EAAO;AAAA;;AACb,cAAQ,MAAM,OAAN,CAAc,KAAd,IAAuB,KAAvB,GAA+B,CAAC,KAAD,CAAvC;AACA,YAAM,OAAN,CAAc,gBAAQ;AACpB,eAAK,QAAL,CAAc,OAAd,CAAsB,IAAtB;AACA,YAAI,QAAO,IAAP,yCAAO,IAAP,OAAgB,QAApB,EAA8B;AAC5B,eAAK,MAAL;AACD;AACF,OALD;AAMD;;;;EAnBmB,Q;;AAsBtB,OAAO,OAAP,GAAiB,OAAjB;;;AC1BA;;;;;;;;;;AAEA,IAAM,YAAY,QAAQ,qBAAR,CAAlB;AACA,IAAM,UAAU,QAAQ,WAAR,CAAhB;AACA,IAAM,eAAe,QAAQ,QAAR,CAArB;;IAEM,Q;;;AACJ,sBAAqB;AAAA;;AAAA;;AAAA,sCAAN,IAAM;AAAN,UAAM;AAAA;;AAAA,+IACV,IADU;;AAEnB,UAAK,IAAL,GAAY,UAAZ;AAFmB;AAGpB;;;EAJoB,K;;IAOjB,M;;;AACJ,oBAAc;AAAA;;AAAA;;AAEZ,QAAM,SAAS,IAAI,SAAJ,EAAf;AACA,QAAM,QAAQ,EAAd;AACA,QAAI,eAAJ;;AAEA,WAAO,EAAP,CAAU,cAAV,EAA0B,UAAC,IAAD,EAAO,KAAP,EAAiB;AACzC,UAAM,QAAQ,IAAI,OAAJ,CAAY,IAAZ,EAAkB,KAAlB,CAAd;AACA,UAAI,MAAJ,EAAY;AACV,eAAO,MAAP,CAAc,KAAd;AACD;AACD,aAAK,cAAL,CAAoB,KAApB,EAA2B,MAA3B;AACA,aAAK,IAAL,CAAU,cAAV,EAA0B,KAA1B;AACA,YAAM,IAAN,CAAW,MAAX;AACA,eAAS,KAAT;AACD,KATD;AAUA,WAAO,EAAP,CAAU,YAAV,EAAwB,gBAAQ;AAC9B,UAAI,SAAS,OAAO,IAApB,EAA0B;AACxB,eAAK,YAAL,CAAkB,MAAlB,EAA0B,MAAM,MAAhC;AACA,eAAK,IAAL,CAAU,YAAV,EAAwB,MAAxB;AACA,iBAAS,MAAM,GAAN,EAAT;AACD,OAJD,MAIO;AACL;AACA,eAAK,IAAL,CAAU,OAAV,EAAmB,IAAI,QAAJ,CAAgB,OAAO,IAAvB,sBAAnB;AACD;AACF,KATD;;AAWA,WAAO,EAAP,CAAU,MAAV,EAAkB,eAAO;AACvB,aAAK,MAAL,CAAY,GAAZ,EAAiB,MAAjB;AACD,KAFD;AAGA,WAAK,MAAL,GAAc,MAAd;AA9BY;AA+Bb;;;;mCACc,O,EAAS,M,EAAQ;AAC9B,UAAI,CAAC,MAAL,EAAa;AACX,aAAK,IAAL,CAAU,OAAV,EAAmB,OAAnB;AACD;AACF;;;iCACY,O,EAAS,M,EAAQ;AAC5B,UAAI,WAAW,CAAf,EAAkB;AAChB,aAAK,IAAL,CAAU,SAAV,EAAqB,OAArB;AACD,OAFD,MAEO,IAAI,WAAW,CAAf,EAAkB;AACvB,aAAK,IAAL,CAAU,KAAV,EAAiB,OAAjB;AACD;AACF;;;2BACM,G,EAAK,O,EAAS;AACnB,UAAI,CAAC,OAAL,EAAc;AACZ,aAAK,IAAL,CAAU,OAAV,EAAmB,IAAI,QAAJ,CAAgB,GAAhB,uBAAnB;AACA;AACD;AACD,cAAQ,CAAR,CAAU,GAAV;AACD;;;0BACK,I,EAAM;AACV,WAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB;AACD;;;wBACG,I,EAAM;AACR,UAAI,IAAJ,EAAU;AACR,aAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB;AACD;AACF;;;;EA3DkB,Y;;AA8DrB,OAAO,QAAP,GAAkB,QAAlB;;AAEA,OAAO,OAAP,GAAiB,MAAjB;;;AC7EA;;AAEA,IAAM,UAAU,QAAQ,WAAR,CAAhB;;AAEA,SAAS,MAAT,CAAgB,EAAhB,EAAoB,KAApB,EAA2B;AACzB,MAAI,iBAAiB,OAArB,EAA8B;AAC5B,OAAG,MAAH,CAAU,KAAV;AACD,GAFD,MAEO,IAAI,MAAM,OAAN,CAAc,KAAd,CAAJ,EAA0B;AAC/B,UAAM,OAAN,CAAc;AAAA,aAAK,OAAO,EAAP,EAAW,CAAX,CAAL;AAAA,KAAd;AACD,GAFM,MAEA,IAAI,UAAU,IAAV,IAAkB,UAAU,SAAhC,EAA2C;AAChD,OAAG,MAAH,CAAU,OAAO,KAAP,CAAV;AACD;AACF;;AAED,SAAS,CAAT,CAAW,IAAX,EAAiB,KAAjB,EAAqC;AACnC,MAAM,KAAK,IAAI,OAAJ,CAAY,IAAZ,EAAkB,KAAlB,CAAX;;AADmC,oCAAV,QAAU;AAAV,YAAU;AAAA;;AAEnC,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,SAAS,MAA7B,EAAqC,GAArC,EAA0C;AACxC,WAAO,EAAP,EAAW,SAAS,CAAT,CAAX;AACD;AACD,SAAO,EAAP;AACD;;AAED,OAAO,OAAP,GAAiB,CAAjB;;;ACtBA;;AAEA,IAAM,SAAS,QAAQ,cAAR,CAAf;;eACmB,QAAQ,mBAAR,C;IAAZ,G,YAAA,G;IAAK,G,YAAA,G;;AAEZ,OAAO,OAAP,CAAe,MAAf,GAAwB,MAAxB;AACA,OAAO,OAAP,CAAe,GAAf,GAAqB,GAArB;AACA,OAAO,OAAP,CAAe,GAAf,GAAqB,GAArB;;;ACPA;;;;;;;;AAEA,IAAM,aAAa,QAAQ,mBAAR,EAA6B,MAAhD;AACA,IAAM,UAAU,QAAQ,WAAR,CAAhB;;IAEM,M;;;AACJ,oBAAqB;AAAA;;AAAA;;AAAA,sCAAN,IAAM;AAAN,UAAM;AAAA;;AAAA,2IACV,IADU;;AAEnB,WAAO,IAAP,CAAY,OAAZ,EAAqB,OAArB,CAA6B,gBAAQ;AACnC,UAAM,SAAS,QAAQ,IAAR,CAAf;AACA;AACA,UAAI,CAAC,OAAO,MAAZ,EAAoB;AAClB;AACD;AACD,YAAK,MAAL,CAAY,MAAZ;AACD,KAPD;AAFmB;AAUpB;;;EAXkB,U;;AAcrB,OAAO,OAAP,GAAiB,MAAjB;;;ACnBA;;AAEA,QAAQ,iBAAR,IAA6B,QAAQ,+BAAR,CAA7B;AACA,QAAQ,IAAR,GAAe,QAAQ,oBAAR,CAAf;AACA,QAAQ,IAAR,GAAe,QAAQ,oBAAR,CAAf;AACA,QAAQ,YAAR,IAAwB,QAAQ,0BAAR,CAAxB;AACA,QAAQ,gBAAR,IAA4B,QAAQ,8BAAR,CAA5B;AACA,QAAQ,SAAR,GAAoB,QAAQ,yBAAR,CAApB;AACA,QAAQ,GAAR,GAAc,QAAQ,mBAAR,CAAd;AACA,QAAQ,GAAR,GAAc,QAAQ,mBAAR,CAAd;AACA,QAAQ,SAAR,GAAoB,QAAQ,yBAAR,CAApB;AACA,QAAQ,QAAR,GAAmB,QAAQ,wBAAR,CAAnB;AACA,QACE,uBADF,IAEI,QAAQ,qCAAR,CAFJ",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "\"use strict\";\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJlbXB0eS5qcyIsInNvdXJjZXNDb250ZW50IjpbXX0=",
    "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n",
    "if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n",
    "'use strict'\n\nvar escape = require('./escape')\nvar escapeXML = escape.escapeXML\nvar escapeXMLText = escape.escapeXMLText\n\nvar equality = require('./equal')\nvar equal = equality.equal\nvar nameEqual = equality.name\nvar attrsEqual = equality.attrs\nvar childrenEqual = equality.children\n\nvar clone = require('./clone')\n\n/**\n * Element\n *\n * Attributes are in the element.attrs object. Children is a list of\n * either other Elements or Strings for text content.\n **/\nfunction Element (name, attrs) {\n  this.name = name\n  this.parent = null\n  this.children = []\n  this.attrs = {}\n  this.setAttrs(attrs)\n}\n\n/* Accessors */\n\n/**\n * if (element.is('message', 'jabber:client')) ...\n **/\nElement.prototype.is = function (name, xmlns) {\n  return (this.getName() === name) &&\n  (!xmlns || (this.getNS() === xmlns))\n}\n\n/* without prefix */\nElement.prototype.getName = function () {\n  if (this.name.indexOf(':') >= 0) {\n    return this.name.substr(this.name.indexOf(':') + 1)\n  } else {\n    return this.name\n  }\n}\n\n/**\n * retrieves the namespace of the current element, upwards recursively\n **/\nElement.prototype.getNS = function () {\n  if (this.name.indexOf(':') >= 0) {\n    var prefix = this.name.substr(0, this.name.indexOf(':'))\n    return this.findNS(prefix)\n  }\n  return this.findNS()\n}\n\n/**\n * find the namespace to the given prefix, upwards recursively\n **/\nElement.prototype.findNS = function (prefix) {\n  if (!prefix) {\n    /* default namespace */\n    if (this.attrs.xmlns) {\n      return this.attrs.xmlns\n    } else if (this.parent) {\n      return this.parent.findNS()\n    }\n  } else {\n    /* prefixed namespace */\n    var attr = 'xmlns:' + prefix\n    if (this.attrs[attr]) {\n      return this.attrs[attr]\n    } else if (this.parent) {\n      return this.parent.findNS(prefix)\n    }\n  }\n}\n\n/**\n * Recursiverly gets all xmlns defined, in the form of {url:prefix}\n **/\nElement.prototype.getXmlns = function () {\n  var namespaces = {}\n\n  if (this.parent) {\n    namespaces = this.parent.getXmlns()\n  }\n\n  for (var attr in this.attrs) {\n    var m = attr.match('xmlns:?(.*)')\n    if (this.attrs.hasOwnProperty(attr) && m) {\n      namespaces[this.attrs[attr]] = m[1]\n    }\n  }\n  return namespaces\n}\n\nElement.prototype.setAttrs = function (attrs) {\n  if (typeof attrs === 'string') {\n    this.attrs.xmlns = attrs\n  } else if (attrs) {\n    Object.keys(attrs).forEach(function (key) {\n      this.attrs[key] = attrs[key]\n    }, this)\n  }\n}\n\n/**\n * xmlns can be null, returns the matching attribute.\n **/\nElement.prototype.getAttr = function (name, xmlns) {\n  if (!xmlns) {\n    return this.attrs[name]\n  }\n\n  var namespaces = this.getXmlns()\n\n  if (!namespaces[xmlns]) {\n    return null\n  }\n\n  return this.attrs[[namespaces[xmlns], name].join(':')]\n}\n\n/**\n * xmlns can be null\n **/\nElement.prototype.getChild = function (name, xmlns) {\n  return this.getChildren(name, xmlns)[0]\n}\n\n/**\n * xmlns can be null\n **/\nElement.prototype.getChildren = function (name, xmlns) {\n  var result = []\n  for (var i = 0; i < this.children.length; i++) {\n    var child = this.children[i]\n    if (child.getName &&\n      (child.getName() === name) &&\n      (!xmlns || (child.getNS() === xmlns))) {\n      result.push(child)\n    }\n  }\n  return result\n}\n\n/**\n * xmlns and recursive can be null\n **/\nElement.prototype.getChildByAttr = function (attr, val, xmlns, recursive) {\n  return this.getChildrenByAttr(attr, val, xmlns, recursive)[0]\n}\n\n/**\n * xmlns and recursive can be null\n **/\nElement.prototype.getChildrenByAttr = function (attr, val, xmlns, recursive) {\n  var result = []\n  for (var i = 0; i < this.children.length; i++) {\n    var child = this.children[i]\n    if (child.attrs &&\n      (child.attrs[attr] === val) &&\n      (!xmlns || (child.getNS() === xmlns))) {\n      result.push(child)\n    }\n    if (recursive && child.getChildrenByAttr) {\n      result.push(child.getChildrenByAttr(attr, val, xmlns, true))\n    }\n  }\n  if (recursive) {\n    result = [].concat.apply([], result)\n  }\n  return result\n}\n\nElement.prototype.getChildrenByFilter = function (filter, recursive) {\n  var result = []\n  for (var i = 0; i < this.children.length; i++) {\n    var child = this.children[i]\n    if (filter(child)) {\n      result.push(child)\n    }\n    if (recursive && child.getChildrenByFilter) {\n      result.push(child.getChildrenByFilter(filter, true))\n    }\n  }\n  if (recursive) {\n    result = [].concat.apply([], result)\n  }\n  return result\n}\n\nElement.prototype.getText = function () {\n  var text = ''\n  for (var i = 0; i < this.children.length; i++) {\n    var child = this.children[i]\n    if ((typeof child === 'string') || (typeof child === 'number')) {\n      text += child\n    }\n  }\n  return text\n}\n\nElement.prototype.getChildText = function (name, xmlns) {\n  var child = this.getChild(name, xmlns)\n  return child ? child.getText() : null\n}\n\n/**\n * Return all direct descendents that are Elements.\n * This differs from `getChildren` in that it will exclude text nodes,\n * processing instructions, etc.\n */\nElement.prototype.getChildElements = function () {\n  return this.getChildrenByFilter(function (child) {\n    return child instanceof Element\n  })\n}\n\n/* Builder */\n\n/** returns uppermost parent */\nElement.prototype.root = function () {\n  if (this.parent) {\n    return this.parent.root()\n  }\n  return this\n}\nElement.prototype.tree = Element.prototype.root\n\n/** just parent or itself */\nElement.prototype.up = function () {\n  if (this.parent) {\n    return this.parent\n  }\n  return this\n}\n\n/** create child node and return it */\nElement.prototype.c = function (name, attrs) {\n  return this.cnode(new Element(name, attrs))\n}\n\nElement.prototype.cnode = function (child) {\n  this.children.push(child)\n  if (typeof child === 'object') {\n    child.parent = this\n  }\n  return child\n}\n\n/** add text node and return element */\nElement.prototype.t = function (text) {\n  this.children.push(text)\n  return this\n}\n\n/* Manipulation */\n\n/**\n * Either:\n *   el.remove(childEl)\n *   el.remove('author', 'urn:...')\n */\nElement.prototype.remove = function (el, xmlns) {\n  var filter\n  if (typeof el === 'string') {\n    /* 1st parameter is tag name */\n    filter = function (child) {\n      return !(child.is &&\n      child.is(el, xmlns))\n    }\n  } else {\n    /* 1st parameter is element */\n    filter = function (child) {\n      return child !== el\n    }\n  }\n\n  this.children = this.children.filter(filter)\n\n  return this\n}\n\nElement.prototype.clone = function () {\n  return clone(this)\n}\n\nElement.prototype.text = function (val) {\n  if (val && this.children.length === 1) {\n    this.children[0] = val\n    return this\n  }\n  return this.getText()\n}\n\nElement.prototype.attr = function (attr, val) {\n  if (typeof val !== 'undefined' || val === null) {\n    if (!this.attrs) {\n      this.attrs = {}\n    }\n    this.attrs[attr] = val\n    return this\n  }\n  return this.attrs[attr]\n}\n\n/* Serialization */\n\nElement.prototype.toString = function () {\n  var s = ''\n  this.write(function (c) {\n    s += c\n  })\n  return s\n}\n\nElement.prototype.toJSON = function () {\n  return {\n    name: this.name,\n    attrs: this.attrs,\n    children: this.children.map(function (child) {\n      return child && child.toJSON ? child.toJSON() : child\n    })\n  }\n}\n\nElement.prototype._addChildren = function (writer) {\n  writer('>')\n  for (var i = 0; i < this.children.length; i++) {\n    var child = this.children[i]\n    /* Skip null/undefined */\n    if (child || (child === 0)) {\n      if (child.write) {\n        child.write(writer)\n      } else if (typeof child === 'string') {\n        writer(escapeXMLText(child))\n      } else if (child.toString) {\n        writer(escapeXMLText(child.toString(10)))\n      }\n    }\n  }\n  writer('</')\n  writer(this.name)\n  writer('>')\n}\n\nElement.prototype.write = function (writer) {\n  writer('<')\n  writer(this.name)\n  for (var k in this.attrs) {\n    var v = this.attrs[k]\n    if (v != null) { // === null || undefined\n      writer(' ')\n      writer(k)\n      writer('=\"')\n      if (typeof v !== 'string') {\n        v = v.toString()\n      }\n      writer(escapeXML(v))\n      writer('\"')\n    }\n  }\n  if (this.children.length === 0) {\n    writer('/>')\n  } else {\n    this._addChildren(writer)\n  }\n}\n\nElement.prototype.nameEquals = function (el) {\n  return nameEqual(this, el)\n}\n\nElement.prototype.attrsEquals = function (el) {\n  return attrsEqual(this, el)\n}\n\nElement.prototype.childrenEquals = function (el) {\n  return childrenEqual(this, el)\n}\n\nElement.prototype.equals = function (el) {\n  return equal(this, el)\n}\n\nmodule.exports = Element\n",
    "'use strict'\n\nmodule.exports = function clone (el) {\n  var clone = new el.constructor(el.name, el.attrs)\n  for (var i = 0; i < el.children.length; i++) {\n    var child = el.children[i]\n    clone.cnode(child.clone ? child.clone() : child)\n  }\n  return clone\n}\n",
    "'use strict'\n\nfunction nameEqual (a, b) {\n  return a.name === b.name\n}\n\nfunction attrsEqual (a, b) {\n  var attrs = a.attrs\n  var keys = Object.keys(attrs)\n  var length = keys.length\n  if (length !== Object.keys(b.attrs).length) return false\n  for (var i = 0, l = length; i < l; i++) {\n    var key = keys[i]\n    var value = attrs[key]\n    if (value == null || b.attrs[key] == null) { // === null || undefined\n      if (value !== b.attrs[key]) return false\n    } else if (value.toString() !== b.attrs[key].toString()) {\n      return false\n    }\n  }\n  return true\n}\n\nfunction childrenEqual (a, b) {\n  var children = a.children\n  var length = children.length\n  if (length !== b.children.length) return false\n  for (var i = 0, l = length; i < l; i++) {\n    var child = children[i]\n    if (typeof child === 'string') {\n      if (child !== b.children[i]) return false\n    } else {\n      if (!child.equals(b.children[i])) return false\n    }\n  }\n  return true\n}\n\nfunction equal (a, b) {\n  if (!nameEqual(a, b)) return false\n  if (!attrsEqual(a, b)) return false\n  if (!childrenEqual(a, b)) return false\n  return true\n}\n\nmodule.exports.name = nameEqual\nmodule.exports.attrs = attrsEqual\nmodule.exports.children = childrenEqual\nmodule.exports.equal = equal\n",
    "'use strict'\n\nvar escapeXMLTable = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  '\\'': '&apos;'\n}\n\nfunction escapeXMLReplace (match) {\n  return escapeXMLTable[match]\n}\n\nvar unescapeXMLTable = {\n  '&amp;': '&',\n  '&#38;': '&',\n  '&lt;': '<',\n  '&#60;': '<',\n  '&gt;': '>',\n  '&#62;': '>',\n  '&quot;': '\"',\n  '&#34;': '\"',\n  '&apos;': \"'\",\n  '&#39;': \"'\"\n}\n\nfunction unescapeXMLReplace (match) {\n  return unescapeXMLTable[match]\n}\n\nexports.escapeXML = function escapeXML (s) {\n  return s.replace(/&|<|>|\"|'/g, escapeXMLReplace)\n}\n\nexports.unescapeXML = function unescapeXML (s) {\n  return s.replace(/&(amp|#38|lt|#60|gt|#62|quot|#34|apos|#39);/g, unescapeXMLReplace)\n}\n\nexports.escapeXMLText = function escapeXMLText (s) {\n  return s.replace(/&|<|>/g, escapeXMLReplace)\n}\n\nexports.unescapeXMLText = function unescapeXMLText (s) {\n  return s.replace(/&(amp|#38|lt|#60|gt|#62);/g, unescapeXMLReplace)\n}\n",
    "'use strict'\n\nvar inherits = require('inherits')\nvar EventEmitter = require('events').EventEmitter\nvar unescapeXML = require('../escape').unescapeXML\n\nvar STATE_TEXT = 0\nvar STATE_IGNORE_COMMENT = 1\nvar STATE_IGNORE_INSTRUCTION = 2\nvar STATE_TAG_NAME = 3\nvar STATE_TAG = 4\nvar STATE_ATTR_NAME = 5\nvar STATE_ATTR_EQ = 6\nvar STATE_ATTR_QUOT = 7\nvar STATE_ATTR_VALUE = 8\nvar STATE_CDATA = 9\n\nvar SaxLtx = module.exports = function SaxLtx () {\n  EventEmitter.call(this)\n\n  var state = STATE_TEXT\n  var remainder\n  var tagName\n  var attrs\n  var endTag\n  var selfClosing\n  var attrQuote\n  var recordStart = 0\n  var attrName\n\n  this._handleTagOpening = function (endTag, tagName, attrs) {\n    if (!endTag) {\n      this.emit('startElement', tagName, attrs)\n      if (selfClosing) {\n        this.emit('endElement', tagName)\n      }\n    } else {\n      this.emit('endElement', tagName)\n    }\n  }\n\n  this.write = function (data) {\n    if (typeof data !== 'string') {\n      data = data.toString()\n    }\n    var pos = 0\n\n    /* Anything from previous write()? */\n    if (remainder) {\n      data = remainder + data\n      pos += remainder.length\n      remainder = null\n    }\n\n    function endRecording () {\n      if (typeof recordStart === 'number') {\n        var recorded = data.slice(recordStart, pos)\n        recordStart = undefined\n        return recorded\n      }\n    }\n\n    for (; pos < data.length; pos++) {\n      var c = data.charCodeAt(pos)\n      switch (state) {\n        case STATE_TEXT:\n          if (c === 60 /* < */) {\n            var text = endRecording()\n            if (text) {\n              this.emit('text', unescapeXML(text))\n            }\n            state = STATE_TAG_NAME\n            recordStart = pos + 1\n            attrs = {}\n          }\n          break\n        case STATE_CDATA:\n          if (c === 93 /* ] */ && data.substr(pos + 1, 2) === ']>') {\n            var cData = endRecording()\n            if (cData) {\n              this.emit('text', cData)\n            }\n            state = STATE_IGNORE_COMMENT\n          }\n          break\n        case STATE_TAG_NAME:\n          if (c === 47 /* / */ && recordStart === pos) {\n            recordStart = pos + 1\n            endTag = true\n          } else if (c === 33 /* ! */) {\n            if (data.substr(pos + 1, 7) === '[CDATA[') {\n              recordStart = pos + 8\n              state = STATE_CDATA\n            } else {\n              recordStart = undefined\n              state = STATE_IGNORE_COMMENT\n            }\n          } else if (c === 63 /* ? */) {\n            recordStart = undefined\n            state = STATE_IGNORE_INSTRUCTION\n          } else if (c <= 32 || c === 47 /* / */ || c === 62 /* > */) {\n            tagName = endRecording()\n            pos--\n            state = STATE_TAG\n          }\n          break\n        case STATE_IGNORE_COMMENT:\n          if (c === 62 /* > */) {\n            var prevFirst = data.charCodeAt(pos - 1)\n            var prevSecond = data.charCodeAt(pos - 2)\n            if ((prevFirst === 45 /* - */ && prevSecond === 45 /* - */) ||\n                (prevFirst === 93 /* ] */ && prevSecond === 93 /* ] */)) {\n              state = STATE_TEXT\n            }\n          }\n          break\n        case STATE_IGNORE_INSTRUCTION:\n          if (c === 62 /* > */) {\n            var prev = data.charCodeAt(pos - 1)\n            if (prev === 63 /* ? */) {\n              state = STATE_TEXT\n            }\n          }\n          break\n        case STATE_TAG:\n          if (c === 62 /* > */) {\n            this._handleTagOpening(endTag, tagName, attrs)\n            tagName = undefined\n            attrs = undefined\n            endTag = undefined\n            selfClosing = undefined\n            state = STATE_TEXT\n            recordStart = pos + 1\n          } else if (c === 47 /* / */) {\n            selfClosing = true\n          } else if (c > 32) {\n            recordStart = pos\n            state = STATE_ATTR_NAME\n          }\n          break\n        case STATE_ATTR_NAME:\n          if (c <= 32 || c === 61 /* = */) {\n            attrName = endRecording()\n            pos--\n            state = STATE_ATTR_EQ\n          }\n          break\n        case STATE_ATTR_EQ:\n          if (c === 61 /* = */) {\n            state = STATE_ATTR_QUOT\n          }\n          break\n        case STATE_ATTR_QUOT:\n          if (c === 34 /* \" */ || c === 39 /* ' */) {\n            attrQuote = c\n            state = STATE_ATTR_VALUE\n            recordStart = pos + 1\n          }\n          break\n        case STATE_ATTR_VALUE:\n          if (c === attrQuote) {\n            var value = unescapeXML(endRecording())\n            attrs[attrName] = value\n            attrName = undefined\n            state = STATE_TAG\n          }\n          break\n      }\n    }\n\n    if (typeof recordStart === 'number' &&\n      recordStart <= data.length) {\n      remainder = data.slice(recordStart)\n      recordStart = 0\n    }\n  }\n  /*\n  var origEmit = this.emit\n  this.emit = function() {\n    console.log('ltx', arguments)\n    origEmit.apply(this, arguments)\n  }\n  */\n}\ninherits(SaxLtx, EventEmitter)\n\nSaxLtx.prototype.end = function (data) {\n  if (data) {\n    this.write(data)\n  }\n\n  /* Uh, yeah */\n  this.write = function () {}\n}\n",
    "(function(root, factory) {\n  if (typeof exports === 'object') {\n    // CommonJS\n    factory(exports, module);\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['exports', 'module'], factory);\n  }\n}(this, function(exports, module) {\n\n  /**\n   * ANONYMOUS `Mechanism` constructor.\n   *\n   * This class implements the ANONYMOUS SASL mechanism.\n   *\n   * The ANONYMOUS SASL mechanism provides support for permitting anonymous\n   * access to various services\n   *\n   * References:\n   *  - [RFC 4505](http://tools.ietf.org/html/rfc4505)\n   *\n   * @api public\n   */\n  function Mechanism() {\n  }\n  \n  Mechanism.prototype.name = 'ANONYMOUS';\n  Mechanism.prototype.clientFirst = true;\n  \n  /**\n   * Encode a response using optional trace information.\n   *\n   * Options:\n   *  - `trace`  trace information (optional)\n   *\n   * @param {Object} cred\n   * @api public\n   */\n  Mechanism.prototype.response = function(cred) {\n    return cred.trace || '';\n  };\n  \n  /**\n   * Decode a challenge issued by the server.\n   *\n   * @param {String} chal\n   * @api public\n   */\n  Mechanism.prototype.challenge = function(chal) {\n  };\n\n  exports = module.exports = Mechanism;\n  \n}));\n",
    "(function(root, factory) {\n  if (typeof exports === 'object') {\n    // CommonJS\n    factory(exports,\n            module,\n            require('./lib/mechanism'));\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['exports',\n            'module',\n            './lib/mechanism'], factory);\n  }\n}(this, function(exports, module, Mechanism) {\n\n  exports = module.exports = Mechanism;\n  exports.Mechanism = Mechanism;\n  \n}));\n",
    "(function(root, factory) {\n  if (typeof exports === 'object') {\n    // CommonJS\n    factory(exports, module);\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['exports', 'module'], factory);\n  }\n}(this, function(exports, module) {\n\n  /**\n   * PLAIN `Mechanism` constructor.\n   *\n   * This class implements the PLAIN SASL mechanism.\n   *\n   * The PLAIN SASL mechanism provides support for exchanging a clear-text\n   * username and password.  This mechanism should not be used without adequate\n   * security provided by an underlying transport layer. \n   *\n   * References:\n   *  - [RFC 4616](http://tools.ietf.org/html/rfc4616)\n   *\n   * @api public\n   */\n  function Mechanism() {\n  }\n  \n  Mechanism.prototype.name = 'PLAIN';\n  Mechanism.prototype.clientFirst = true;\n  \n  /**\n   * Encode a response using given credential.\n   *\n   * Options:\n   *  - `username`\n   *  - `password`\n   *  - `authzid`   authorization identity (optional)\n   *\n   * @param {Object} cred\n   * @api public\n   */\n  Mechanism.prototype.response = function(cred) {\n    var str = '';\n    str += cred.authzid || '';\n    str += '\\0';\n    str += cred.username;\n    str += '\\0';\n    str += cred.password;\n    return str;\n  };\n  \n  /**\n   * Decode a challenge issued by the server.\n   *\n   * @param {String} chal\n   * @return {Mechanism} for chaining\n   * @api public\n   */\n  Mechanism.prototype.challenge = function(chal) {\n    return this;\n  };\n\n  exports = module.exports = Mechanism;\n  \n}));\n",
    "(function(root, factory) {\n  if (typeof exports === 'object') {\n    // CommonJS\n    factory(exports, module);\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['exports', 'module'], factory);\n  }\n}(this, function(exports, module) {\n  \n  /**\n   * `Factory` constructor.\n   *\n   * @api public\n   */\n  function Factory() {\n    this._mechs = [];\n  }\n  \n  /**\n   * Utilize the given `mech` with optional `name`, overridding the mechanism's\n   * default name.\n   *\n   * Examples:\n   *\n   *     factory.use(FooMechanism);\n   *\n   *     factory.use('XFOO', FooMechanism);\n   *\n   * @param {String|Mechanism} name\n   * @param {Mechanism} mech\n   * @return {Factory} for chaining\n   * @api public\n   */\n  Factory.prototype.use = function(name, mech) {\n    if (!mech) {\n      mech = name;\n      name = mech.prototype.name;\n    }\n    this._mechs.push({ name: name, mech: mech });\n    return this;\n  };\n  \n  /**\n   * Create a new mechanism from supported list of `mechs`.\n   *\n   * If no mechanisms are supported, returns `null`.\n   *\n   * Examples:\n   *\n   *     var mech = factory.create(['FOO', 'BAR']);\n   *\n   * @param {Array} mechs\n   * @return {Mechanism}\n   * @api public\n   */\n  Factory.prototype.create = function(mechs) {\n    for (var i = 0, len = this._mechs.length; i < len; i++) {\n      for (var j = 0, jlen = mechs.length; j < jlen; j++) {\n        var entry = this._mechs[i];\n        if (entry.name == mechs[j]) {\n          return new entry.mech();\n        }\n      }\n    }\n    return null;\n  };\n\n  exports = module.exports = Factory;\n  \n}));\n",
    "(function(root, factory) {\n  if (typeof exports === 'object') {\n    // CommonJS\n    factory(exports,\n            module,\n            require('./lib/factory'));\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['exports',\n            'module',\n            './lib/factory'], factory);\n  }\n}(this, function(exports, module, Factory) {\n  \n  exports = module.exports = Factory;\n  exports.Factory = Factory;\n  \n}));\n",
    "'use strict'\n\nconst Client = require('./lib/Client')\nconst xml = require('@xmpp/xml')\nconst jid = require('@xmpp/jid')\n\nmodule.exports.Client = Client\nmodule.exports.xml = xml\nmodule.exports.jid = jid\n",
    "'use strict'\n\nconst Connection = require('@xmpp/connection')\n\nclass Client extends Connection {\n  constructor(options) {\n    super(options)\n    this.transports = []\n  }\n\n  send(element, ...args) {\n    if (\n      !element.attrs.xmlns &&\n      (element.is('iq') || element.is('message') || element.is('presence'))\n    ) {\n      element.attrs.xmlns = 'jabber:client' // FIXME no need for TCP/TLS transports\n    }\n    return super.send(element, ...args)\n  }\n\n  connect(uri) {\n    const Transport = this.transports.find(Transport => {\n      try {\n        return Transport.prototype.socketParameters(uri) !== undefined\n      } catch (err) {\n        return false\n      }\n    })\n\n    if (!Transport) {\n      throw new Error('No compatible connection method found.')\n    }\n\n    this.Transport = Transport\n    this.Socket = Transport.prototype.Socket\n    this.Parser = Transport.prototype.Parser\n\n    return super.connect(uri)\n  }\n\n  socketParameters(...args) {\n    return this.Transport.prototype.socketParameters(...args)\n  }\n\n  header(...args) {\n    return this.Transport.prototype.header(...args)\n  }\n\n  headerElement(...args) {\n    return this.Transport.prototype.headerElement(...args)\n  }\n\n  footer(...args) {\n    return this.Transport.prototype.footer(...args)\n  }\n\n  footerElement(...args) {\n    return this.Transport.prototype.footerElement(...args)\n  }\n}\n\nClient.prototype.NS = 'jabber:client'\n\nmodule.exports = Client\n",
    "'use strict'\n\nconst {timeout, EventEmitter, promise} = require('@xmpp/events')\nconst jid = require('@xmpp/jid')\nconst url = require('url')\nconst xml = require('@xmpp/xml')\n\nclass XMPPError extends Error {\n  constructor(condition, text, element) {\n    super(condition + (text ? ` - ${text}` : ''))\n    this.name = 'XMPPError'\n    this.condition = condition\n    this.text = text\n    this.element = element\n  }\n}\n\nclass StreamError extends XMPPError {\n  constructor(...args) {\n    super(...args)\n    this.name = 'StreamError'\n  }\n}\n\n// We ignore url module from the browser bundle to reduce its size\nfunction getHostname(uri) {\n  if (url.parse) {\n    const parsed = url.parse(uri)\n    return parsed.hostname || parsed.pathname\n  }\n  const el = document.createElement('a') // eslint-disable-line no-undef\n  el.href = uri\n  return el.hostname\n}\n\nclass Connection extends EventEmitter {\n  constructor(options) {\n    super()\n    this.domain = ''\n    this.lang = ''\n    this.jid = null\n    this.timeout = 2000\n    this.options = typeof options === 'object' ? options : {}\n    this.plugins = Object.create(null)\n    this.startOptions = null\n    this.openOptions = null\n    this.connectOptions = null\n    this.socketListeners = Object.create(null)\n    this.parserListeners = Object.create(null)\n    this.status = 'offline'\n  }\n\n  _reset() {\n    this.domain = ''\n    this.lang = ''\n    this.jid = null\n    this._detachSocket()\n    this._detachParser()\n    this.socket = null\n  }\n\n  _attachSocket(socket) {\n    const sock = (this.socket = socket)\n    const listeners = this.socketListeners\n    listeners.data = data => {\n      const str = data.toString('utf8')\n      this.emit('input', str)\n      this.parser.write(str)\n    }\n    listeners.close = (...args) => {\n      this._reset()\n      this._status('disconnect', ...args)\n    }\n    listeners.connect = () => {\n      this._status('connect')\n      sock.once('close', listeners.close)\n    }\n    listeners.error = error => {\n      this._reset()\n      if (this.status === 'connecting') {\n        this._status('offline')\n      }\n      this.emit('error', error)\n    }\n    sock.on('data', listeners.data)\n    sock.on('error', listeners.error)\n    sock.on('connect', listeners.connect)\n  }\n\n  _detachSocket() {\n    const listeners = this.socketListeners\n    Object.getOwnPropertyNames(listeners).forEach(k => {\n      this.socket.removeListener(k, listeners[k])\n      delete listeners[k]\n    })\n    delete this.socket\n  }\n\n  _attachParser(p) {\n    const parser = (this.parser = p)\n    const listeners = this.parserListeners\n    listeners.element = element => {\n      if (element.name === 'stream:error') {\n        this.close().then(() => this.disconnect())\n        this.emit(\n          'error',\n          new StreamError(\n            element.children[0].name,\n            element.getChildText(\n              'text',\n              'urn:ietf:params:xml:ns:xmpp-streams'\n            ) || '',\n            element\n          )\n        )\n      }\n      this.emit('element', element)\n      this.emit(this.isStanza(element) ? 'stanza' : 'nonza', element)\n    }\n    listeners.error = error => {\n      this.emit('error', error)\n    }\n    listeners.end = element => {\n      this._status('close', element)\n    }\n    parser.once('error', listeners.error)\n    parser.on('element', listeners.element)\n    parser.on('end', listeners.end)\n  }\n\n  _detachParser() {\n    const listeners = this.parserListeners\n    Object.getOwnPropertyNames(listeners).forEach(k => {\n      this.parser.removeListener(k, listeners[k])\n      delete listeners[k]\n    })\n    delete this.parser\n  }\n\n  _jid(id) {\n    this.jid = jid(id)\n    return this.jid\n  }\n\n  _status(status, ...args) {\n    this.status = status\n    this.emit('status', status, ...args)\n    this.emit(status, ...args)\n  }\n\n  /**\n   * Opens the socket then opens the stream\n   */\n  start(options) {\n    if (this.status !== 'offline') {\n      return Promise.reject(new Error('Connection is not offline'))\n    }\n\n    this.startOptions = options\n\n    if (typeof options === 'string') {\n      options = {uri: options}\n    }\n\n    if (!options.domain) {\n      options.domain = getHostname(options.uri)\n    }\n\n    return Promise.all([\n      this.promise('online'),\n      this.connect(options.uri).then(() => {\n        const {domain, lang} = options\n        return this.open({domain, lang})\n      }),\n    ]).then(([addr]) => addr)\n  }\n\n  /**\n   * Connects the socket\n   */\n  connect(options) {\n    this._status('connecting')\n    this.connectOptions = options\n    return new Promise((resolve, reject) => {\n      this._attachParser(new this.Parser())\n      this._attachSocket(new this.Socket())\n      this.socket.once('error', reject)\n      this.socket.connect(this.socketParameters(options), () => {\n        this.socket.removeListener('error', reject)\n        resolve()\n        // The 'connect' status is emitted by the socket 'connect' listener\n      })\n    })\n  }\n\n  /**\n   * Disconnects the socket\n   * https://xmpp.org/rfcs/rfc6120.html#streams-close\n   * https://tools.ietf.org/html/rfc7395#section-3.6\n   */\n  disconnect(ms = this.timeout) {\n    this._status('disconnecting')\n    this.socket.end()\n    return timeout(promise(this.socket, 'close'), ms)\n    // The 'disconnect' status is emitted by the socket 'close' listener\n  }\n\n  /**\n   * Opens the stream\n   */\n  open(options) {\n    this._status('opening')\n    // Useful for stream-features restart\n    this.openOptions = options\n    if (typeof options === 'string') {\n      options = {domain: options}\n    }\n\n    const {domain, lang} = options\n\n    const headerElement = this.headerElement()\n    headerElement.attrs.to = domain\n    headerElement.attrs['xml:lang'] = lang\n\n    return Promise.all([\n      this.write(this.header(headerElement)),\n      promise(this.parser, 'start').then(el => {\n        // FIXME what about version and xmlns:stream ?\n        if (\n          el.name !== headerElement.name ||\n          el.attrs.xmlns !== headerElement.attrs.xmlns ||\n          el.attrs.from !== headerElement.attrs.to ||\n          !el.attrs.id\n        ) {\n          return this.promise('error')\n        }\n\n        this.domain = domain\n        this.lang = el.attrs['xml:lang']\n        this._status('open', el)\n        return el\n      }),\n    ]).then(([, el]) => el)\n  }\n\n  /**\n   * Closes the stream then closes the socket\n   * https://xmpp.org/rfcs/rfc6120.html#streams-close\n   * https://tools.ietf.org/html/rfc7395#section-3.6\n   */\n  stop() {\n    if (!this.socket) {\n      return Promise.resolve()\n    }\n    return this.close().then(el =>\n      this.disconnect().then(() => {\n        this._status('offline')\n        return el\n      })\n    )\n  }\n\n  /**\n   * Closes the stream and wait for the server to close it\n   * https://xmpp.org/rfcs/rfc6120.html#streams-close\n   * https://tools.ietf.org/html/rfc7395#section-3.6\n   */\n  close(ms = this.timeout) {\n    this._status('closing')\n\n    return Promise.all([\n      timeout(promise(this.parser, 'end'), ms),\n      this.write(this.footer(this.footerElement())),\n    ]).then(([el]) => el)\n    // The 'close' status is emitted by the parser 'end' listener\n  }\n\n  /**\n   * Restart the stream\n   * https://xmpp.org/rfcs/rfc6120.html#streams-negotiation-restart\n   */\n  restart() {\n    this._detachParser()\n    this._attachParser(new this.Parser())\n    this._status('restarting')\n    return this.open(this.openOptions).then(() => {\n      this._status('restart')\n    })\n  }\n\n  send(element) {\n    return this.write(element).then(() => {\n      this.emit('send', element)\n    })\n  }\n\n  sendReceive(element, ms = this.timeout) {\n    return Promise.all([\n      this.send(element),\n      timeout(this.promise('element'), ms),\n    ]).then(([, el]) => el)\n  }\n\n  write(data) {\n    return new Promise((resolve, reject) => {\n      const str = data.toString('utf8')\n      this.socket.write(str, err => {\n        if (err) {\n          return reject(err)\n        }\n        this.emit('output', str)\n        resolve()\n      })\n    })\n  }\n\n  isStanza(element) {\n    const {name} = element\n    const NS = element.attrs.xmlns\n    return (\n      // This.online && FIXME\n      (NS ? NS === this.NS : true) &&\n      (name === 'iq' || name === 'message' || name === 'presence')\n    )\n  }\n\n  isNonza(element) {\n    return !this.isStanza(element)\n  }\n\n  plugin(plugin) {\n    if (!this.plugins[plugin.name]) {\n      this.plugins[plugin.name] = plugin.plugin(this)\n      const p = this.plugins[plugin.name]\n      if (p && p.start) {\n        p.start()\n      } else if (p && p.register) {\n        p.register()\n      }\n    }\n\n    return this.plugins[plugin.name]\n  }\n\n  // Override\n  header(el) {\n    return el.toString()\n  }\n  headerElement() {\n    return new xml.Element('', {\n      version: '1.0',\n      xmlns: this.NS,\n    })\n  }\n  footer(el) {\n    return el.toString()\n  }\n  footerElement() {}\n  socketParameters(uri) {\n    const parsed = url.parse(uri)\n    parsed.port = Number(parsed.port)\n    parsed.host = parsed.hostname\n    return parsed\n  }\n}\n\n// Overrirde\nConnection.prototype.NS = ''\nConnection.prototype.Socket = null\nConnection.prototype.Parser = null\n\nmodule.exports = Connection\nmodule.exports.getHostname = getHostname\nmodule.exports.XMPPError = XMPPError\nmodule.exports.StreamError = StreamError\n",
    "'use strict'\n\nconst timeout = require('./lib/timeout')\nconst delay = require('./lib/delay')\nconst TimeoutError = require('./lib/TimeoutError')\nconst promise = require('./lib/promise')\nconst _EventEmitter = require('./lib/EventEmitter')\n\nexports = module.exports = class EventEmitter extends _EventEmitter {}\nexports.EventEmitter = _EventEmitter\nexports.timeout = timeout\nexports.delay = delay\nexports.TimeoutError = TimeoutError\nexports.promise = promise\n",
    "'use strict'\n\nconst _EventEmitter = require('events')\nconst promiseEvent = require('./promise')\n\nclass EventEmitter {\n  constructor() {\n    this._emitter = new _EventEmitter()\n    this._handlers = Object.create(null)\n  }\n\n  promise(...args) {\n    return promiseEvent(this, ...args)\n  }\n\n  handle(event, handler) {\n    this._handlers[event] = handler\n  }\n\n  delegate(event, ...args) {\n    const handler = this._handlers[event]\n    if (!handler) {\n      throw new Error(`${event} has no handler attached.`)\n    }\n    const promise = handler(...args)\n    if (!(promise instanceof Promise)) {\n      throw new TypeError(`${event} handler must return a promise.`)\n    }\n    return promise\n  }\n\n  isHandled(event) {\n    return Boolean(this._handlers[event])\n  }\n}\n\n;[\n  'on',\n  'addListener',\n  'removeListener',\n  'once',\n  'emit',\n  'listenerCount',\n].forEach(name => {\n  EventEmitter.prototype[name] = function(...args) {\n    this._emitter[name](...args)\n  }\n})\n\nmodule.exports = EventEmitter\n",
    "'use strict'\n\nmodule.exports = class TimeoutError extends Error {\n  constructor(message) {\n    super(message)\n    this.name = 'TimeoutError'\n  }\n}\n",
    "'use strict'\n\nmodule.exports = function delay(timeout) {\n  return new Promise(resolve => {\n    setTimeout(resolve, timeout)\n  })\n}\n",
    "'use strict'\n\nmodule.exports = function promise(EE, event, rejectEvent = 'error') {\n  return new Promise((resolve, reject) => {\n    const cleanup = () => {\n      EE.removeListener(event, onEvent)\n      EE.removeListener(rejectEvent, onError)\n    }\n    function onError(reason) {\n      reject(reason)\n      cleanup()\n    }\n    function onEvent(value) {\n      resolve(value)\n      cleanup()\n    }\n    EE.once(event, onEvent)\n    if (rejectEvent) {\n      EE.once(rejectEvent, onError)\n    }\n  })\n}\n",
    "'use strict'\n\nconst TimeoutError = require('./TimeoutError')\nconst delay = require('./delay')\n\nmodule.exports = function timeout(promise, ms) {\n  return Promise.race([\n    promise,\n    delay(ms).then(() => {\n      throw new TimeoutError()\n    }),\n  ])\n}\n",
    "'use strict'\n\nconst JID = require('./lib/JID')\nconst escaping = require('./lib/escaping')\nconst parse = require('./lib/parse')\n\nfunction jid(...args) {\n  if (!args[1] && !args[2]) {\n    return parse(...args)\n  }\n  return new JID(...args)\n}\n\nexports = module.exports = jid.bind()\nexports.jid = jid\nexports.JID = JID\nexports.equal = function(a, b) {\n  return a.equals(b)\n}\nexports.detectEscape = escaping.detect\nexports.escapeLocal = escaping.escape\nexports.unescapeLocal = escaping.unescape\nexports.parse = parse\n",
    "'use strict'\n\nconst escaping = require('./escaping')\n\n/**\n * JID implements\n * - XMPP addresses according to RFC6122\n * - XEP-0106: JID Escaping\n *\n * @see http://tools.ietf.org/html/rfc6122#section-2\n * @see http://xmpp.org/extensions/xep-0106.html\n */\nclass JID {\n  constructor(local, domain, resource) {\n    if (typeof domain !== 'string' || !domain) {\n      throw new TypeError(`Invalid domain.`)\n    }\n    this.setDomain(domain)\n    this.setLocal(typeof local === 'string' ? local : '')\n    this.setResource(typeof resource === 'string' ? resource : '')\n  }\n\n  [Symbol.toPrimitive](hint) {\n    if (hint === 'number') {\n      return NaN\n    }\n    return this.toString()\n  }\n\n  toString(unescape) {\n    let s = this._domain\n    if (this._local) {\n      s = this.getLocal(unescape) + '@' + s\n    }\n    if (this._resource) {\n      s = s + '/' + this._resource\n    }\n    return s\n  }\n\n  /**\n   * Convenience method to distinguish users\n   * */\n  bare() {\n    if (this._resource) {\n      return new JID(this._local, this._domain, null)\n    }\n    return this\n  }\n\n  /**\n     * Comparison function\n     * */\n  equals(other) {\n    return (\n      this._local === other._local &&\n      this._domain === other._domain &&\n      this._resource === other._resource\n    )\n  }\n\n  /**\n   * http://xmpp.org/rfcs/rfc6122.html#addressing-localpart\n   * */\n  setLocal(local, escape) {\n    escape = escape || escaping.detect(local)\n\n    if (escape) {\n      local = escaping.escape(local)\n    }\n\n    this._local = local && local.toLowerCase()\n    return this\n  }\n  getLocal(unescape) {\n    unescape = unescape || false\n    let local = null\n\n    if (unescape) {\n      local = escaping.unescape(this._local)\n    } else {\n      local = this._local\n    }\n\n    return local\n  }\n\n  /**\n   * http://xmpp.org/rfcs/rfc6122.html#addressing-domain\n   */\n  setDomain(domain) {\n    this._domain = domain.toLowerCase()\n    return this\n  }\n  getDomain() {\n    return this._domain\n  }\n\n  /**\n   * http://xmpp.org/rfcs/rfc6122.html#addressing-resourcepart\n   */\n  setResource(resource) {\n    this._resource = resource\n    return this\n  }\n  getResource() {\n    return this._resource\n  }\n}\n\nObject.defineProperty(JID.prototype, 'local', {\n  get: JID.prototype.getLocal,\n  set: JID.prototype.setLocal,\n})\n\nObject.defineProperty(JID.prototype, 'domain', {\n  get: JID.prototype.getDomain,\n  set: JID.prototype.setDomain,\n})\n\nObject.defineProperty(JID.prototype, 'resource', {\n  get: JID.prototype.getResource,\n  set: JID.prototype.setResource,\n})\n\nmodule.exports = JID\n",
    "'use strict'\n\nmodule.exports.detect = function(local) {\n  if (!local) {\n    return false\n  }\n\n  // Remove all escaped sequences\n  const tmp = local\n    .replace(/\\\\20/g, '')\n    .replace(/\\\\22/g, '')\n    .replace(/\\\\26/g, '')\n    .replace(/\\\\27/g, '')\n    .replace(/\\\\2f/g, '')\n    .replace(/\\\\3a/g, '')\n    .replace(/\\\\3c/g, '')\n    .replace(/\\\\3e/g, '')\n    .replace(/\\\\40/g, '')\n    .replace(/\\\\5c/g, '')\n\n  // Detect if we have unescaped sequences\n  const search = tmp.search(/\\\\| |\"|&|'|\\/|:|<|>|@/g)\n  if (search === -1) {\n    return false\n  }\n  return true\n}\n\n/**\n * Escape the local part of a JID.\n *\n * @see http://xmpp.org/extensions/xep-0106.html\n * @param String local local part of a jid\n * @return An escaped local part\n */\nmodule.exports.escape = function(local) {\n  if (local === null) {\n    return null\n  }\n\n  return local\n    .replace(/^\\s+|\\s+$/g, '')\n    .replace(/\\\\/g, '\\\\5c')\n    .replace(/ /g, '\\\\20')\n    .replace(/\"/g, '\\\\22')\n    .replace(/&/g, '\\\\26')\n    .replace(/'/g, '\\\\27')\n    .replace(/\\//g, '\\\\2f')\n    .replace(/:/g, '\\\\3a')\n    .replace(/</g, '\\\\3c')\n    .replace(/>/g, '\\\\3e')\n    .replace(/@/g, '\\\\40')\n    .replace(/\\3a/g, '\\u0005c3a')\n}\n\n/**\n * Unescape a local part of a JID.\n *\n * @see http://xmpp.org/extensions/xep-0106.html\n * @param String local local part of a jid\n * @return unescaped local part\n */\nmodule.exports.unescape = function(local) {\n  if (local === null) {\n    return null\n  }\n\n  return local\n    .replace(/\\\\20/g, ' ')\n    .replace(/\\\\22/g, '\"')\n    .replace(/\\\\26/g, '&')\n    .replace(/\\\\27/g, \"'\")\n    .replace(/\\\\2f/g, '/')\n    .replace(/\\\\3a/g, ':')\n    .replace(/\\\\3c/g, '<')\n    .replace(/\\\\3e/g, '>')\n    .replace(/\\\\40/g, '@')\n    .replace(/\\\\5c/g, '\\\\')\n}\n",
    "'use strict'\n\nconst JID = require('../lib/JID')\n\nmodule.exports = function parse(s) {\n  let local\n  let resource\n\n  const resourceStart = s.indexOf('/')\n  if (resourceStart !== -1) {\n    resource = s.substr(resourceStart + 1)\n    s = s.substr(0, resourceStart)\n  }\n\n  const atStart = s.indexOf('@')\n  if (atStart !== -1) {\n    local = s.substr(0, atStart)\n    s = s.substr(atStart + 1)\n  }\n\n  return new JID(local, s, resource)\n}\n",
    "'use strict'\n\nconst _Plugin = require('./lib/Plugin')\nconst jid = require('@xmpp/jid')\nconst xml = require('@xmpp/xml')\n\nfunction plugin(name, props, dependencies = []) {\n  class Plugin extends _Plugin {}\n  Object.assign(Plugin.prototype, props)\n\n  return {\n    name,\n    plugin(entity) {\n      const p = new Plugin()\n      p.attach(entity)\n\n      const plugins = {}\n      dependencies.forEach(dep => {\n        plugins[dep.name] = entity.plugin(dep)\n      })\n      p.plugins = plugins\n\n      return p\n    },\n    unplug() {\n      // FIXME\n    },\n  }\n}\n\nmodule.exports = plugin.bind(undefined)\nmodule.exports.plugin = plugin\nmodule.exports.Plugin = _Plugin\nmodule.exports.jid = jid\nmodule.exports.xml = xml\n",
    "'use strict'\n\nconst EventEmitter = require('@xmpp/events')\n\nclass Plugin extends EventEmitter {\n  attach(entity) {\n    this.entity = entity\n  }\n\n  detach() {\n    delete this.entity\n  }\n\n  // Override\n  start() {}\n  stop() {}\n}\n\nmodule.exports = Plugin\n",
    "'use strict'\n\nconst {plugin, xml} = require('@xmpp/plugin')\nconst streamfeatures = require('../stream-features')\nconst iqCaller = require('../iq-caller')\n\n/*\n * References\n * https://xmpp.org/rfcs/rfc6120.html#bind\n */\n\nconst NS = 'urn:ietf:params:xml:ns:xmpp-bind'\n\nfunction makeBindElement(resource) {\n  return xml('bind', {xmlns: NS}, resource && xml('resource', {}, resource))\n}\n\nfunction match(features) {\n  return features.getChild('bind', NS)\n}\n\nmodule.exports = plugin(\n  'bind',\n  {\n    start() {\n      const streamFeature = {\n        name: 'bind',\n        priority: 2500,\n        match,\n        run: () => this.handleFeature(),\n      }\n      this.plugins['stream-features'].add(streamFeature)\n    },\n    bind(resource) {\n      this.entity._status('binding')\n      return this.plugins['iq-caller']\n        .set(makeBindElement(resource))\n        .then(result => {\n          this.entity._jid(result.getChildText('jid'))\n          this.entity._status('bound')\n        })\n    },\n    handleFeature() {\n      const {entity} = this\n      entity._status('bind')\n      return entity.isHandled('bind')\n        ? entity.delegate('bind', resource => this.bind(resource))\n        : this.bind()\n    },\n  },\n  [streamfeatures, iqCaller]\n)\n",
    "'use strict'\n\nconst {plugin, xml} = require('@xmpp/plugin')\n\nmodule.exports = plugin('iq-caller', {\n  start() {\n    this.handlers = new Map()\n    this.handler = stanza => {\n      if (!this.match(stanza)) {\n        return\n      }\n\n      const {id} = stanza.attrs\n\n      const handler = this.handlers.get(id)\n      if (!handler) {\n        return\n      }\n\n      if (stanza.attrs.type === 'error') {\n        handler[1](stanza.getChild('error'))\n      } else {\n        handler[0](stanza.children[0])\n      }\n      this.handlers.delete(id)\n    }\n    this.entity.on('element', this.handler)\n  },\n  stop() {\n    this.entity.removeListener('element', this.handler)\n  },\n  id() {\n    let id\n    while (!id) {\n      id = Math.random()\n        .toString(36)\n        .substr(2, 12)\n    }\n    return id\n  },\n  match(stanza) {\n    return (\n      stanza.name === 'iq' &&\n      (stanza.attrs.type === 'error' || stanza.attrs.type === 'result')\n    )\n  },\n  get(el, ...args) {\n    const iq = xml('iq', {type: 'get'})\n    iq.append(el)\n    return this.request(iq, ...args)\n  },\n  set(el, ...args) {\n    const iq = xml('iq', {type: 'set'})\n    iq.append(el)\n    return this.request(iq, ...args)\n  },\n  request(stanza, to) {\n    return new Promise((resolve, reject) => {\n      if (to && typeof to === 'string' && !stanza.attrs.to) {\n        stanza.attrs.to = to\n      }\n      if (!stanza.attrs.id) {\n        stanza.attrs.id = this.id()\n      }\n\n      this.handlers.set(stanza.attrs.id, [resolve, reject])\n\n      this.entity.send(stanza)\n    })\n  },\n})\n",
    "'use strict'\n\nconst plugin = require('@xmpp/plugin')\n\nmodule.exports = plugin('reconnect', {\n  delay: 1000,\n\n  reconnect() {\n    const {entity} = this\n    this.emit('reconnecting')\n    this._timeout = setTimeout(() => {\n      if (entity.status === 'offline') {\n        return\n      }\n      // Allow calling start() even though status is not offline\n      // reset status property right after\n      const {status} = entity\n      entity.status = 'offline'\n\n      entity\n        .start(entity.startOptions)\n        .then(() => {\n          this.emit('reconnected')\n        })\n        .catch(() => this.reconnect())\n        .catch(err => {\n          this.emit('error', err)\n        })\n      entity.status = status\n    }, this.delay)\n  },\n\n  stopped() {\n    const {entity, listeners, _timeout} = this\n    entity.removeListener('disconnect', listeners.disconnect)\n    clearTimeout(_timeout)\n  },\n\n  start() {\n    const listeners = {}\n    listeners.disconnect = () => {\n      this.reconnect()\n    }\n    listeners.online = () => {\n      this.entity.on('disconnect', listeners.disconnect)\n    }\n    this.listeners = listeners\n    this.entity.once('online', listeners.online)\n  },\n\n  stop() {\n    this.stopped()\n    this.entity.removeListener('online', this.listeners.online)\n  },\n})\n",
    "'use strict'\n\nconst mech = require('sasl-anonymous')\nconst sasl = require('../sasl')\n\nmodule.exports.name = 'sasl-anonymous'\nmodule.exports.plugin = function plugin(entity) {\n  const SASL = entity.plugin(sasl)\n  SASL.use(mech)\n  return {\n    entity,\n  }\n}\n",
    "'use strict'\n\nconst mech = require('sasl-plain')\nconst sasl = require('../sasl')\n\nmodule.exports.name = 'sasl-plain'\nmodule.exports.plugin = function plugin(entity) {\n  const SASL = entity.plugin(sasl)\n  SASL.use(mech)\n  return {\n    entity,\n  }\n}\n",
    "'use strict'\n\nconst {encode, decode} = require('./lib/b64')\nconst plugin = require('@xmpp/plugin')\nconst xml = require('@xmpp/xml')\nconst streamFeatures = require('../stream-features')\nconst {XMPPError} = require('@xmpp/connection')\nconst SASLFactory = require('saslmechanisms')\n\nconst NS = 'urn:ietf:params:xml:ns:xmpp-sasl'\n\nclass SASLError extends XMPPError {\n  constructor(...args) {\n    super(...args)\n    this.name = 'SASLError'\n  }\n}\n\nfunction match(features) {\n  return features.getChild('mechanisms', NS)\n}\n\nfunction getMechanismNames(features) {\n  return features.getChild('mechanisms', NS).children.map(el => el.text())\n}\n\nmodule.exports = plugin(\n  'sasl',\n  {\n    start() {\n      this.SASL = new SASLFactory()\n      this.streamFeature = {\n        name: 'sasl',\n        priority: 1000,\n        match,\n        restart: true,\n        run: (entity, features) => {\n          return this.gotFeatures(features)\n        },\n      }\n      this.plugins['stream-features'].add(this.streamFeature)\n    },\n\n    stop() {\n      delete this.SASL\n      this.plugins['stream-features'].remove(this.streamFeature)\n      delete this.streamFeature\n      delete this.mech\n    },\n\n    use(...args) {\n      this.SASL.use(...args)\n    },\n\n    gotFeatures(features) {\n      const offered = getMechanismNames(features)\n      const usable = this.getUsableMechanisms(offered)\n      // FIXME const available = this.getAvailableMechanisms()\n\n      return Promise.resolve(this.getMechanism(usable)).then(mech => {\n        this.mech = mech\n        return this.handleMechanism(mech, features)\n      })\n    },\n\n    handleMechanism(mech, features) {\n      this.entity._status('authenticate')\n\n      if (mech === 'ANONYMOUS') {\n        return this.authenticate(mech, {}, features)\n      }\n\n      return this.entity.delegate(\n        'authenticate',\n        (username, password) => {\n          return this.authenticate(mech, {username, password}, features)\n        },\n        mech\n      )\n    },\n\n    getAvailableMechanisms() {\n      return this.SASL._mechs.map(({name}) => name)\n    },\n\n    getUsableMechanisms(mechs) {\n      const supported = this.getAvailableMechanisms()\n      return mechs.filter(mech => {\n        return supported.indexOf(mech) > -1\n      })\n    },\n\n    getMechanism(usable) {\n      return usable[0] // FIXME prefer SHA-1, ... maybe order usable, available, ... by preferred?\n    },\n\n    findMechanism(name) {\n      return this.SASL.create([name])\n    },\n\n    authenticate(mechname, credentials) {\n      const mech = this.findMechanism(mechname)\n      if (!mech) {\n        return Promise.reject(new Error('no compatible mechanism'))\n      }\n\n      const {domain} = this.entity.options\n      const creds = Object.assign(\n        {\n          username: null,\n          password: null,\n          server: domain,\n          host: domain,\n          realm: domain,\n          serviceType: 'xmpp',\n          serviceName: domain,\n        },\n        credentials\n      )\n\n      this.entity._status('authenticating')\n\n      return new Promise((resolve, reject) => {\n        const handler = element => {\n          if (element.attrs.xmlns !== NS) {\n            return\n          }\n\n          if (element.name === 'challenge') {\n            mech.challenge(decode(element.text()))\n            const resp = mech.response(creds)\n            this.entity.send(\n              xml(\n                'response',\n                {xmlns: NS, mechanism: mech.name},\n                typeof resp === 'string' ? encode(resp) : ''\n              )\n            )\n            return\n          }\n\n          if (element.name === 'failure') {\n            reject(\n              new SASLError(\n                element.children[0].name,\n                element.getChildText('text') || '',\n                element\n              )\n            )\n          } else if (element.name === 'success') {\n            resolve()\n            this.entity._status('authenticated')\n          }\n\n          this.entity.removeListener('nonza', handler)\n        }\n        this.entity.on('nonza', handler)\n\n        if (mech.clientFirst) {\n          this.entity.send(\n            xml(\n              'auth',\n              {xmlns: NS, mechanism: mech.name},\n              encode(mech.response(creds))\n            )\n          )\n        }\n      })\n    },\n  },\n  [streamFeatures]\n)\n",
    "'use strict'\n\nmodule.exports.encode = function encode(string) {\n  if (!global.Buffer) {\n    return global.btoa(string)\n  }\n  return Buffer.from(string, 'utf8').toString('base64')\n}\n\nmodule.exports.decode = function decode(string) {\n  if (!global.Buffer) {\n    return global.atob(string)\n  }\n  return Buffer.from(string, 'base64').toString('utf8')\n}\n",
    "'use strict'\n\nconst {plugin, xml} = require('@xmpp/plugin')\nconst streamfeatures = require('../stream-features')\nconst iqCaller = require('../iq-caller')\n\nconst NS = 'urn:ietf:params:xml:ns:xmpp-session'\n\nfunction match(features) {\n  const feature = features.getChild('session', NS)\n  return Boolean(feature) && !feature.getChild('optional')\n}\n\nmodule.exports = plugin(\n  'session-establishment',\n  {\n    start() {\n      const streamFeature = {\n        name: 'session-establishment',\n        priority: 2000,\n        match,\n        run: () => this.establishSession(),\n      }\n      this.plugins['stream-features'].add(streamFeature)\n    },\n    establishSession() {\n      return this.entity.plugins['iq-caller'].set(\n        xml('session', 'urn:ietf:params:xml:ns:xmpp-session')\n      )\n    },\n  },\n  [streamfeatures, iqCaller]\n)\nmodule.exports.match = match\n",
    "'use strict'\n\n/**\n * References\n * https://xmpp.org/rfcs/rfc6120.html#streams-negotiation Stream Negotiation\n * https://xmpp.org/extensions/xep-0170.html XEP-0170: Recommended Order of Stream Feature Negotiation\n * https://xmpp.org/registrar/stream-features.html XML Stream Features\n */\n\nconst plugin = require('@xmpp/plugin')\n\nmodule.exports = plugin('stream-features', {\n  start() {\n    this.features = []\n\n    const {entity} = this\n    this.handler = el => {\n      if (el.name !== 'stream:features') {\n        return\n      }\n\n      const streamFeatures = this.selectFeatures(el)\n      if (streamFeatures.length === 0) {\n        return\n      }\n\n      function iterate(c) {\n        const feature = streamFeatures[c]\n        return feature\n          .run(entity, el)\n          .then(() => {\n            if (feature.restart) {\n              return entity.restart()\n            } else if (c === streamFeatures.length - 1) {\n              if (entity.jid) entity._status('online', entity.jid)\n            } else {\n              iterate(c + 1)\n            }\n          })\n          .catch(err => entity.emit('error', err))\n      }\n\n      return iterate(0)\n    }\n\n    entity.on('nonza', this.handler)\n  },\n\n  stop() {\n    delete this.features\n    this.entity.off('nonza', this.handler)\n    delete this.handler\n  },\n\n  selectFeatures(el) {\n    return this.features\n      .filter(f => f.match(el, this.entity) && typeof f.priority === 'number')\n      .sort((a, b) => {\n        return a.priority < b.priority\n      })\n  },\n\n  add({name, priority, run, match, restart}) {\n    this.features.push({name, priority, run, match, restart})\n  },\n})\n",
    "'use strict'\n\nconst ConnectionWebSocket = require('./lib/Connection')\n\nmodule.exports.name = 'websocket'\nmodule.exports.plugin = function plugin(entity) {\n  entity.transports.push(ConnectionWebSocket)\n  return {\n    entity,\n  }\n}\n",
    "'use strict'\n\nconst Socket = require('./Socket')\nconst Connection = require('@xmpp/connection')\nconst xml = require('@xmpp/xml')\nconst FramedParser = require('./FramedParser')\n\nconst NS_FRAMING = 'urn:ietf:params:xml:ns:xmpp-framing'\n\n/* References\n * WebSocket protocol https://tools.ietf.org/html/rfc6455\n * WebSocket Web API https://html.spec.whatwg.org/multipage/comms.html#network\n * XMPP over WebSocket https://tools.ietf.org/html/rfc7395\n*/\n\nclass ConnectionWebSocket extends Connection {\n  // https://tools.ietf.org/html/rfc7395#section-3.6\n  footerElement() {\n    return new xml.Element('close', {\n      xmlns: NS_FRAMING,\n    })\n  }\n\n  // https://tools.ietf.org/html/rfc7395#section-3.4\n  headerElement() {\n    const el = super.headerElement()\n    el.name = 'open'\n    el.attrs.xmlns = NS_FRAMING\n    return el\n  }\n\n  socketParameters(uri) {\n    return uri.match(/^wss?:\\/\\//) ? uri : undefined\n  }\n}\n\nConnectionWebSocket.prototype.Socket = Socket\nConnectionWebSocket.prototype.NS = 'jabber:client'\nConnectionWebSocket.prototype.Parser = FramedParser\n\nmodule.exports = ConnectionWebSocket\n",
    "'use strict'\n\nconst {Parser} = require('@xmpp/xml')\n\nmodule.exports = class FramedParser extends Parser {\n  onStartElement() {}\n  onEndElement(element, length) {\n    if (length === 1) {\n      if (element.is('open', 'urn:ietf:params:xml:ns:xmpp-framing')) {\n        this.emit('start', element)\n      } else if (element.is('close', 'urn:ietf:params:xml:ns:xmpp-framing')) {\n        this.emit('end', element)\n      } else {\n        this.emit('element', element)\n      }\n    }\n  }\n}\n",
    "'use strict'\n\nconst WS = require('ws')\nconst WebSocket = global.WebSocket || WS\nconst EventEmitter = require('events')\n\nclass Socket extends EventEmitter {\n  constructor() {\n    super()\n    this.listeners = Object.create(null)\n  }\n\n  connect(url, fn) {\n    this.url = url\n    this._attachSocket(new WebSocket(url, ['xmpp']), fn)\n  }\n\n  _attachSocket(socket, fn) {\n    const sock = (this.socket = socket)\n    const {listeners} = this\n    listeners.open = () => {\n      this.emit('connect')\n      if (fn) {\n        fn()\n      }\n    }\n    listeners.message = ({data}) => this.emit('data', data)\n    listeners.error = err => {\n      this.emit(\n        'error',\n        err instanceof Error ? err : new Error(`connection error ${this.url}`)\n      )\n    }\n    listeners.close = ({code, reason}) => {\n      this._detachSocket()\n      this.emit('close', {code, reason})\n    }\n\n    sock.addEventListener('open', listeners.open)\n    sock.addEventListener('message', listeners.message)\n    sock.addEventListener('error', listeners.error)\n    sock.addEventListener('close', listeners.close)\n  }\n\n  _detachSocket() {\n    delete this.url\n    const {socket, listeners} = this\n    Object.getOwnPropertyNames(listeners).forEach(k => {\n      socket.removeEventListener(k, listeners[k])\n      delete listeners[k]\n    })\n    delete this.socket\n  }\n\n  end() {\n    this.socket.close()\n  }\n\n  write(data, fn) {\n    if (WebSocket === WS) {\n      this.socket.send(data, fn)\n    } else {\n      this.socket.send(data)\n      fn()\n    }\n  }\n}\n\nmodule.exports = Socket\n",
    "'use strict'\n\nconst x = require('./lib/x')\nconst Element = require('./lib/Element')\nconst Parser = require('./lib/Parser')\nconst {\n  escapeXML,\n  unescapeXML,\n  escapeXMLText,\n  unescapeXMLText,\n} = require('ltx/lib/escape')\n\nfunction xml(...args) {\n  return x(...args)\n}\n\nexports = module.exports = xml\n\nObject.assign(exports, {\n  x,\n  Element,\n  Parser,\n  escapeXML,\n  unescapeXML,\n  escapeXMLText,\n  unescapeXMLText,\n})\n",
    "'use strict'\n\nconst _Element = require('ltx/lib/Element')\n\nclass Element extends _Element {\n  append(nodes) {\n    nodes = Array.isArray(nodes) ? nodes : [nodes]\n    nodes.forEach(node => {\n      this.children.push(node)\n      if (typeof node === 'object') {\n        node.parent = this\n      }\n    })\n  }\n\n  prepend(nodes) {\n    nodes = Array.isArray(nodes) ? nodes : [nodes]\n    nodes.forEach(node => {\n      this.children.unshift(node)\n      if (typeof node === 'object') {\n        node.parent = this\n      }\n    })\n  }\n}\n\nmodule.exports = Element\n",
    "'use strict'\n\nconst LtxParser = require('ltx/lib/parsers/ltx')\nconst Element = require('./Element')\nconst EventEmitter = require('events')\n\nclass XMLError extends Error {\n  constructor(...args) {\n    super(...args)\n    this.name = 'XMLError'\n  }\n}\n\nclass Parser extends EventEmitter {\n  constructor() {\n    super()\n    const parser = new LtxParser()\n    const stack = []\n    let cursor\n\n    parser.on('startElement', (name, attrs) => {\n      const child = new Element(name, attrs)\n      if (cursor) {\n        cursor.append(child)\n      }\n      this.onStartElement(child, cursor)\n      this.emit('startElement', child)\n      stack.push(cursor)\n      cursor = child\n    })\n    parser.on('endElement', name => {\n      if (name === cursor.name) {\n        this.onEndElement(cursor, stack.length)\n        this.emit('endElement', cursor)\n        cursor = stack.pop()\n      } else {\n        // <foo></bar>\n        this.emit('error', new XMLError(`${cursor.name} must be closed.`))\n      }\n    })\n\n    parser.on('text', str => {\n      this.onText(str, cursor)\n    })\n    this.parser = parser\n  }\n  onStartElement(element, cursor) {\n    if (!cursor) {\n      this.emit('start', element)\n    }\n  }\n  onEndElement(element, length) {\n    if (length === 2) {\n      this.emit('element', element)\n    } else if (length === 1) {\n      this.emit('end', element)\n    }\n  }\n  onText(str, element) {\n    if (!element) {\n      this.emit('error', new XMLError(`${str} must be a child.`))\n      return\n    }\n    element.t(str)\n  }\n  write(data) {\n    this.parser.write(data)\n  }\n  end(data) {\n    if (data) {\n      this.parser.write(data)\n    }\n  }\n}\n\nParser.XMLError = XMLError\n\nmodule.exports = Parser\n",
    "'use strict'\n\nconst Element = require('./Element')\n\nfunction append(el, child) {\n  if (child instanceof Element) {\n    el.append(child)\n  } else if (Array.isArray(child)) {\n    child.forEach(c => append(el, c))\n  } else if (child !== null && child !== undefined) {\n    el.append(String(child))\n  }\n}\n\nfunction x(name, attrs, ...children) {\n  const el = new Element(name, attrs)\n  for (let i = 0; i < children.length; i++) {\n    append(el, children[i])\n  }\n  return el\n}\n\nmodule.exports = x\n",
    "'use strict'\n\nconst Client = require('./lib/Client')\nconst {xml, jid} = require('@xmpp/client-core')\n\nmodule.exports.Client = Client\nmodule.exports.xml = xml\nmodule.exports.jid = jid\n",
    "'use strict'\n\nconst ClientCore = require('@xmpp/client-core').Client\nconst plugins = require('./plugins')\n\nclass Client extends ClientCore {\n  constructor(...args) {\n    super(...args)\n    Object.keys(plugins).forEach(name => {\n      const plugin = plugins[name]\n      // Ignore browserify stubs\n      if (!plugin.plugin) {\n        return\n      }\n      this.plugin(plugin)\n    })\n  }\n}\n\nmodule.exports = Client\n",
    "'use strict'\n\nexports['stream-features'] = require('@xmpp/plugins/stream-features')\nexports.bind = require('@xmpp/plugins/bind')\nexports.sasl = require('@xmpp/plugins/sasl')\nexports['sasl-plain'] = require('@xmpp/plugins/sasl-plain')\nexports['sasl-anonymous'] = require('@xmpp/plugins/sasl-anonymous')\nexports.websocket = require('@xmpp/plugins/websocket')\nexports.tcp = require('@xmpp/plugins/tcp')\nexports.tls = require('@xmpp/plugins/tls')\nexports.reconnect = require('@xmpp/plugins/reconnect')\nexports.starttls = require('@xmpp/plugins/starttls')\nexports[\n  'session-establishment'\n] = require('@xmpp/plugins/session-establishment')\n"
  ]
}